if (window.innerWidth < 1200) {
    var pdp_html = '<section class="inc_breadcrumb__wrapper"> <ul class="incbreadcrumb" data-module="incbreadcrumb"> <li class="inc_breadcrumb__item"><a class="breadcrumb__link" href="https://www.petsathome.com/shop/en/pets">Home > </a></li> <li class="inc_breadcrumb_prd"></li> </ul></section><div class="inc_title_bk"> <div class="inc_title_txt_bk"> <div class="inc_title_txt"></div> </div> <div class="inc_title_img_bk"> <div class="inc_title_img"></div> </div></div><div class="inc_bundle_bk"> <div class="inc_product-main_bk"></div><div class="inc_wrapper"> <div class="inc_bd_prd_bk"> <div class="inc_bd_prd_hdr_bk"> <div class="inc_bd_prd_hdr_text" style="text-transform: none;">This item</div> </div> <div class="inc_col_desc_main_product_details_bk"></div> <div class="inc_bd_prd_list_bk"> <div class="inc_bd_prd_list_main_bk"></div> </div> </div> <div class="inc_bd_cart_bk"> <div class="inc_bd_cart_title_bk"> <div class="inc_bd_cart_title_txt_bk"> <div class="inc_bd_cart_title_txt">Price Summary</div> </div> </div> <div class="inc_bd-cart_ecirp_bk"> <div class="inc_bd-cart_ecirp_main"> <div class="inc_bd-cart_ecirp_main_title_bk"> <div class="inc_bd-cart_ecirp_main_title_txt_bk"> <div class="inc_bd-cart_ecirp_main_title_txt">Main Product</div> </div> </div> <div class="inc_bd-cart_ecirp_main_figure_bk"> <div class="inc_bd-cart_ecirp_main_figure_text_bk"> <div class="inc_bd-cart_ecirp_main_figure_text"></div> </div> </div> </div> <div class="inc_bd-cart_ecirp_addon_bk"> <div class="inc_bd-cart_ecirp_addon_title_bk"> <div class="inc_bd-cart_ecirp_addon_title_txt_bk"> <div class="inc_bd-cart_ecirp_addon_title_txt"></div> </div> </div> <div class="inc_bd-cart_ecirp_addon_figure_bk"> <div class="inc_bd-cart_ecirp_addon_figure_text_bk"> <div class="inc_bd-cart_ecirp_addon_figure_text"></div> </div> </div> </div> </div> <div class="inc_bd_cart_added_bk"></div> <div class="inc_bd_cart_smry_bk"> <div class="inc_bd_cart_smry_main_prd"> <div class="inc_bd_cart_smry_main_prd_txt"></div> <div class="inc_bd_cart_smry_main_prd_prc"></div> </div> <div class="inc_bd_cart_smry_addon_prd"> <div class="inc_bd_cart_smry_addon_prd_txt"></div> <div class="inc_bd_cart_smry_addon_prd_prc"></div> </div> <div class="inc_bd_cart_smry_title_bk"> <div class="inc_bd_cart_smry_title_txt_bk"> <div class="inc_bd_cart_smry_title_txt">Total bundle price</div> </div> </div> <div class="inc_bd_cart_smry_ecirp_bk"> <div class="inc_bd_cart_smry_ecirp_active_bk"> <div class="inc_bd_cart_smry_ecirp_bk"> <div class="inc_bd_cart_smry_ecirp_active_bk"> <div class="inc_bd_cart_smry_ecirp_active_text_bk"></div> <div class="inc_bd_cart_smry_ecirp_active_text"></div> </div> <div class="inc_regSav_wrap"></div> <div class="inc_bd_cart_smry_ecirp_regular_bk"> <div class="inc_bd_cart_smry_ecirp_regular_text_bk"> <div class="inc_bd_cart_smry_ecirp_regular_text"></div> </div> </div> <div class="inc_bd_cart_smry_ecirp_save_bk"> <div class="inc_bd_cart_smry_ecirp_save_text"></div> </div> </div> </div> </div> <div class="inc_bd_cart_smry_view_bk"> <div class="inc_bd_cart_smry_view_btn_bk"> <div class="inc_bd_cart_smry_view_btn_img_bk"> <div class="inc_bd_cart_smry_view_btn_img"></div> </div> <div class="inc_bd_cart_smry_view_btn_text_bk"> <div class="inc_bd_cart_smry_view_btn_text">Added items</div> </div> <div class="inc_bd_cart_smry_view_btn_count_bk"> <div class="inc_bd_cart_smry_view_btn_count">3</div> </div> </div> </div> <div class="inc_bd_cart_smry_add_bk"> <div class="inc_bd_cart_smry_add_btn_bk" style="pointer-events: auto; opacity: 1;"> <div class="inc_bd_cart_smry_add_btn_text_bk"> <div class="inc_bd_cart_smry_add_btn_text" style="text-transform: none;">Add 3 Items To Basket</div> <div class="inc_bd_cart_smry_add_btn_span"></div> </div> <div class="inc_bd_cart_smry_add_btn_img_bk"> <div class="inc_bd_cart_smry_add_btn_img"></div> </div> </div> </div> <div class="inc_collect_point_checkout_bk"> <div class="inc_collect_point_text"></div> </div> </div> </div></div><div class="inc_main_product_description_bk"> <div class="inc_main_product_description_title_txt">Product Description</div> <div class="inc_main_product_description_text"></div></div>'

} else {
    var pdp_html = '<section class="inc_breadcrumb__wrapper"><ul class="incbreadcrumb" data-module="incbreadcrumb"><li class="inc_breadcrumb__item"><a class="breadcrumb__link " href="https://www.petsathome.com/shop/en/pets">Home > </a></li><li class="inc_breadcrumb_prd"></li></ul></section><div class=inc_title_bk><div class=inc_title_txt_bk><div class=inc_title_txt></div></div><div class=inc_title_img_bk><div class=inc_title_img></div></div></div><div class=inc_bundle_bk><div class=inc_product-main_bk></div><div class=inc_bd_prd_bk><div class=inc_bd_prd_hdr_bk><div class=inc_bd_prd_hdr_text style=text-transform:none>This item</div></div><div class=inc_col_desc_main_product_details_bk></div><div class=inc_bd_prd_list_bk><div class=inc_bd_prd_list_main_bk></div></div><div class=inc_bd_cart_bk><div class=inc_bd_cart_title_bk><div class=inc_bd_cart_title_txt_bk><div class=inc_bd_cart_title_txt>Price Summary</div></div></div><div class=inc_bd-cart_ecirp_bk><div class=inc_bd-cart_ecirp_main><div class=inc_bd-cart_ecirp_main_title_bk><div class=inc_bd-cart_ecirp_main_title_txt_bk><div class=inc_bd-cart_ecirp_main_title_txt>Main Product</div></div></div><div class=inc_bd-cart_ecirp_main_figure_bk><div class=inc_bd-cart_ecirp_main_figure_text_bk><div class=inc_bd-cart_ecirp_main_figure_text></div></div></div></div><div class=inc_bd-cart_ecirp_addon_bk><div class=inc_bd-cart_ecirp_addon_title_bk><div class=inc_bd-cart_ecirp_addon_title_txt_bk><div class=inc_bd-cart_ecirp_addon_title_txt></div></div></div><div class=inc_bd-cart_ecirp_addon_figure_bk><div class=inc_bd-cart_ecirp_addon_figure_text_bk><div class=inc_bd-cart_ecirp_addon_figure_text></div></div></div></div></div><div class=inc_bd_cart_added_bk></div><div class=inc_bd_cart_smry_bk><div class=inc_bd_cart_smry_main_prd><div class=inc_bd_cart_smry_main_prd_txt></div><div class=inc_bd_cart_smry_main_prd_prc></div></div><div class=inc_bd_cart_smry_addon_prd><div class=inc_bd_cart_smry_addon_prd_txt></div><div class=inc_bd_cart_smry_addon_prd_prc></div></div><div class=inc_bd_cart_smry_title_bk><div class=inc_bd_cart_smry_title_txt_bk><div class=inc_bd_cart_smry_title_txt>Total bundle price</div></div></div><div class="inc_bd_cart_smry_ecirp_bk"> <div class="inc_bd_cart_smry_ecirp_active_bk"> <div class="inc_bd_cart_smry_ecirp_active_text_bk"><div class="inc_bd_cart_smry_ecirp_active_text"></div></div></div><div class="inc_bd_cart_smry_ecirp_regular_bk"> <div class="inc_bd_cart_smry_ecirp_regular_text_bk"><div class="inc_bd_cart_smry_ecirp_regular_text"></div></div></div><div class="inc_bd_cart_smry_ecirp_save_bk"><div class="inc_bd_cart_smry_ecirp_save_text"></div></div></div><div class=inc_bd_cart_smry_view_bk><div class=inc_bd_cart_smry_view_btn_bk><div class=inc_bd_cart_smry_view_btn_img_bk><div class=inc_bd_cart_smry_view_btn_img></div></div><div class=inc_bd_cart_smry_view_btn_text_bk><div class=inc_bd_cart_smry_view_btn_text>Added items</div></div><div class=inc_bd_cart_smry_view_btn_count_bk><div class=inc_bd_cart_smry_view_btn_count>3</div></div></div></div><div class=inc_bd_cart_smry_add_bk><div class=inc_bd_cart_smry_add_btn_bk style=pointer-events:auto;opacity:1><div class=inc_bd_cart_smry_add_btn_text_bk><div class=inc_bd_cart_smry_add_btn_text style=text-transform:none>Add 3 Items To Basket</div><div class=inc_bd_cart_smry_add_btn_span></div></div><div class=inc_bd_cart_smry_add_btn_img_bk><div class=inc_bd_cart_smry_add_btn_img></div></div></div></div><div class=inc_collect_point_checkout_bk><div class=inc_collect_point_text></div></div></div></div></div></div><div class=inc_main_product_description_bk><div class=inc_main_product_description_title_txt>Product Description</div><div class=inc_main_product_description_text></div></div>'
}

var showcase_productcard = '<div class="inc_prd_bk"> <div class="inc_prd_extension_bk"></div><div class="inc_prd_hdr_main_bk"> <div class="inc_prd_hdr_main_title_bk"></div><div class="inc_prd_hdr_main_rating_bk"></div><div class="inc_prd_hrd_desc_ecirp_bk"> <div class="inc_prd_hrd_ecirp_label_bk">SALE</div><div class="inc_prd_hrd_desc_ecirp_active_bk"> <div class="inc_prd_hrd_desc_ecirp_active_text_bk"> <div class="inc_prd_hrd_desc_ecirp_active_text">£0.00 - -£0.00</div><div class="inc_prd_hrd_desc_ecirp_active_text_msg"></div></div></div><div class="inc_prd_hrd_desc_ecirp_regular_bk"> <div class="inc_prd_hrd_desc_ecirp_regular_text_bk"><div class="inc_prd_hrd_desc_ecirp_regular_text"></div></div></div><div class="inc_prd_hrd_desc_ecirp_worth_bk"> <div class="inc_prd_hrd_desc_ecirp_worth_text_bk"> <div class="inc_prd_hrd_desc_ecirp_worth_text"></div><div class="inc_prd_hrd_desc_ecirp_worth_text_msg"></div></div></div></div><div class="inc_prd_hdr_bk"> <div class="inc_prd_hdr_title_bk"> <div class="inc_prd_hdr_title_txt_bk"><div class="inc_prd_hdr_title_txt"></div></div></div></div><div class="inc_prd_Description_hdr_bk"> <div class="inc_prd_Description_hdr_title_bk"> <div class="inc_prd_Description_hdr_title_txt_bk"><div class="inc_prd_Description_hdr_title_txt"></div></div></div></div><div class="inc_prd_hdr_img_bk"><div class="inc_prd_hdr_img"></div></div></div><div class="inc_prd_info_main_bk"> <div class="inc_prd_img_bk"> <div class="inc_prd_img_main_bk"><div class="inc_prd_img_main_img"></div></div><div class="inc_prd_img_gallery_bk"> <div class="inc_prd_img_gallery_left_bk"> <div class="inc_prd_img_gallery_left_btn_bk"> <div class="inc_prd_img_gallery_left_btn_img_bk"><div class="inc_prd_img_gallery_left_btn_img"></div></div><div class="inc_prd_img_gallery_left_btn_text_bk"><div class="inc_prd_img_gallery_left_btn_text"></div></div></div></div><div class="inc_prd_img_gallery_list_wrp_bk"> <div class="inc_prd_img_gallery_list_bk"></div></div><div class="inc_prd_img_gallery_right_bk"> <div class="inc_prd_img_gallery_right_btn_bk"> <div class="inc_prd_img_gallery_right_btn_img_bk"><div class="inc_prd_img_gallery_right_btn_img"></div></div><div class="inc_prd_img_gallery_right_btn_text_bk"><div class="inc_prd_img_gallery_right_btn_text"></div></div></div></div></div></div><div class="inc_prd_desc_bk"> <div class="inc_prd_desc_title_bk"> <div class="inc_prd_desc_title_txt_bk"><div class="inc_prd_desc_title_txt"></div></div></div><div class="empty pc_promo_div"></div><div class="inc_prd_desc_ratings_bk"></div><div class="inc_prd_desc_ecirp_bk"> <div class="inc_prd_ecirp_label_bk">SALE</div><div class="inc_prd_desc_ecirp_active_bk"> <div class="inc_prd_desc_ecirp_active_text_bk"> <div class="inc_prd_desc_ecirp_active_text">£0.00 - -£0.00</div><div class="inc_prd_desc_ecirp_active_text_msg"></div></div></div><div class="inc_prd_desc_ecirp_regular_bk"> <div class="inc_prd_desc_ecirp_regular_text_bk"><div class="inc_prd_desc_ecirp_regular_text"></div></div></div><div class="inc_prd_desc_ecirp_worth_bk"> <div class="inc_prd_desc_ecirp_worth_text_bk"> <div class="inc_prd_desc_ecirp_worth_text"></div><div class="inc_prd_desc_ecirp_worth_text_msg"></div></div></div></div><div class="inc_variant_error_text"></div><div class="inc_prd_desc_qty_add_btn_bk"> <div class="inc_prd_desc_qty_bk singleqty"> <div class="inc_prd_desc_qty_down_bk"> <div class="inc_prd_desc_qty_down_btn_bk"><div class="inc_prd_desc_qty_down_btn"></div></div></div><div class="inc_prd_desc_qty_input_bk"> <div class="inc_prd_desc_qty_input_text_bk"> <div class="inc_prd_desc_qty_input_text"><span class="inc_add_text"></span></div></div></div><div class="inc_prd_desc_qty_up_bk"> <div class="inc_prd_desc_qty_up_btn_bk"><div class="inc_prd_desc_qty_up_btn"></div></div></div></div><div class="inc_prd_desc_att_details_bk"> <div class="inc_prd_variant_simple_bk"><div class="inc_prd_variant_simple_text">Add</div></div><div class="inc_prd_desc_att_bk"> <div class="inc_prd_desc_variant_popup_close_bk"></div><div class="inc_prd_desc_add_err_text_bk"></div><div class="inc_prd_desc_add_title_txt_bk"></div><div class="inc_prd_desc_att_zero_bk"> <div class="inc_prd_desc_att_zero_title_bk"> <div class="inc_prd_desc_att_zero_title_txt_bk"> <div class="inc_prd_desc_att_zero_title_txt"></div><div class="inc_prd_desc_att_zero_title_txt_selected"></div></div></div><div class="inc_prd_desc_att_zero_list_bk"></div></div><div class="inc_prd_desc_att_size_bk"> <div class="inc_prd_desc_att_size_title_bk"> <div class="inc_prd_desc_att_size_title_txt_bk"> <div class="inc_prd_desc_att_size_title_txt"></div><div class="inc_prd_desc_att_size_title_txt_selected"></div></div></div><div class="inc_prd_desc_att_size_list_bk"></div></div><div class="inc_prd_desc_att_color_bk"> <div class="inc_prd_desc_att_color_title_bk"> <div class="inc_prd_desc_att_color_title_txt_bk"> <div class="inc_prd_desc_att_color_title_txt"></div><div class="inc_prd_desc_att_color_title_txt_selected"></div></div></div><div class="inc_prd_desc_att_color_list_bk"></div></div><div class="inc_prd_desc_att_third_bk"> <div class="inc_prd_desc_att_third_title_bk"> <div class="inc_prd_desc_att_third_title_txt_bk"> <div class="inc_prd_desc_att_third_title_txt"></div><div class="inc_prd_desc_att_third_title_txt_selected"></div></div></div><div class="inc_prd_desc_att_third_list_bk"></div></div><div class="inc_prd_desc_att_fourth_bk"> <div class="inc_prd_desc_att_fourth_title_bk"> <div class="inc_prd_desc_att_fourth_title_txt_bk"> <div class="inc_prd_desc_att_fourth_title_txt"></div><div class="inc_prd_desc_att_fourth_title_txt_selected"></div></div></div><div class="inc_prd_desc_att_fourth_list_bk"> <div class="inc_prd_desc_att_fourth_list_item_bk"> <div class="inc_prd_desc_att_fourth_list_item_img_bk"><div class="inc_prd_desc_att_fourth_list_item_img"></div></div><div class="inc_prd_desc_att_fourth_list_item_text_bk"><div class="inc_prd_desc_att_fourth_list_item_text"></div></div></div></div></div><div class="inc_prd_desc_att_edit_bk"><div class="inc_prd_desc_att_edit_text"></div></div><div class="inc_prd_desc_att_variant_add_bk"><div class="inc_prd_desc_att_variant_text"></div></div></div><div class="inc_prd_details_prod_bk"><div class="inc_prd_details_prod_text"></div></div></div><div class="inc_prd_add_bk"> <div class="inc_prd_add_text_bk"><div class="inc_prd_add_text">Add</div></div></div><div class="inc_prd_desc_add_bk"> <div class="inc_prd_desc_add_img_bk"><div class="inc_prd_desc_add_img"></div></div><div class="inc_prd_desc_add_text_bk"> <div class="inc_prd_desc_add_text">Add</div><div class="inc_prd_desc_add_span"></div></div></div><div class="inc_prd_bstxt_bk"></div></div></div><div class="inc_prd_bstxt_bk"></div></div><div class="inc_prd_description_main_bk"></div></div>'
var modal_productcard = '<div class=inc_prd_bk><div class=inc_prd_extension_bk></div><div class=inc_prd_hdr_main_bk><div class=inc_prd_hdr_main_title_bk></div><div class=inc_prd_hdr_main_rating_bk><div class=inc_prd_desc_ratings_bk></div><span class=product_modal_sku>#</span></div><div class=inc_prd_hrd_desc_ecirp_bk><div class=inc_prd_hrd_ecirp_label_bk>SALE</div><div class=inc_prd_hrd_desc_ecirp_active_bk><div class=inc_prd_hrd_desc_ecirp_active_text_bk><div class=inc_prd_hrd_desc_ecirp_active_text>£0.00 - -£0.00</div><div class=inc_prd_hrd_desc_ecirp_active_text_msg></div></div></div><div class=inc_prd_hrd_desc_ecirp_regular_bk><div class=inc_prd_hrd_desc_ecirp_regular_text_bk><div class=inc_prd_hrd_desc_ecirp_regular_text></div></div></div><div class=inc_prd_hrd_desc_ecirp_worth_bk><div class=inc_prd_hrd_desc_ecirp_worth_text_bk><div class=inc_prd_hrd_desc_ecirp_worth_text></div><div class=inc_prd_hrd_desc_ecirp_worth_text_msg></div></div></div></div><div class=inc_prd_hdr_bk><div class=inc_prd_hdr_title_bk><div class=inc_prd_hdr_title_txt_bk><div class=inc_prd_hdr_title_txt>Overview</div></div></div><div class=inc_product_hdr_title_bk_1><div class=inc_product_hdr_title_txt_bk_1><div class=inc_product_hdr_title_txt_1>Product Description</div></div></div><div class=inc_prd_hdr_new_page><a class=inc_prd_hdr_new_page_text href="">Open in a New Tab</a></div></div><div class=inc_prd_Description_hdr_bk><div class=inc_prd_Description_hdr_title_bk><div class=inc_prd_Description_hdr_title_txt_bk><div class=inc_prd_Description_hdr_title_txt></div></div></div></div><div class=inc_prd_hdr_img_bk><div class=inc_prd_hdr_img></div></div></div><div class=inc_prd_info_main_bk><div class=inc_prd_img_bk><div class=inc_prd_img_main_bk><div class=inc_prd_img_main_img></div></div><div class=inc_prd_img_gallery_bk><div class=inc_prd_img_gallery_left_bk title="Scroll left"><div class=inc_prd_img_gallery_left_btn_bk><div class=inc_prd_img_gallery_left_btn_img_bk><div class=inc_prd_img_gallery_left_btn_img></div></div><div class=inc_prd_img_gallery_left_btn_text_bk><div class=inc_prd_img_gallery_left_btn_text></div></div></div></div><div class=inc_prd_img_gallery_list_bk></div><div class=inc_prd_img_gallery_right_bk title="Scroll right"><div class=inc_prd_img_gallery_right_btn_bk><div class=inc_prd_img_gallery_right_btn_img_bk><div class=inc_prd_img_gallery_right_btn_img></div></div><div class=inc_prd_img_gallery_right_btn_text_bk><div class=inc_prd_img_gallery_right_btn_text></div></div></div></div></div></div><div class=inc_prd_desc_bk><div class=inc_prd_desc_title_bk><div class=inc_prd_desc_title_txt_bk><div class=inc_prd_desc_title_txt></div></div></div><div class=inc_prd_desc_ratings_bk></div><div class=inc_prd_desc_ecirp_bk><div class=inc_prd_ecirp_label_bk>SALE</div><div class=inc_prd_desc_ecirp_active_bk><div class=inc_prd_desc_ecirp_active_text_bk><div class=inc_prd_desc_ecirp_active_text>£0.00 - -£0.00</div><div class=inc_prd_desc_ecirp_active_text_msg></div></div></div><div class=inc_prd_desc_ecirp_regular_bk><div class=inc_prd_desc_ecirp_regular_text_bk><div class=inc_prd_desc_ecirp_regular_text></div></div></div><div class=inc_prd_desc_ecirp_worth_bk><div class=inc_prd_desc_ecirp_worth_text_bk><div class=inc_prd_desc_ecirp_worth_text></div><div class=inc_prd_desc_ecirp_worth_text_msg></div></div></div></div><div class=inc_prd_desc_att_details_bk><div class=inc_prd_variant_simple_bk><div class=inc_prd_variant_simple_text></div></div><div class="empty pc_promo_div"></div><div class=inc_prd_desc_att_bk><div class=inc_prd_desc_variant_popup_close_bk></div><div class=inc_prd_desc_add_err_text_bk></div><div class=inc_prd_desc_add_title_txt_bk></div><div class=inc_prd_desc_att_zero_bk><div class=inc_prd_desc_att_zero_title_bk><div class=inc_prd_desc_att_zero_title_txt_bk><div class=inc_prd_desc_att_zero_title_txt></div><div class=inc_prd_desc_att_zero_title_txt_selected></div></div></div><div class=inc_prd_desc_att_zero_list_bk></div></div><div class=inc_prd_desc_att_size_bk><div class=inc_prd_desc_att_size_title_bk><div class=inc_prd_desc_att_size_title_txt_bk><div class=inc_prd_desc_att_size_title_txt></div><div class=inc_prd_desc_att_size_title_txt_selected></div></div></div><div class=inc_prd_desc_att_size_list_bk></div></div><div class=inc_prd_desc_att_color_bk><div class=inc_prd_desc_att_color_title_bk><div class=inc_prd_desc_att_color_title_txt_bk><div class=inc_prd_desc_att_color_title_txt></div><div class=inc_prd_desc_att_color_title_txt_selected></div></div></div><div class=inc_prd_desc_att_color_list_bk></div></div><div class=inc_prd_desc_att_third_bk><div class=inc_prd_desc_att_third_title_bk><div class=inc_prd_desc_att_third_title_txt_bk><div class=inc_prd_desc_att_third_title_txt></div><div class=inc_prd_desc_att_third_title_txt_selected></div></div></div><div class=inc_prd_desc_att_third_list_bk></div></div><div class=inc_prd_desc_att_fourth_bk><div class=inc_prd_desc_att_fourth_title_bk><div class=inc_prd_desc_att_fourth_title_txt_bk><div class=inc_prd_desc_att_fourth_title_txt></div><div class=inc_prd_desc_att_fourth_title_txt_selected></div></div></div><div class=inc_prd_desc_att_fourth_list_bk><div class=inc_prd_desc_att_fourth_list_item_bk><div class=inc_prd_desc_att_fourth_list_item_img_bk><div class=inc_prd_desc_att_fourth_list_item_img></div></div><div class=inc_prd_desc_att_fourth_list_item_text_bk><div class=inc_prd_desc_att_fourth_list_item_text></div></div></div></div></div><div class=inc_prd_desc_att_edit_bk><div class=inc_prd_desc_att_edit_text></div></div><div class=inc_prd_desc_att_variant_add_bk><div class=inc_prd_desc_att_variant_text></div></div></div><div class=inc_prd_details_prod_bk><div class=inc_prd_details_prod_text></div></div></div><div class=inc_prd_desc_qty_add_btn_bk><div class="inc_prd_desc_qty_bk singleqty"><div class=inc_prd_desc_qty_down_bk><div class=inc_prd_desc_qty_down_btn_bk><div class=inc_prd_desc_qty_down_btn></div></div></div><div class=inc_prd_desc_qty_input_bk><div class=inc_prd_desc_qty_input_text_bk><div class=inc_prd_desc_qty_input_text></div></div></div><div class=inc_prd_desc_qty_up_bk><div class=inc_prd_desc_qty_up_btn_bk><div class=inc_prd_desc_qty_up_btn></div></div></div></div><div class=inc_prd_add_bk><div class=inc_prd_add_text_bk><div class=inc_prd_add_text></div></div></div><div class=inc_prd_desc_add_bk><div class=inc_prd_desc_add_img_bk><div class=inc_prd_desc_add_img></div></div><div class=inc_prd_desc_add_text_bk><div class=inc_prd_desc_add_text>Add</div><div class=inc_prd_desc_add_span></div></div></div><div class=inc_prd_bstxt_bk></div></div></div><div class=inc_prd_bstxt_bk></div></div><div class=inc_prd_description_main_bk><div class=inc_main_product_description_title_txt>Product Description</div></div></div>'
// function addCSSFile() {
//     var versionUpdate = (new Date()).getTime();
//     var cssFilePath = "https://www.increasingly.co/Clients/optimised/css/pah_c.css?v="+versionUpdate;
//     var linkTag = document.createElement('link');
//     linkTag.rel = "stylesheet";
//     linkTag.href = cssFilePath;
//     document.querySelector('head').appendChild(linkTag);
// }
// addCSSFile()

var INC_COL = (typeof (INC_COL) == "undefined") ? {} : INC_COL;
var init_flag = true
INC_COL.ENV = "prod";
var onloadpdp = false;

var onloadpdp_delete = false;
INC_COL.checkProdUserCookie = function() {
    if (INC_COL.ENV == "prod") {
        setTimeout(function() {
            INC_COL.config.pageType = INC_COL.methods.detectPageType();
            if (init_flag) {
                init_flag = false;
                INC_COL.init();
            }
        }, 0);
    }
}
INC_COL.checkProdUserCookie();
var incallowedKeys = [46, 8, 9, 27, 110, 190];
var inc_col_scroll_height = 100
INC_COL.clientConfig = {};
INC_COL.clientConfig.statusVAT = "";
INC_COL.clientConfig.offset = 0;
INC_COL.clientConfig.slidevalue = 0;
INC_COL.clientConfig.regularPricePrefix = " Was ";
INC_COL.config = {};
INC_COL.config.deviceType = "";
INC_COL.config.MainPrdName = "";
INC_COL.config.clientToken = "p3ThM9cON";
INC_COL.config.trackingURL = "https://optimizedby.increasingly.co/ImportData";
INC_COL.config.addToBasketURL = "https://www.petsathome.com/webapp/wcs/stores/servlet/AjaxOrderChangeServiceItemAdd";
INC_COL.clientConfig.checkoutLink = "/shop/Basket/";
INC_COL.config.affiliateURL = "";
INC_COL.config.pageType = "";
INC_COL.config.ivid = "";
INC_COL.config.pdpaddedProductList = [];
INC_COL.config.inc_col_slideIndex = 1;
INC_COL.config.bundle_tracking = [];
INC_COL.config.Product_id = null;
INC_COL.config.dupBasket = [];
INC_COL.config.dupDataObjectProducts = [];
INC_COL.config.childlevelprodResc = [];
INC_COL.clientConfig.OOS = [];
INC_COL.config.disablebtn = true;
INC_COL.config.sidebarremovedprod = [];
INC_COL.config.cartproductids = [];
INC_COL.config.bundle_skuPushed = []
INC_COL.config.collection_combo_details = []
INC_COL.config.dupDataObjectProducts = []
INC_COL.config.FBTTitle = "Frequently Bought together"
INC_COL.config.AddedText = "Added"
INC_COL.config.BeforeYouChecktext = "Customers also bought"
INC_COL.config.ajaxerr = "I'm sorry we've experienced an error. Please try again."
INC_COL.config.UpdateText = "UPDATE"
INC_COL.config.descriptionsText = "Product Description"
INC_COL.config.noimage = "https://www.increasingly.co/Implementation/p3ThM9/img/no-image.svg"
INC_COL.config.recommendation = false;
var price_array = [];
var x_ecirp_array = [];
INC_COL.config.bundledid = []
INC_COL.config.cldomain = ""
INC_COL.config.checkoutpath = ""
INC_COL.config.collectioncount = ""
if (window.location.hostname == "www.uat02p.pahtest.com") {
    INC_COL.config.addToBasketURL = "https://www.uat02p.pahtest.com/webapp/wcs/stores/servlet/AjaxOrderChangeServiceItemAdd";
} else {
    INC_COL.config.addToBasketURL = "https://www.petsathome.com/webapp/wcs/stores/servlet/AjaxOrderChangeServiceItemAdd";
}
function isBase64(str) {
    try {
        return btoa(atob(str)) == str;
    } catch (err) {
        return false;
    }
}
function addCSSFile() {
    var versionUpdate = (new Date()).getTime();
    var cssFilePath = "https://www.increasingly.co/Clients/optimised/fbt/css/p3ThM9.css?v=" + versionUpdate;
    var linkTag = document.createElement('link');
    linkTag.rel = "stylesheet";
    linkTag.href = cssFilePath;
    document.querySelector('head').appendChild(linkTag);
}
addCSSFile();
setTimeout(function() {
    var versionUpdate1 = (new Date()).getTime();
    var jsFilePath1 = "https://www.increasingly.co/Clients/optimised_multipack/js/p3ThM9_org.js?v=" + versionUpdate1;
    var scriptTag1 = document.createElement('script');
    scriptTag1.type = 'text/javascript';
    scriptTag1.src = jsFilePath1;
    document.querySelector('body').appendChild(scriptTag1);
}, 50)

function readCookie(name) {
    var nameEQ = name + "=";
    var ca = document.cookie.split(';');
    for (var i = 0; i < ca.length; i++) {
        var c = ca[i];
        while (c.charAt(0) == ' ')
            c = c.substring(1, c.length);
        if (c.indexOf(nameEQ) == 0)
            return c.substring(nameEQ.length, c.length);
    }
    return null;
}
function generate_html_tag(element, className) {
    var generateEl = document.createElement(element);
    className ? generateEl.classList.add(className) : null;
    return generateEl;
}

function generate_meta_tag(prop, value) {
    var generateMeta = document.createElement('meta');
    generateMeta.setAttribute('name', '' + prop + '');
    generateMeta.setAttribute('content', '' + value + '');
    var metaplacement = document.querySelector('head')
    metaplacement.insertBefore(generateMeta, metaplacement.childNodes[4]);
    // document.getElementsByTagName('head')[0].appendChild(generateMeta);
}

INC_COL.init = function() {
    INC_COL.methods.addVisitorID();
    INC_COL.config.duplamid = []
    INC_COL.clientConfig.offset = 0;
    INC_COL.clientConfig.slidevalue = 0;
    INC_COL.clientConfig.slidevalueTop = 0;
    INC_COL.config.dupDataObjectProducts = []
    INC_COL.config.uniqeProduct = []
    INC_COL.config.recarray = []
    INC_COL.config.pageType = INC_COL.methods.detectPageType();
    switch (INC_COL.config.pageType) {
    case "pdpcollection":
        if (INC_COL.debug)
            console.log("on pdp page");
        // INC_COL.config.recommendation = true
        setTimeout(function() {
            INC_COL.methods.irbReq_collection_bundle()
        }, 0);
        break;
    case "plpcollection":
        setTimeout(function() {
            onload_flag = true
        }, 400)
        if (INC_COL.debug)
            console.log("on plp page");
        INC_COL.methods.irbReq_collection_bundle()
        break;
    }
}
INC_COL.dataStore = {};
INC_COL.dataStore.methods = function() {
    var incDataStore = INC_COL.dataStore;
    var inccolDataStore = INC_COL.dataStore;
    var dataStoreObj = {};
    function buildDataStoreObj(bundleResponse, collection) {
        INC_COL.config.collection_combo_details = []
        INC_COL.config.dupDataObjectProducts = []

        var collection_count = bundleResponse.ComboSetCount
        if (bundleResponse.Collections[0].Products != null) {
            if (collection_count == 0) {
                irbobservload = true
                var remlo = document.querySelector('#loader_bk_inc')
                if (remlo != null) {
                    remlo.parentNode.removeChild(remlo)
                }
            }

            for (var c = 0; c < bundleResponse.Collections.length; c++) {
                var pushedmainp = false;
                var bundles = bundleResponse.Collections[c]
                if (collection == "collection") {
                    INC_COL.config.uniqueobjectproduct = []
                    INC_COL.config.dupDataObjectProducts = []
                }
                var bundleProductsArray = [];
                var pdpProductId = '';

                var collection_bundles = []
                var collection_products = []
                INC_COL.config.prod_json_respons = bundles.Products
                INC_COL.config.collectioncount = bundles.Products.length
                for (var i = 0; i < bundles.Products.length; i++) {
                    var irbProductsArray = bundles.Products[i];
                    collection_products.push(irbProductsArray["ProductId"])
                    if (irbProductsArray.length) {
                        pdpProductId = irbProductsArray[0]["ProductId"];
                        if (bundleProductsArray.indexOf(irbProductsArray[0]["ProductId"]) == -1) {
                            bundleProductsArray.push(irbProductsArray[0]["ProductId"]);
                        }
                    }
                    if (INC_COL.config.uniqueobjectproduct.indexOf(irbProductsArray.ProductId) == -1) {
                        var product = irbProductsArray;
                        product["comboId"] = bundleResponse.Collections[c].ComboId
                        product["comboImg"] = bundleResponse.Collections[c].ComboImageURL
                        product["combotitle"] = bundleResponse.Collections[c].ComboTitle
                        product["comboprdurl"] = bundleResponse.Collections[c].ComboProductURL
                        if (collection == "collection") {
                            product["comboId"] = bundles.ComboId
                        }
                        if (bundles.comboMainProductId == null) {
                            if (window.location.href.indexOf('incgs') >= 0) {
                                bundles.comboMainProductId = INC_COL.config.pdpPID
                            } else {
                                pushedmainp = true
                            }
                        }
                        INC_COL.config.uniqueobjectproduct.push(irbProductsArray.ProductId)
                        pushedmainp = true
                        if (collection == "collection") {
                            product["comboId"] = bundles.ComboId
                        }
                        //Size
                        var pAttributes = product["Attributes"] || "";
                        if (pAttributes != "" && pAttributes != null) {
                            if (pAttributes.length == 1) {
                                if (pAttributes[0].attributeCode == "Color" || pAttributes[0].attributeCode == 'colour') {
                                    pAttributes[0].attributeCode = "Color"
                                    pAttributes[0].frontEndLabel = "Color"
                                } else if (pAttributes[0].attributeCode == "size") {
                                    pAttributes[0].attributeCode = "Size"
                                    pAttributes[0].frontEndLabel = "Size"
                                } else if (pAttributes[0].attributeCode == "weight") {
                                    pAttributes[0].attributeCode = "Weight"
                                    pAttributes[0].frontEndLabel = "Weight"
                                } else {
                                    if (pAttributes[0].attributeCode == "volume") {
                                        pAttributes[0].attributeCode = "volume"
                                        pAttributes[0].frontEndLabel = "volume"
                                    }
                                }

                            } else {
                                for (var h = 0; h < pAttributes.length; h++) {
                                    if (pAttributes[h].attributeCode == "color" || pAttributes[0].attributeCode == 'colour') {
                                        pAttributes[h].attributeCode = "Color"
                                        pAttributes[h].frontEndLabel = "Color"
                                    }
                                    if (pAttributes[h].attributeCode == "size" || pAttributes[h].attributeCode == "size") {
                                        pAttributes[h].attributeCode = "Size"
                                        pAttributes[h].frontEndLabel = "Size"
                                    }
                                    if (pAttributes[h].attributeCode == "weight" || pAttributes[h].attributeCode == "Weight") {
                                        pAttributes[h].attributeCode = "Weight"
                                        pAttributes[h].frontEndLabel = "Weight"
                                    }
                                    if (pAttributes[h].frontEndLabel == "volume") {
                                        pAttributes[h].frontEndLabel = "Volume"
                                    }
                                }
                            }
                            pAttributes = attribute_listing_col(pAttributes)
                        }

                        var pAttObj = {};
                        var allsize = []
                        if (pAttributes.length == 1) {
                            if (pAttributes[0].attributeCode == "Color" || pAttributes[0].attributeCode == 'colour') {
                                pAttributes[0].attributeId = 0
                                var attr_values = pAttributes[0].attributeValues;
                                for (v = 0; v < attr_values.length; v++) {
                                    attr_values[v].optionId1 = attr_values[v].optionId;
                                    attr_values[v].optionId = 0;
                                    if (pAttributes[0].attributeCode == "Size") {
                                        allsize.push(attr_values[v].optionText)
                                    }
                                }
                            } else if (pAttributes[0].attributeCode == "Size") {
                                pAttributes[0].attributeId = 1
                                var attr_values = pAttributes[0].attributeValues;
                                for (v = 0; v < attr_values.length; v++) {
                                    attr_values[v].optionId1 = attr_values[v].optionId;
                                    attr_values[v].optionId = 1;
                                    if (pAttributes[0].attributeCode == "Size") {
                                        allsize.push(attr_values[v].optionText)
                                    }
                                }
                            }
                        } else {
                            for (t = 0; t < pAttributes.length; t++) {
                                pAttributes[t].attributeId = t
                                var attr_values = pAttributes[t].attributeValues;
                                for (v = 0; v < attr_values.length; v++) {
                                    attr_values[v].optionId1 = attr_values[v].optionId;
                                    attr_values[v].optionId = t;
                                    if (pAttributes[t].attributeCode == "Size") {
                                        allsize.push(attr_values[v].optionText)
                                    }
                                }
                            }
                        }

                        if (allsize.length > 0) {
                            for (s = 0; s < allsize.length; s++) {
                                for (t3 = 0; t3 < pAttributes.length; t3++) {
                                    if (pAttributes[t3].attributeCode == "Color" || pAttributes[0].attributeCode == 'colour') {
                                        var attr_values3 = pAttributes[t3].attributeValues;
                                        for (v3 = 0; v3 < attr_values3.length; v3++) {
                                            if (attr_values3[v3].optionText.indexOf(allsize[s]) >= 0) {
                                                attr_values3[v3].optionText = attr_values3[v3].optionText.replace(allsize[s], '')
                                            }
                                        }
                                    }
                                }
                            }
                        }
                        if (pAttributes.length) {
                            INC_COL.config.configcount = 0
                            for (var k = 0; k < pAttributes.length; k++) {
                                var pAttributesObj = pAttributes[k];

                                var pAttributesValues = pAttributesObj["attributeValues"];
                                for (var l = 0; l < pAttributesValues.length; l++) {
                                    var childProduct = pAttributesValues[l];

                                    if (childProduct["childProductId"] == null) {
                                        childProduct["childProductId"] = product["ProductId"]
                                        childProduct["childProductSku"] = product["ProductSku"];
                                        childProduct["childProductName"] = product["ProductName"];
                                        childProduct["childProductImageUrl"] = product["ImageURL"];
                                        childProduct["childProductOtherImageUrl"] = product["OtherImageList"];
                                        childProduct["childProductUrl"] = product["ProductUrl"];
                                        childProduct["childProductPrice"] = product["Price"];
                                        childProduct["childProductSpecialPrice"] = product["SpecialPrice"];
                                        childProduct["childcolProductDescription"] = product["Description"];
                                        childProduct["childInternalProductId"] = product["ProductId"]

                                        childProduct["childProductField1"] = product["Field1"]
                                        childProduct["childProductField2"] = product["Field2"]
                                        childProduct["childProductField3"] = product["Field3"]
                                        childProduct["childProductField4"] = product["Field4"]
                                        childProduct["childProductField5"] = product["Field5"]
                                        childProduct["childProductField6"] = product["Field6"]
                                    }

                                    if (childProduct["childProductImageUrl"] == "" || childProduct["childProductImageUrl"] == null) {
                                        childProduct["childProductImageUrl"] = product["ImageURL"];
                                    }
                                    if (product["Size"] != null) {
                                        childProduct["MainprodVariant"] = product["Color"].replace('ー', '') + "ー" + product["Size"].replace('ー', '');
                                    } else {
                                        childProduct["MainprodVariant"] = product["Color"];
                                    }
                                    childProduct["comboId"] = product["comboId"];
                                    childProduct["comboImg"] = product["comboImg"]
                                    childProduct["combotitle"] = product["combotitle"]

                                    childProduct["childCategoryId"] = product["CategoryId"];
                                    childProduct["childCategoryName"] = product["CategoryName"];
                                    childProduct["childcolProductDescription"] = product["Description"];
                                    childProduct["ShortDescription"] = product["ShortDescription"];
                                    childProduct["childProductImageUrlMain"] = product["ImageURL"];
                                    childProduct["childProductPriceMain"] = product["Price"];
                                    childProduct["childProductSpecialPriceMain"] = product["SpecialPrice"];
                                    childProduct["childProductNameMain"] = product["ProductName"];
                                    childProduct["childProductUrlMain"] = product["ProductUrl"];
                                    childProduct["mainSKU"] = product["ProductSku"];
                                    childProduct["ProductType"] = product["ProductType"];
                                    childProduct["childProductDescription"] = product["Description"];
                                    childProduct["childProductOtherImageUrl"] = product["OtherImageList"];
                                    childProduct["childProductField6"] = product["Field6"]

                                    var productObj = new INC_COL.classes.ProductAttObj(childProduct);

                                    productObj["bundledProductId"] = pdpProductId;
                                    productObj.mainId = product["ProductId"];
                                    productObj.bundleId = bundles.ComboId;
                                    productObj.sku = productObj.id;
                                    productObj.option[pAttributesObj["attributeId"]].id = pAttributesObj["attributeId"];
                                    productObj.option[pAttributesObj["attributeId"]].label = pAttributesObj["frontEndLabel"];
                                    productObj.option[pAttributesObj["attributeId"]].code = pAttributesObj["attributeCode"];
                                    if (!dataStoreObj.hasOwnProperty(product['ProductId'])) {
                                        dataStoreObj[product['ProductId']] = {};
                                    }
                                    if (!dataStoreObj[product['ProductId']].hasOwnProperty(productObj['id'])) {
                                        dataStoreObj[product['ProductId']][productObj['id']] = {}
                                    }
                                    pAttObj = dataStoreObj[product['ProductId']][productObj['id']];

                                    for (pAtt in productObj) {
                                        if (pAtt == "option") {
                                            if (!pAttObj.hasOwnProperty('option')) {
                                                pAttObj["option"] = {}
                                            }

                                            Object.keys(productObj[pAtt]).forEach(function(key) {
                                                pAttObj[pAtt][key] = productObj[pAtt][key];
                                            });
                                            // }
                                        } else {
                                            pAttObj[pAtt] = productObj[pAtt];
                                        }
                                    }
                                }
                            }
                        }

                        if (pAttributes.length == 0) {
                            var productObj = new INC_COL.classes.ProductObj(product);
                            productObj["bundleId"] = bundles.ComboId;
                            productObj["bundledProductId"] = pdpProductId;
                            productObj.sku = productObj.id;
                            if (!dataStoreObj.hasOwnProperty(productObj['mainId'])) {
                                dataStoreObj[productObj['mainId']] = {};
                            }

                            dataStoreObj[productObj['mainId']][productObj['id']] = {};
                            if (!!window.MSInputMethodContext && !!document.documentMode) {
                                dataStoreObj[productObj['mainId']][productObj['id']] = JSON.parse(JSON.stringify(productObj));
                            } else {
                                dataStoreObj[productObj['mainId']][productObj['id']] = Object.assign({}, productObj);
                            }
                        }
                    }
                }
                collection_bundles.push({
                    products: collection_products
                })
                INC_COL.config.collection_combo_details.push({
                    comboId: bundles.ComboId,
                    ComboImageURL: bundles.ComboImageURL,
                    ComboProductURL: bundles.ComboProductURL,
                    ComboTitle: bundles.ComboTitle,
                    collection_bundles: collection_bundles
                })

            }

            inccolDataStore.dataStoreObj = dataStoreObj;
            inccolDataStore.bundleProductsArray = bundleProductsArray;
            inccolDataStore.pdpProductId = pdpProductId;
            if (INC_COL.debug)
                console.log("DataStore");
            if (INC_COL.debug)
                console.log(inccolDataStore)
            inccolDataStore.bundleCartProducts = {};

            if (collection == "collection") {
                setTimeout(function() {
                    if (bundleResponse.ComboSetCount != 0) {
                        if (INC_COL.config.pageType == "pdpcollection") {
                            INC_COL.methods.createPDPCollectionBlock()
                        } else if (INC_COL.config.pageType == "plpcollection") {
                            INC_COL.methods.createPLPCollectionBlock()
                        }
                    }
                }, 500)
            }
        }

    }

    function getFirstProductObjByMainId(findObj) {
        var childProductObj = {};
        var productListObj = INC_COL.dataStore.dataStoreObj;
        try {
            if (productListObj != undefined) {
                childProductObj = productListObj[findObj["mainId"]][Object.keys(productListObj[findObj["mainId"]])[0]];
            }
        } catch (e) {}
        return childProductObj;
    }

    function getProductById(findObj) {
        var childProductObj = {};
        var productListObj = INC_COL.dataStore.dataStoreObj;
        if (findObj.hasOwnProperty("id")) {
            for (mainProductId in productListObj) {
                for (childProductId in productListObj[mainProductId]) {
                    if (productListObj[mainProductId][childProductId]["id"] == findObj["id"]) {
                        childProductObj = productListObj[mainProductId][childProductId];
                        break;
                    }
                }
            }
        }
        if (Object.keys(childProductObj).length == 0) {
            if (findObj.hasOwnProperty("id")) {
                for (mainProductId in productListObj) {
                    for (childProductId in productListObj[mainProductId]) {
                        if (productListObj[mainProductId][childProductId]["id"] == findObj["id"]) {
                            childProductObj = productListObj[mainProductId][childProductId];
                            break;
                        }
                    }
                }
            }
        }
        return childProductObj;
    }
    function getProductBySKU(findObj) {
        var childProductObj = {};
        var productListObj = INC_COL.dataStore.dataStoreObj;

        if (findObj.hasOwnProperty('sku')) {
            for (mainProductId in productListObj) {
                for (childProductId in productListObj[mainProductId]) {
                    if (productListObj[mainProductId][childProductId]["sku"] == findObj['sku']) {
                        childProductObj = productListObj[mainProductId][childProductId];
                        break;
                    }
                }
            }
        }
        return childProductObj;
    }
    function getUniqueCatergories() {
        var catergoriesArray = [];
        var productListObj = INC_COL.dataStore.dataStoreObj;
        var bundleProductsArray = INC_COL.dataStore.bundleProductsArray;
        bundleProductsArray.forEach(function(productId) {
            for (childProductId in productListObj[productId]) {
                var indexOfCategoryId = catergoriesArray.indexOf(productListObj[productId][childProductId]["categoryId"]);
                if (indexOfCategoryId == -1 && productListObj[productId][childProductId]["categoryId"] != INC_COL.dataStore.clientProductDealsCategory) {
                    catergoriesArray.push(productListObj[productId][childProductId]["categoryId"]);
                }
            }
        });
        return catergoriesArray;
    }
    function sorting_data(json_object, key_to_sort_by) {
        function sortByKey(a, b) {
            var x = a[key_to_sort_by];
            var y = b[key_to_sort_by];
            return ((x < y) ? -1 : ((x > y) ? 1 : 0));
        }
        json_object.sort(sortByKey);
    }
    function sortByKey(array, key) {
        return array.sort(function(a, b) {
            var x = a[key]
              , y = b[key];
            if (typeof x === 'string') {
                x = x.toLowerCase();
                y = y.toLowerCase();
                if (!isNaN(x) && !isNaN(y)) {
                    x = parseInt(x, 10);
                    y = parseInt(y, 10);
                }
            }
            return (x < y ? -1 : (x > y ? 1 : 0));
        });
    }
    function getProductColorsObj(findObj, type_of) {
        var productColorObj = {};
        var productListObj = INC_COL.dataStore.dataStoreObj;
        var productColorArrayObj = {}
        var productColorObjArray = [];
        var option_ids = ""
        var c_pid = ""
        var is_color = true;
        if (findObj.hasOwnProperty("mainId")) {
            for (mainProductId in productListObj) {
                if (mainProductId == findObj["mainId"]) {
                    for (childProductId in productListObj[mainProductId]) {
                        if (productListObj[mainProductId][childProductId]["option"]["0"] != undefined) {
                            if (productListObj[mainProductId][childProductId]["option"]["0"].code == "Color") {
                                if (productListObj[mainProductId][childProductId]["option"] != null && productListObj[mainProductId][childProductId]["option"] != undefined && productListObj[mainProductId][childProductId]["option"]["0"] != null && productListObj[mainProductId][childProductId]["option"]["0"] != undefined) {
                                    if (type_of != undefined) {
                                        var attr_bk = null;
                                        if (type_of.parentNode.parentNode.parentNode.classList.contains('inc_prd_desc_att_bk') == false) {
                                            attr_bk = type_of.parentNode.parentNode.parentNode.parentNode
                                        } else {
                                            attr_bk = type_of.parentNode.parentNode.parentNode
                                        }
                                        if (type_of.parentNode != null) {
                                            var opt_text = attr_bk.getAttribute('data-zero');
                                            var opt_size_text = attr_bk.getAttribute('data-size');
                                            if (opt_size_text == undefined) {
                                                var opt_size_text = ""
                                            }
                                        } else {
                                            var opt_text = type_of.innerText;
                                            var opt_size_text = ""
                                        }

                                        if (opt_text != "" && opt_size_text != "" && productListObj[mainProductId][childProductId].option[1] != undefined && productListObj[mainProductId][childProductId].option[2] != undefined) {
                                            if (productListObj[mainProductId][childProductId].option[1].text == opt_text && productListObj[mainProductId][childProductId].option[2].text == opt_size_text) {
                                                productColorArrayObj[productListObj[mainProductId][childProductId]["option"]["0"]["text"]] = {};
                                                productColorArrayObj[productListObj[mainProductId][childProductId]["option"]["0"]["text"]]["colorCode"] = "";
                                                productColorArrayObj[productListObj[mainProductId][childProductId]["option"]["0"]["text"]]["imgSrc"] = "";
                                                productColorArrayObj[productListObj[mainProductId][childProductId]["option"]["0"]["text"]]["titleText"] = productListObj[mainProductId][childProductId]["option"]["0"]["titleText"];
                                                productColorArrayObj[productListObj[mainProductId][childProductId]["option"]["0"]["text"]]["colorCode"] = productListObj[mainProductId][childProductId]["option"]["0"]["colorCode"];
                                                productColorArrayObj[productListObj[mainProductId][childProductId]["option"]["0"]["text"]]["imgSrc"] = productListObj[mainProductId][childProductId]["option"]["0"]["imgSrc"];
                                                productColorArrayObj[productListObj[mainProductId][childProductId]["option"]["0"]["text"]]["code"] = productListObj[mainProductId][childProductId]["option"]["0"]["code"];
                                                productColorArrayObj[productListObj[mainProductId][childProductId]["option"]["0"]["text"]]["cpid"] = productListObj[mainProductId][childProductId]["option"]["0"]["cpid"];
                                            }
                                        } else if (opt_text != "" && productListObj[mainProductId][childProductId].option[1] != undefined) {
                                            if (productListObj[mainProductId][childProductId].option[1].text == opt_text) {
                                                productColorArrayObj[productListObj[mainProductId][childProductId]["option"]["0"]["text"]] = {};
                                                productColorArrayObj[productListObj[mainProductId][childProductId]["option"]["0"]["text"]]["colorCode"] = "";
                                                productColorArrayObj[productListObj[mainProductId][childProductId]["option"]["0"]["text"]]["imgSrc"] = "";
                                                productColorArrayObj[productListObj[mainProductId][childProductId]["option"]["0"]["text"]]["titleText"] = productListObj[mainProductId][childProductId]["option"]["0"]["titleText"];
                                                productColorArrayObj[productListObj[mainProductId][childProductId]["option"]["0"]["text"]]["colorCode"] = productListObj[mainProductId][childProductId]["option"]["0"]["colorCode"];
                                                productColorArrayObj[productListObj[mainProductId][childProductId]["option"]["0"]["text"]]["imgSrc"] = productListObj[mainProductId][childProductId]["option"]["0"]["imgSrc"];
                                                productColorArrayObj[productListObj[mainProductId][childProductId]["option"]["0"]["text"]]["code"] = productListObj[mainProductId][childProductId]["option"]["0"]["code"];
                                                productColorArrayObj[productListObj[mainProductId][childProductId]["option"]["0"]["text"]]["cpid"] = productListObj[mainProductId][childProductId]["option"]["0"]["cpid"];
                                            }
                                        } else {
                                            productColorArrayObj[productListObj[mainProductId][childProductId]["option"]["0"]["text"]] = {};
                                            productColorArrayObj[productListObj[mainProductId][childProductId]["option"]["0"]["text"]]["colorCode"] = "";
                                            productColorArrayObj[productListObj[mainProductId][childProductId]["option"]["0"]["text"]]["imgSrc"] = "";
                                            productColorArrayObj[productListObj[mainProductId][childProductId]["option"]["0"]["text"]]["titleText"] = productListObj[mainProductId][childProductId]["option"]["0"]["titleText"];
                                            productColorArrayObj[productListObj[mainProductId][childProductId]["option"]["0"]["text"]]["colorCode"] = productListObj[mainProductId][childProductId]["option"]["0"]["colorCode"];
                                            productColorArrayObj[productListObj[mainProductId][childProductId]["option"]["0"]["text"]]["imgSrc"] = productListObj[mainProductId][childProductId]["option"]["0"]["imgSrc"];
                                            productColorArrayObj[productListObj[mainProductId][childProductId]["option"]["0"]["text"]]["code"] = productListObj[mainProductId][childProductId]["option"]["0"]["code"];
                                            productColorArrayObj[productListObj[mainProductId][childProductId]["option"]["0"]["text"]]["cpid"] = productListObj[mainProductId][childProductId]["option"]["0"]["cpid"];
                                        }
                                    } else {
                                        productColorArrayObj[productListObj[mainProductId][childProductId]["option"]["0"]["text"]] = {};
                                        productColorArrayObj[productListObj[mainProductId][childProductId]["option"]["0"]["text"]]["colorCode"] = "";
                                        productColorArrayObj[productListObj[mainProductId][childProductId]["option"]["0"]["text"]]["imgSrc"] = "";
                                        productColorArrayObj[productListObj[mainProductId][childProductId]["option"]["0"]["text"]]["titleText"] = productListObj[mainProductId][childProductId]["option"]["0"]["titleText"];
                                        productColorArrayObj[productListObj[mainProductId][childProductId]["option"]["0"]["text"]]["colorCode"] = productListObj[mainProductId][childProductId]["option"]["0"]["colorCode"];
                                        productColorArrayObj[productListObj[mainProductId][childProductId]["option"]["0"]["text"]]["imgSrc"] = productListObj[mainProductId][childProductId]["option"]["0"]["imgSrc"];
                                        productColorArrayObj[productListObj[mainProductId][childProductId]["option"]["0"]["text"]]["code"] = productListObj[mainProductId][childProductId]["option"]["0"]["code"];
                                        productColorArrayObj[productListObj[mainProductId][childProductId]["option"]["0"]["text"]]["cpid"] = productListObj[mainProductId][childProductId]["option"]["0"]["cpid"];
                                    }

                                }
                            } else {
                                is_color = false;
                            }
                        }
                    }
                }
            }
        }
        Object.keys(productColorArrayObj).forEach(function(colorText) {
            var colorObj = {}
            colorObj["text"] = colorText;
            // colorObj["imgSrc"] = productColorArrayObj[colorText];
            colorObj["colorCode"] = productColorArrayObj[colorText]["colorCode"];
            colorObj["imgSrc"] = productColorArrayObj[colorText]["imgSrc"];
            colorObj["titleText"] = productColorArrayObj[colorText]["titleText"];
            colorObj["code"] = productColorArrayObj[colorText]["code"];
            colorObj["cpid"] = productColorArrayObj[colorText]["cpid"];
            productColorObjArray.push(colorObj);
        });
        if (type_of == "size") {
            productColorObj["sizeArray"] = productColorObjArray;
        } else if (type_of == "zero") {
            productColorObj["att0Array"] = productColorObjArray;
        } else if (type_of == "third") {
            productColorObj["att3Array"] = productColorObjArray;
        } else {
            productColorObj["colorArray"] = productColorObjArray;
        }
        return productColorObj;
    }
    function getProductSizesObj(findObj, type_of) {
        var productSizeObj = {};
        var productListObj = INC_COL.dataStore.dataStoreObj;
        var productSizesArrayObj = {};
        var productSizesObjArray = [];
        var sizesArray = ["S", "M", "L", "XL", "XX", "XXL"];
        var attr_code = "";
        var c_pid = "";
        var prc = "";
        if (findObj.hasOwnProperty("mainId")) {
            for (mainProductId in productListObj) {
                if (mainProductId == findObj["mainId"]) {
                    for (childProductId in productListObj[mainProductId]) {
                        if (type_of != undefined) {
                            var attr_bk = null;
                            if (type_of.parentNode.parentNode.parentNode.classList.contains('inc_prd_desc_att_bk') == false) {
                                attr_bk = type_of.parentNode.parentNode.parentNode.parentNode
                            } else {
                                attr_bk = type_of.parentNode.parentNode.parentNode
                            }
                            var opt_text = attr_bk.getAttribute('data-zero');
                            var opt_size_text = attr_bk.getAttribute('data-color');
                            // var opt_color_text=attr_bk.getAttribute('data-color');

                            if (opt_size_text == undefined) {
                                var opt_size_text = ""
                            }
                            if (opt_text == undefined) {
                                var opt_text = ""
                            }
                            if (opt_color_text == undefined) {
                                var opt_color_text = ""
                            }
                            if (opt_text != "" && productListObj[mainProductId][childProductId].option[1] != undefined) {
                                if (opt_text != "" && opt_size_text != "" && productListObj[mainProductId][childProductId].option[0]) {
                                    if (productListObj[mainProductId][childProductId].option[1].text == opt_text && productListObj[mainProductId][childProductId].option[0].text == opt_size_text) {
                                        if (productListObj[mainProductId][childProductId]["option"] != null && productListObj[mainProductId][childProductId]["option"] != undefined && productListObj[mainProductId][childProductId]["option"]["2"] != null && productListObj[mainProductId][childProductId]["option"]["2"] != undefined) {
                                            productSizesArrayObj[productListObj[mainProductId][childProductId]["option"]["2"]["text"]] = productListObj[mainProductId][childProductId]["option"]["2"]["text"];
                                            attr_code = productListObj[mainProductId][childProductId]["option"]["2"]["code"];
                                            c_pid = productListObj[mainProductId][childProductId]["option"]["2"]["cpid"];
                                            prc = productListObj[mainProductId][childProductId]["option"]["2"]["activePriceChild"];
                                        }
                                    }
                                } else {
                                    if (productListObj[mainProductId][childProductId].option[1].text == opt_text) {
                                        if (productListObj[mainProductId][childProductId]["option"] != null && productListObj[mainProductId][childProductId]["option"] != undefined && productListObj[mainProductId][childProductId]["option"]["2"] != null && productListObj[mainProductId][childProductId]["option"]["2"] != undefined) {
                                            productSizesArrayObj[productListObj[mainProductId][childProductId]["option"]["2"]["text"]] = productListObj[mainProductId][childProductId]["option"]["2"]["text"];
                                            attr_code = productListObj[mainProductId][childProductId]["option"]["2"]["code"];
                                            c_pid = productListObj[mainProductId][childProductId]["option"]["2"]["cpid"];
                                            prc = productListObj[mainProductId][childProductId]["option"]["2"]["activePriceChild"];
                                        }
                                    }
                                }
                            } else if (productListObj[mainProductId][childProductId]["option"] != null && productListObj[mainProductId][childProductId]["option"] != undefined && productListObj[mainProductId][childProductId]["option"]["2"] != null && productListObj[mainProductId][childProductId]["option"]["2"] != undefined) {
                                productSizesArrayObj[productListObj[mainProductId][childProductId]["option"]["2"]["text"]] = productListObj[mainProductId][childProductId]["option"]["2"]["text"];
                                attr_code = productListObj[mainProductId][childProductId]["option"]["2"]["code"];
                                c_pid = productListObj[mainProductId][childProductId]["option"]["2"]["cpid"];
                                prc = productListObj[mainProductId][childProductId]["option"]["2"]["activePriceChild"];
                            }
                        } else if (productListObj[mainProductId][childProductId]["option"] != null && productListObj[mainProductId][childProductId]["option"] != undefined && productListObj[mainProductId][childProductId]["option"]["2"] != null && productListObj[mainProductId][childProductId]["option"]["2"] != undefined) {
                            productSizesArrayObj[productListObj[mainProductId][childProductId]["option"]["2"]["text"]] = productListObj[mainProductId][childProductId]["option"]["2"]["text"];
                            attr_code = productListObj[mainProductId][childProductId]["option"]["2"]["code"];
                            c_pid = productListObj[mainProductId][childProductId]["option"]["2"]["cpid"];
                            prc = productListObj[mainProductId][childProductId]["option"]["2"]["activePriceChild"];
                        }
                    }

                }
            }
        }

        Object.keys(productSizesArrayObj).forEach(function(sizeText) {
            var sizeObj = {};
            sizeObj["text"] = sizeText;
            sizeObj["code"] = attr_code;
            sizeObj["cpid"] = c_pid;
            sizeObj["prc"] = prc;
            productSizesObjArray.push(sizeObj);
        });
        productSizeObj["sizeArray"] = productSizesObjArray.sort(function(a, b) {
            return a["text"].split("-")[0].trim() - b["text"].split("-")[0].trim()
        });
        productSizeObj["sizeArray"] = productSizesObjArray.sort();
        productSizeObj["sizeArray"] = productSizesObjArray.sort(function(a, b) {
            return sizesArray.indexOf(a["text"]) - sizesArray.indexOf(b["text"])
        });

        return productSizeObj;
    }
    function getProductopt0Obj(findObj, type_of) {
        var product0Obj = {};
        var productListObj = INC_COL.dataStore.dataStoreObj;
        var product0ArrayObj = {}
        var product0ObjArray = [];

        if (findObj.hasOwnProperty("mainId")) {
            for (mainProductId in productListObj) {
                if (mainProductId == findObj["mainId"]) {
                    for (childProductId in productListObj[mainProductId]) {

                        if (productListObj[mainProductId][childProductId]["option"] != null && productListObj[mainProductId][childProductId]["option"] != undefined && productListObj[mainProductId][childProductId]["option"]["1"] != null && productListObj[mainProductId][childProductId]["option"]["1"] != undefined) {

                            var attr_main = true;
                            var first_attr_acodec = ["Connectivity", "Number of SIM", "Device"];
                            if (productListObj[mainProductId][childProductId]["option"][0] != undefined || productListObj[mainProductId][childProductId]["option"][1].code != undefined) {
                                if (first_attr_acodec.indexOf(productListObj[mainProductId][childProductId]["option"][0]) == -1 && first_attr_acodec.indexOf(productListObj[mainProductId][childProductId]["option"][1].code) == -1) {
                                    attr_main = false;
                                }
                            }
                            if (attr_main == true) {
                                product0ArrayObj[productListObj[mainProductId][childProductId]["option"]["1"]["text"]] = {};
                                product0ArrayObj[productListObj[mainProductId][childProductId]["option"]["1"]["text"]]["colorCode"] = "";
                                product0ArrayObj[productListObj[mainProductId][childProductId]["option"]["1"]["text"]]["imgSrc"] = "";
                                product0ArrayObj[productListObj[mainProductId][childProductId]["option"]["1"]["text"]]["titleText"] = productListObj[mainProductId][childProductId]["option"]["1"]["titleText"];

                                product0ArrayObj[productListObj[mainProductId][childProductId]["option"]["1"]["text"]]["imgSrc"] = productListObj[mainProductId][childProductId]["option"]["1"]["imgSrc"];
                                product0ArrayObj[productListObj[mainProductId][childProductId]["option"]["1"]["text"]]["code"] = productListObj[mainProductId][childProductId]["option"]["1"]["code"];
                                product0ArrayObj[productListObj[mainProductId][childProductId]["option"]["1"]["text"]]["cpid"] = productListObj[mainProductId][childProductId]["option"]["1"]["cpid"];
                                product0ArrayObj[productListObj[mainProductId][childProductId]["option"]["1"]["text"]]["prc"] = productListObj[mainProductId][childProductId]["option"]["1"]["activePriceChild"];
                            } else {
                                if (findObj.colorText != undefined) {
                                    if (productListObj[mainProductId][childProductId].option["0"].text.trim().toLocaleLowerCase() == findObj.colorText.trim().toLocaleLowerCase()) {
                                        product0ArrayObj[productListObj[mainProductId][childProductId]["option"]["1"]["text"]] = {};
                                        product0ArrayObj[productListObj[mainProductId][childProductId]["option"]["1"]["text"]]["colorCode"] = "";
                                        product0ArrayObj[productListObj[mainProductId][childProductId]["option"]["1"]["text"]]["imgSrc"] = "";
                                        product0ArrayObj[productListObj[mainProductId][childProductId]["option"]["1"]["text"]]["titleText"] = productListObj[mainProductId][childProductId]["option"]["1"]["titleText"];
                                        product0ArrayObj[productListObj[mainProductId][childProductId]["option"]["1"]["text"]]["cpid"] = productListObj[mainProductId][childProductId]["option"]["1"]["cpid"];
                                        product0ArrayObj[productListObj[mainProductId][childProductId]["option"]["1"]["text"]]["imgSrc"] = productListObj[mainProductId][childProductId]["option"]["1"]["imgSrc"];
                                        product0ArrayObj[productListObj[mainProductId][childProductId]["option"]["1"]["text"]]["code"] = productListObj[mainProductId][childProductId]["option"]["1"]["code"];
                                        product0ArrayObj[productListObj[mainProductId][childProductId]["option"]["1"]["text"]]["prc"] = productListObj[mainProductId][childProductId]["option"]["1"]["activePriceChild"];
                                    }
                                } else {
                                    product0ArrayObj[productListObj[mainProductId][childProductId]["option"]["1"]["text"]] = {};
                                    product0ArrayObj[productListObj[mainProductId][childProductId]["option"]["1"]["text"]]["colorCode"] = "";
                                    product0ArrayObj[productListObj[mainProductId][childProductId]["option"]["1"]["text"]]["imgSrc"] = "";
                                    product0ArrayObj[productListObj[mainProductId][childProductId]["option"]["1"]["text"]]["titleText"] = productListObj[mainProductId][childProductId]["option"]["1"]["titleText"];
                                    product0ArrayObj[productListObj[mainProductId][childProductId]["option"]["1"]["text"]]["cpid"] = productListObj[mainProductId][childProductId]["option"]["1"]["cpid"];
                                    product0ArrayObj[productListObj[mainProductId][childProductId]["option"]["1"]["text"]]["imgSrc"] = productListObj[mainProductId][childProductId]["option"]["1"]["imgSrc"];
                                    product0ArrayObj[productListObj[mainProductId][childProductId]["option"]["1"]["text"]]["code"] = productListObj[mainProductId][childProductId]["option"]["1"]["code"];
                                    product0ArrayObj[productListObj[mainProductId][childProductId]["option"]["1"]["text"]]["prc"] = productListObj[mainProductId][childProductId]["option"]["1"]["activePriceChild"];
                                }
                            }
                        }
                    }
                }
            }
        }

        Object.keys(product0ArrayObj).forEach(function(colorText) {
            var attr0Obj = {}
            attr0Obj["text"] = colorText;
            attr0Obj["text1"] = colorText.replace('g', '').replace('l', '').replace('k', '');
            attr0Obj["imgSrc"] = product0ArrayObj[colorText]["imgSrc"];
            attr0Obj["titleText"] = product0ArrayObj[colorText]["titleText"];
            attr0Obj["code"] = product0ArrayObj[colorText]["code"];
            attr0Obj["cpid"] = product0ArrayObj[colorText]["cpid"];
            attr0Obj["prc"] = product0ArrayObj[colorText]["prc"];
            product0ObjArray.push(attr0Obj);
        });

        product0Obj["att0Array"] = product0ObjArray;
        product0Obj["att0Array"] = product0ObjArray.sort(function(a, b) {
            return a["text1"].split("-")[0].trim() - b["text1"].split("-")[0].trim()
        });
        return product0Obj;
    }
    function getProductopt3Obj(findObj, type_of) {
        var product3Obj = {};
        var productListObj = INC_COL.dataStore.dataStoreObj;
        var productColorArrayObj = {}
        var product3ObjArray = [];

        if (findObj.hasOwnProperty("mainId")) {
            for (mainProductId in productListObj) {
                if (mainProductId == findObj["mainId"]) {
                    for (childProductId in productListObj[mainProductId]) {

                        if (productListObj[mainProductId][childProductId]["option"] != null && productListObj[mainProductId][childProductId]["option"] != undefined && productListObj[mainProductId][childProductId]["option"]["3"] != null && productListObj[mainProductId][childProductId]["option"]["3"] != undefined) {
                            if (type_of != undefined) {
                                var attr_bk = null;
                                if (elAttBlock = "elAttBlock") {
                                    attr_bk = type_of
                                } else if (type_of.parentNode.parentNode != null) {
                                    if (type_of.parentNode.parentNode.parentNode.classList.contains('inc_prd_desc_att_bk') == false) {
                                        attr_bk = type_of.parentNode.parentNode.parentNode.parentNode
                                    } else {
                                        attr_bk = type_of.parentNode.parentNode.parentNode
                                    }
                                } else {
                                    attr_bk = type_of.parentNode.parentNode
                                }
                                if (type_of.parentNode.parentNode.parentNode.classList.contains('inc_prd_desc_att_bk') == true) {
                                    attr_bk = type_of.parentNode.parentNode.parentNode
                                }
                                if (type_of.parentNode.parentNode.parentNode.parentNode.classList.contains('inc_prd_desc_att_bk') == true) {
                                    attr_bk = type_of.parentNode.parentNode.parentNode.parentNode
                                }
                                var opt_text = attr_bk.getAttribute('data-zero');
                                var opt_size_text = attr_bk.getAttribute('data-size');
                                var opt_color_text = attr_bk.getAttribute('data-color');

                                if (opt_size_text == undefined) {
                                    var opt_size_text = ""
                                }
                                if (opt_color_text == undefined) {
                                    var opt_color_text = ""
                                }
                                if (opt_text != "" && opt_size_text != "" && opt_color_text != "") {
                                    if (productListObj[mainProductId][childProductId].option[1] != undefined && productListObj[mainProductId][childProductId].option[2] != undefined && productListObj[mainProductId][childProductId].option[0] != undefined) {
                                        if (productListObj[mainProductId][childProductId].option[1].text == opt_text && productListObj[mainProductId][childProductId].option[2].text == opt_size_text && productListObj[mainProductId][childProductId].option[0].text == opt_color_text) {
                                            productColorArrayObj[productListObj[mainProductId][childProductId]["option"]["3"]["text"]] = {};
                                            productColorArrayObj[productListObj[mainProductId][childProductId]["option"]["3"]["text"]]["colorCode"] = "";
                                            productColorArrayObj[productListObj[mainProductId][childProductId]["option"]["3"]["text"]]["imgSrc"] = "";
                                            productColorArrayObj[productListObj[mainProductId][childProductId]["option"]["3"]["text"]]["titleText"] = productListObj[mainProductId][childProductId]["option"]["3"]["titleText"];

                                            productColorArrayObj[productListObj[mainProductId][childProductId]["option"]["3"]["text"]]["imgSrc"] = productListObj[mainProductId][childProductId]["option"]["3"]["imgSrc"];
                                            productColorArrayObj[productListObj[mainProductId][childProductId]["option"]["3"]["text"]]["code"] = productListObj[mainProductId][childProductId]["option"]["3"]["code"];
                                            productColorArrayObj[productListObj[mainProductId][childProductId]["option"]["3"]["text"]]["cpid"] = productListObj[mainProductId][childProductId]["option"]["3"]["cpid"];
                                            productColorArrayObj[productListObj[mainProductId][childProductId]["option"]["3"]["text"]]["prc"] = productListObj[mainProductId][childProductId]["option"]["3"]["activePriceChild"];
                                        }
                                    }
                                } else {
                                    productColorArrayObj[productListObj[mainProductId][childProductId]["option"]["3"]["text"]] = {};
                                    productColorArrayObj[productListObj[mainProductId][childProductId]["option"]["3"]["text"]]["colorCode"] = "";
                                    productColorArrayObj[productListObj[mainProductId][childProductId]["option"]["3"]["text"]]["imgSrc"] = "";
                                    productColorArrayObj[productListObj[mainProductId][childProductId]["option"]["3"]["text"]]["titleText"] = productListObj[mainProductId][childProductId]["option"]["3"]["titleText"];

                                    productColorArrayObj[productListObj[mainProductId][childProductId]["option"]["3"]["text"]]["imgSrc"] = productListObj[mainProductId][childProductId]["option"]["3"]["imgSrc"];
                                    productColorArrayObj[productListObj[mainProductId][childProductId]["option"]["3"]["text"]]["code"] = productListObj[mainProductId][childProductId]["option"]["3"]["code"];
                                    productColorArrayObj[productListObj[mainProductId][childProductId]["option"]["3"]["text"]]["cpid"] = productListObj[mainProductId][childProductId]["option"]["3"]["cpid"];
                                    productColorArrayObj[productListObj[mainProductId][childProductId]["option"]["3"]["text"]]["prc"] = productListObj[mainProductId][childProductId]["option"]["3"]["activePriceChild"];
                                }
                            } else {
                                productColorArrayObj[productListObj[mainProductId][childProductId]["option"]["3"]["text"]] = {};
                                productColorArrayObj[productListObj[mainProductId][childProductId]["option"]["3"]["text"]]["colorCode"] = "";
                                productColorArrayObj[productListObj[mainProductId][childProductId]["option"]["3"]["text"]]["imgSrc"] = "";
                                productColorArrayObj[productListObj[mainProductId][childProductId]["option"]["3"]["text"]]["titleText"] = productListObj[mainProductId][childProductId]["option"]["3"]["titleText"];

                                productColorArrayObj[productListObj[mainProductId][childProductId]["option"]["3"]["text"]]["imgSrc"] = productListObj[mainProductId][childProductId]["option"]["3"]["imgSrc"];
                                productColorArrayObj[productListObj[mainProductId][childProductId]["option"]["3"]["text"]]["code"] = productListObj[mainProductId][childProductId]["option"]["3"]["code"];
                                productColorArrayObj[productListObj[mainProductId][childProductId]["option"]["3"]["text"]]["cpid"] = productListObj[mainProductId][childProductId]["option"]["3"]["cpid"];
                                productColorArrayObj[productListObj[mainProductId][childProductId]["option"]["3"]["text"]]["prc"] = productListObj[mainProductId][childProductId]["option"]["3"]["activePriceChild"];
                            }
                        }
                    }
                }
            }
        }

        Object.keys(productColorArrayObj).forEach(function(colorText) {
            var attr3Obj = {}
            attr3Obj["text"] = colorText;
            attr3Obj["imgSrc"] = productColorArrayObj[colorText]["imgSrc"];
            attr3Obj["titleText"] = productColorArrayObj[colorText]["titleText"];
            attr3Obj["code"] = productColorArrayObj[colorText]["code"];
            attr3Obj["cpid"] = productColorArrayObj[colorText]["cpid"];
            attr3Obj["prc"] = productColorArrayObj[colorText]["prc"];
            product3ObjArray.push(attr3Obj);
        });

        product3Obj["att3Array"] = product3ObjArray;

        return product3Obj;
    }
    function getProductByAtt(findObj) {
        var childProductObj = {};
        var productListObj = INC_COL.dataStore.dataStoreObj;
        // if(findObj.mainId != undefined && productListObj != undefined){
        //     var mainProductListObj = productListObj[findObj.mainId];
        // }else{
        //     var mainProductListObj = ""
        // }
        var mainProductListObj = productListObj[findObj.mainId];
        for (childProductId in mainProductListObj) {
            if (findObj.zeroText != "" && findObj.sizeText != "" && findObj.colorText != "" && findObj.thirdText != "" && mainProductListObj[childProductId]["option"]["0"] != undefined && mainProductListObj[childProductId]["option"]["1"] != undefined && mainProductListObj[childProductId]["option"]["2"] != undefined && mainProductListObj[childProductId]["option"]["3"] != undefined) {
                if (findObj.colorText == mainProductListObj[childProductId]["option"]["0"].text && findObj.zeroText == mainProductListObj[childProductId]["option"]["1"].text && findObj.sizeText == mainProductListObj[childProductId]["option"]["2"].text && findObj.thirdText == mainProductListObj[childProductId]["option"]["3"].text) {
                    childProductObj = mainProductListObj[childProductId];
                    // return childProductObj;
                }
            } else if (findObj.zeroText != "" && findObj.sizeText != "" && findObj.colorText != "" && mainProductListObj[childProductId]["option"]["0"] != undefined && mainProductListObj[childProductId]["option"]["1"] != undefined && mainProductListObj[childProductId]["option"]["2"] != undefined) {
                if (findObj.colorText == mainProductListObj[childProductId]["option"]["0"].text && findObj.zeroText == mainProductListObj[childProductId]["option"]["1"].text && findObj.sizeText == mainProductListObj[childProductId]["option"]["2"].text) {
                    childProductObj = mainProductListObj[childProductId];
                    // return childProductObj;
                }
            } else if (findObj.zeroText != "" && findObj.colorText != "" && mainProductListObj[childProductId]["option"]["0"] != undefined && mainProductListObj[childProductId]["option"]["1"] != undefined) {
                if (findObj.colorText == mainProductListObj[childProductId]["option"]["0"].text && findObj.zeroText == mainProductListObj[childProductId]["option"]["1"].text) {
                    childProductObj = mainProductListObj[childProductId];
                    // return childProductObj;
                }
            } else if (findObj.zeroText == "" && findObj.sizeText == "" && findObj.thirdText == "" && findObj.colorText != "" && mainProductListObj[childProductId]["option"]["0"] != undefined && mainProductListObj[childProductId]["option"]["1"] != undefined) {
                if (findObj.colorText == mainProductListObj[childProductId]["option"]["0"].text) {
                    childProductObj = mainProductListObj[childProductId];
                    // return childProductObj;
                }
            } else if (findObj.zeroText != "" && findObj.sizeText == "" && findObj.thirdText == "" && findObj.colorText == "" && mainProductListObj[childProductId]["option"]["1"] != undefined) {
                if (findObj.zeroText == mainProductListObj[childProductId]["option"]["1"].text) {
                    childProductObj = mainProductListObj[childProductId];
                    // return childProductObj;
                }
            } else if (findObj.zeroText == "" && findObj.sizeText != "" && findObj.thirdText == "" && findObj.colorText == "" && mainProductListObj[childProductId]["option"]["2"] != undefined) {
                if (findObj.sizeText == mainProductListObj[childProductId]["option"]["2"].text) {
                    childProductObj = mainProductListObj[childProductId];
                    // return childProductObj;
                }
            } else if (findObj.thirdText != "" && findObj.sizeText == "" && findObj.colorText == "" && mainProductListObj[childProductId]["option"]["3"] != undefined) {
                if (findObj.thirdText == mainProductListObj[childProductId]["option"]["3"].text) {
                    childProductObj = mainProductListObj[childProductId];
                    // return childProductObj;
                }
            } else if (mainProductListObj[childProductId]["option"] != null && mainProductListObj[childProductId]["option"] != undefined && mainProductListObj[childProductId]["option"]["0"] != null && mainProductListObj[childProductId]["option"]["0"] != undefined && (findObj.colorText == mainProductListObj[childProductId]["option"]["0"].text)) {
                childProductObj = mainProductListObj[childProductId];
                // return childProductObj;

            } else if (mainProductListObj[childProductId]["option"] != null && mainProductListObj[childProductId]["option"] != undefined && mainProductListObj[childProductId]["option"]["1"] != null && mainProductListObj[childProductId]["option"]["1"] != undefined && (findObj.sizeText == mainProductListObj[childProductId]["option"]["1"].text)) {
                childProductObj = mainProductListObj[childProductId];
                // return childProductObj;

            }
        }
        return childProductObj;
    }

    return {
        buildDataStoreObj: buildDataStoreObj,
        getFirstProductObjByMainId: getFirstProductObjByMainId,
        getProductById: getProductById,
        getProductBySKU: getProductBySKU,
        getUniqueCatergories: getUniqueCatergories,
        getProductColorsObj: getProductColorsObj,
        getProductSizesObj: getProductSizesObj,
        getProductopt3Obj: getProductopt3Obj,
        getProductopt0Obj: getProductopt0Obj,
        getProductByAtt: getProductByAtt
    }
}

INC_COL.classes = {};
INC_COL.classes.ProductObj = function(product) {

    this.bundleId = "";
    this.id = ((product != null) && (product != undefined)) ? product["ProductId"] : "";
    this.sku = ((product != null) && (product != undefined)) ? product["ProductSku"] : "";
    this.mainsku = ((product != null) && (product != undefined)) ? product["ProductSku"] : "";
    this.comboId = ((product != null) && (product != undefined)) ? product["comboId"] : "";
    this.childsku = ((product != null) && (product != undefined)) ? product["ProductSku"] : "";
    this.name = ((product != null) && (product != undefined)) ? product["ProductName"] : "";
    this.url = product["ProductUrl"]
    this.comboimg = product["comboImg"]
    this.combotitle = product["combotitle"]
    this.combourl = product["comboprdurl"]
    this.comboId = ((product != null) && (product != undefined)) ? product["comboId"] : "";
    this.imageURL = product["ImageURL"].replace('pngg', 'png')
    this.regularPrice = ((product != null) && (product != undefined)) ? product["Price"] : "";
    this.activePrice = ((product != null) && (product != undefined)) ? ((product["SpecialPrice"] != null) ? product["SpecialPrice"] : product["Price"]) : "";

    if (/Android|webOS|iPhone|iPad|iPod|BlackBerry|IEMobile|Opera Mini/i.test(navigator.userAgent)) {
        if (product["OtherImageList"] != null) {
            this.otherImageList = ((product != null) && (product != undefined)) ? product["OtherImageList"] : [];
            if (this.otherImageList.indexOf(product["comboImg"]) == -1) {
                this.otherImageList.unshift(product["comboImg"])
            }
        } else {
            this.otherImageList = []
            if (this.otherImageList.indexOf(product["comboImg"]) == -1) {
                this.otherImageList.push(product["comboImg"]);
                this.otherImageList.push(product["ImageURL"])
            }
        }
    } else {
        if (product["OtherImageList"] != null) {
            this.otherImageList = ((product != null) && (product != undefined)) ? product["OtherImageList"] : [];
        } else {
            this.otherImageList = []
            this.otherImageList.push(product["ImageURL"]);
        }
    }
    this.size = ((product != null) && (product != undefined)) ? ((product["Size"] != null) ? product["Size"] : "") : "";
    this.option = {};
    this.mainId = ((product != null) && (product != undefined)) ? product["ProductId"] : "";
    this.categoryName = ((product != null) && (product != undefined)) ? product["CategoryName"] : "";
    this.categoryId = ((product != null) && (product != undefined)) ? product["CategoryId"] : "";
    this.description = ((product != null) && (product != undefined)) ? product["Description"] : "";
    this.shortDescription = ((product != null) && (product != undefined)) ? product["ShortDescription"] : "";
    this.internalCategoryId = ((product != null) && (product != undefined)) ? product["Field1"] : "";

    this.ratingsCount = ((product != null) && (product != undefined)) ? product["Field6"] : "";
    this.reviewsCount = ((product != null) && (product != undefined)) ? product["Field3"] : "";
    this.Field1 = ((product != null) && (product != undefined)) ? product["Field3"] : "";
    if (product["PromotionalMessage"] != null) {
        this.PromotionalMessage = product["PromotionalMessage"];
    } else {
        this.PromotionalMessage = ""
    }
    if (product["ProductLevelDiscountMessage"] != null) {
        this.ProductLevelDiscountMessage = product["ProductLevelDiscountMessage"]
    } else {
        this.ProductLevelDiscountMessage = ""
    }
    this.skinType = ((product != null) && (product != undefined)) ? product["Field3"] : "";
    this.underTone = ((product != null) && (product != undefined)) ? product["Field4"] : "";
    this.finish = ((product != null) && (product != undefined)) ? product["Field5"] : "";
    this.coverage = ((product != null) && (product != undefined)) ? product["Field6"] : "";

    this.ProductType = ((product != null) && (product != undefined)) ? product["ProductType"] : "";
    this.regularPriceMain = ((product != null) && (product != undefined)) ? product["Price"] : "";

    this.activePriceMain = ((product != null) && (product != undefined)) ? ((product["SpecialPrice"] != null) ? product["SpecialPrice"] : product["Price"]) : "";

    this.nameMain = ((product != null) && (product != undefined)) ? ((INC_COL.config.language == "en") ? product["ProductName"] : product["ProductName"]) : "";
    this.imageURLMain = ((product != null) && (product != undefined)) ? product["ImageURL"].replace('pngg', 'png') : "";
    // this.urlMain = ((product != null) && (product != undefined)) ? product["ProductUrl"] : "";
    if (window.location.href.indexOf('m.e.clinique.uk.uk.stage.emea.elcdev.net') >= 0) {
        this.urlMain = product["ProductUrl"].replace('www.clinique.co.uk', 'm.e.clinique.uk.uk.stage.emea.elcdev.net')
    } else if (window.location.href.indexOf('www.m.clinique.co.uk') >= 0) {
        this.urlMain = product["ProductUrl"].replace('www.clinique.co.uk', 'www.m.clinique.co.uk')
    } else if (window.location.href.indexOf('e.clinique.uk.uk.stage.emea.elcdev.net') >= 0) {
        this.urlMain = product["ProductUrl"].replace('www.clinique.co.uk', 'e.clinique.uk.uk.stage.emea.elcdev.net')
    } else {
        this.urlMain = product["ProductUrl"]
    }

}
INC_COL.classes.ProductAttObj = function(product) {
    this.bundleId = "";
    this.id = ((product != null) && (product != undefined)) ? product["childProductId"] : "";
    this.sku = ((product != null) && (product != undefined)) ? product["childProductSku"] : "";
    this.mainsku = ((product != null) && (product != undefined)) ? product["mainSKU"] : "";
    this.comboId = ((product != null) && (product != undefined)) ? product["comboId"] : "";
    this.childsku = ((product != null) && (product != undefined)) ? product["childProductSku"] : "";
    this.name = ((product != null) && (product != undefined)) ? ((INC_COL.config.language == "en") ? product["childProductName"] : product["childProductName"]) : '';
    this.Field1 = ((product != null) && (product != undefined)) ? product["childProductField3"] : "";
    this.url = product["childProductUrl"]
    this.imageURL = product["childProductImageUrl"].replace('pngg', 'png')
    this.regularPrice = ((product != null) && (product != undefined)) ? product["childProductPrice"] : "";
    this.activePrice = ((product != null) && (product != undefined)) ? ((product["childProductSpecialPrice"] != null) ? product["childProductSpecialPrice"] : product["childProductPrice"]) : "";

    if (product["promotionalMessage"] != null) {
        this.PromotionalMessage = product["promotionalMessage"];
    } else {
        this.PromotionalMessage = ""
    }
    if (product["productLevelDiscountMessage"] != null) {
        this.ProductLevelDiscountMessage = product["productLevelDiscountMessage"]
    } else {
        this.ProductLevelDiscountMessage = ""
    }
    if (/Android|webOS|iPhone|iPad|iPod|BlackBerry|IEMobile|Opera Mini/i.test(navigator.userAgent)) {
        if (product["childProductOtherImageUrl"] != null) {
            this.otherImageList = ((product != null) && (product != undefined)) ? product["childProductOtherImageUrl"] : [];
            if (this.otherImageList.indexOf(product["comboImg"]) == -1) {
                this.otherImageList.unshift(product["comboImg"])
            }
        } else {
            this.otherImageList = []
            if (this.otherImageList.indexOf(product["comboImg"]) == -1) {
                this.otherImageList.push(product["comboImg"]);
                this.otherImageList.push(product["childProductImageUrl"]);
            }
        }
    } else {
        if (product["childProductOtherImageUrl"] != null) {
            this.otherImageList = ((product != null) && (product != undefined)) ? product["childProductOtherImageUrl"] : [];
        } else {
            this.otherImageList = []
            this.otherImageList.push(product["childProductImageUrl"]);
        }
    }
    this.description = ((product != null) && (product != undefined)) ? product["childcolProductDescription"] : "";
    this.shortDescription = ((product != null) && (product != undefined)) ? product["ShortDescription"] : "";
    this.internalCategoryId = ((product != null) && (product != undefined)) ? product["childProductField1"] : "";
    this.size = "";
    this.option = {};
    if (((product != null) && (product != undefined))) {
        this.option[product["optionId"]] = {};
        this.option[product["optionId"]].text = product["optionText"];
        this.option[product["optionId"]].titleText = (product["childProductField2"] != null) ? product["childProductField2"] : "";
        this.option[product["optionId"]].imgSrc = (product["optionImageUrl"] != null) ? product["optionImageUrl"] : "";
        this.option[product["optionId"]].colorCode = (product["colorCode"] != null) ? product["colorCode"] : "";
        this.option[product["optionId"]].cpid = (product["childProductId"] != null) ? product["childProductId"] : "";
    }
    this.categoryName = ((product != null) && (product != undefined)) ? product["childCategoryName"] : "";
    this.categoryId = ((product != null) && (product != undefined)) ? product["childCategoryId"] : "";

    this.ratingsCount = ((product != null) && (product != undefined)) ? product["childProductField6"] : "";
    this.reviewsCount = ((product != null) && (product != undefined)) ? product["childProductField3"] : "";
    this.skinType = ((product != null) && (product != undefined)) ? product["childProductField3"] : "";
    this.underTone = ((product != null) && (product != undefined)) ? product["childProductField4"] : "";
    this.finish = ((product != null) && (product != undefined)) ? product["childProductField5"] : "";
    this.coverage = ((product != null) && (product != undefined)) ? product["childProductField6"] : "";
    this.ProductType = ((product != null) && (product != undefined)) ? product["ProductType"] : "";

    this.regularPriceMain = ((product != null) && (product != undefined)) ? product["childProductPriceMain"] : "";
    this.activePriceMain = ((product != null) && (product != undefined)) ? ((product["childProductSpecialPriceMain"] != null) ? product["childProductSpecialPriceMain"] : product["childProductPriceMain"]) : "";

    this.nameMain = ((product != null) && (product != undefined)) ? ((INC_COL.config.language == "en") ? product["childProductNameMain"] : product["childProductNameMain"]) : "";
    this.imageURLMain = ((product != null) && (product != undefined)) ? ((INC_COL.config.language == "en") ? product["childProductImageUrlMain"].replace('pngg', 'png') : product["childProductImageUrlMain"].replace('pngg', 'png')) : "";
    // this.urlMain = ((product != null) && (product != undefined)) ? product["childProductUrlMain"] : "";
    if (window.location.href.indexOf('m.e.clinique.uk.uk.stage.emea.elcdev.net') >= 0) {
        this.urlMain = product["childProductUrlMain"].replace('www.clinique.co.uk', 'm.e.clinique.uk.uk.stage.emea.elcdev.net')
    } else if (window.location.href.indexOf('www.m.clinique.co.uk') >= 0) {
        this.urlMain = product["childProductUrlMain"].replace('www.clinique.co.uk', 'www.m.clinique.co.uk')
    } else if (window.location.href.indexOf('e.clinique.uk.uk.stage.emea.elcdev.net') >= 0) {
        this.urlMain = product["childProductUrlMain"].replace('www.clinique.co.uk', 'e.clinique.uk.uk.stage.emea.elcdev.net')
    } else {
        this.urlMain = product["childProductUrlMain"]
    }
    this.comboimg = product["comboImg"]
    this.combotitle = product["combotitle"]
    this.combourl = product["comboprdurl"]
    this.comboId = ((product != null) && (product != undefined)) ? product["comboId"] : "";
}
INC_COL.classes.FindObj = function(findObj) {
    this.id = (findObj != null && findObj != undefined) ? findObj.id : "";
    this.sku = (findObj != null && findObj != undefined) ? findObj.sku : "";
    this.mainId = (findObj != null && findObj != undefined) ? findObj.mainId : "";
    this.colorText = (findObj != null && findObj != undefined) ? findObj.colorText : "";
    this.sizeText = (findObj != null && findObj != undefined) ? findObj.sizeText : "";
}

INC_COL.classes.NWConfig = function(nwConfigObj) {
    this.url = (nwConfigObj != null && nwConfigObj != undefined) ? nwConfigObj.url : "";
    this.method = (nwConfigObj != null && nwConfigObj != undefined) ? nwConfigObj.method : "GET";
    this.params = (nwConfigObj != null && nwConfigObj != undefined) ? nwConfigObj.params : "";
}

INC_COL.methods = {};
INC_COL.methods.irbReq_collection_bundle = function(productId, bundleCount, elementName) {
    var elementName = "catalog_product_view";
    var Pid = INC_COL.methods.getProductIdFromWebPage();
    if (INC_COL.config.pageType == "plpcollection") {
        if (document.querySelector('.category-intro .category-description .main-title') != null) {
            Pid = document.querySelector('.category-intro .category-description .main-title').innerText.trim()
            //.toUpperCase();
        } else {
            if (document.querySelector('.breadcrumbs-area .breadcrumbs') != null) {
                var Pid = document.querySelector('.breadcrumbs-area .breadcrumbs').innerText.split('\n')[Pid.length - 1]
            }
        }
        var productId = Pid;
    }
    var apiKey = INC_COL.config.clientToken;
    var irbPATH = "//rapidload.increasingly.co/increasingly_bundles?irb/";
    var set = "1"
    var shooping_type = "2"
    if (window.location.href.indexOf('incgs=1') >= 0) {
        shooping_type = "1"
    } else if (window.location.href.indexOf('incgs=3') >= 0) {
        shooping_type = "3"
    }
    if (INC_COL.config.pageType == "pdpcollection") {
        var irbReqParams = "product_ids=" + INC_COL.config.pdpPID + "&category_id=" + "&api_key=" + apiKey + "&client_id=" + "&page_type=" + 'catalog_product_view' + "&set=" + set + "&cid=" + INC_COL.config.pdpCID + "&incgs=" + shooping_type + "&npb=" + "2" + "&client_visitor_id=" + INC_COL.config.ivid;
    } else {
        var irbReqParams = "product_ids=" + "&category_id=" + Base64.encode(productId) + "&api_key=" + apiKey + "&client_id=" + "&page_type=" + "catalog_category_view" + "&client_visitor_id=" + INC_COL.config.ivid + "&set=" + set + "&npb=" + shooping_type;
    }
    if (INC_COL.debug)
        console.log(irbReqParams);
    var irbReqURL1 = decodeURI(irbPATH + btoa(irbReqParams));
    var networkConfigObj = new INC_COL.classes.NWConfig();
    networkConfigObj["url"] = irbReqURL1;

    var xhr = new XMLHttpRequest();
    xhr.open("GET", networkConfigObj["url"], true);

    xhr.onload = function() {}
    xhr.onreadystatechange = function() {
        if (xhr.readyState == 4 && xhr.status === 200) {
            IRB_flag = true
            if (xhr.response != "") {
                INC_COL.dataStore.methods().buildDataStoreObj(JSON.parse(xhr.response), 'collection');

            } else {
                var remlo = document.querySelector('#loader_bk_inc')
                if (remlo != null) {
                    remlo.parentNode.removeChild(remlo)
                }
            }
        }
    }

    xhr.send(JSON.stringify(networkConfigObj["params"]));

}
INC_COL.methods.get_product_ratingscol = function(filed3, field2, rating_containers) {
    //&& filed3 != 0 && filed3.split('|')[0] != "0.0" && filed3.split('|')[0] != "0"
    var reviewc = filed3
    var count = document.createElement('span');
    count.classList.add('rating_count')
    rating_containers.appendChild(count);
    var avg = document.createElement('span');
    avg.classList.add('rating_avg')

    if (reviewc.split('|')[1] == undefined || reviewc.split('|')[1] == '') {
        count.textContent = "(0)";
    } else {
        // if (reviewc.replace('-', '.').trim() != "") {
        //     count.textContent = "(" + reviewc.replace('-', '.').trim() + ")"
        // }
        count.textContent = "(" + filed3.split('|')[1] + ")";

    }
    if (filed3 != undefined && filed3 != "") {
        var rating = filed3.split('|')[0];
        var reviewc = field2
        // filed3.split('|')[1];
        if (rating == "" || rating == undefined || rating == "NaN" || rating == "norating") {
            rating = 0
        }
        // var gave_rat = filed4;
        var ratingAvg = filed3
        // rating = Math.round(rating * 2) / 2;
        rating = parseFloat(rating).toFixed(1)
        rating = rating.toString();
        var rating_m = null;
        //if (rating != 0 && rating != "" && rating != null) {
        var rating_container = rating_containers;
        if (rating != 0 && rating != 1 && rating != 2 && rating != 3 && rating != 4 && rating != 5) {
            rating_m = rating.replace(".", "-");
        }
        if (rating == 0) {
            rating = "0-0"
        }
        if (rating == 1) {
            rating = "1-0"
        }
        if (rating == 2) {
            rating = "2-0"
        }
        if (rating == 3) {
            rating = "3-0"
        }
        if (rating == 4) {
            rating = "4-0"
        }
        if (rating == 5) {
            rating = "5-0"
        }
        if (rating == "") {
            rating = 0;
        }
        if ((rating_m != null && rating_m != "NaN")) {
            rating_containers.classList.add("rating_" + rating_m);
        } else if (isNaN(rating_m)) {
            rating_containers.classList.add("rating_" + rating);
        } else {
            rating_containers.classList.add("rating_" + rating);
        }

        var stars = document.createElement('span');
        stars.classList.add('rating_stars');
        if ((rating_m != null && rating_m != "NaN")) {
            stars.classList.add("rating_" + rating_m);
        } else if (isNaN(rating_m)) {
            stars.classList.add("rating_" + rating);
        } else {
            stars.classList.add("rating_" + rating);
        }
        // stars.classList.add('rating_' + rating);
        rating_containers.appendChild(stars);
    } else {
        var stars = document.createElement('span');
        stars.innerText = "."
        stars.style.color = "#fff"
        stars.classList.add('rating_stars');
        stars.classList.add('noratings');
        rating_containers.classList.add('noratings');
        rating_containers.appendChild(stars);
    }
}
INC_COL.methods.getProductIdFromWebPage = function() {
    var href_split = window.location.href.split('?')[1];
    if (href_split != undefined) {
        var total_split_href = href_split.split('&');
        var cid = "";
        var pid = ""
        if (href_split != undefined) {
            for (h = 0; h < total_split_href.length; h++) {
                if (total_split_href[h].indexOf('cid') >= 0) {
                    cid = total_split_href[h].split('=')[1]
                } else if (total_split_href[h].indexOf('pid') >= 0) {
                    pid = total_split_href[h].split('=')[1]
                }
            }
        }
    }
    if ((window.location.href.indexOf('incgs=2') >= 0 || window.location.href.indexOf('incgs=1') >= 0 || window.location.href.indexOf('incgs=3') >= 0) && cid != "" && cid != 0 && cid != null && pid != "" && pid != 0 && pid != null) {
        var total_split_href = href_split.split('&');
        var cid = "";
        var pid = ""
        if (href_split != undefined) {
            for (h = 0; h < total_split_href.length; h++) {
                if (total_split_href[h].indexOf('cid') >= 0) {
                    cid = total_split_href[h].split('=')[1].split('#')[0]
                } else if (total_split_href[h].indexOf('pid') >= 0) {
                    pid = total_split_href[h].split('=')[1].split('#')[0]
                }
            }
        }
        INC_COL.config.pdpCID = cid
        INC_COL.config.pdpPID = pid
        return pid;
    }
}

INC_COL.methods.detectPageType = function() {
    if ((window.location.href.indexOf('incgs=1') >= 0 || window.location.href.indexOf('incgs=1') >= 0 || window.location.href.indexOf('incgs=3') >= 0)) {
        return "pdpcollection";
    }
    if (document.querySelector('.products-grid-wrap') != null) {
        return "plpcollection";
    }
}

INC_COL.methods.createPDPCollectionBlock = function(sidebar) {
    document.querySelector('html').classList.add('inc_bundles');
    document.querySelector('body').classList.add('inc_bund_blk');

    var empty_sidebarflag = false
    if (INC_COL.dataStore.dataStoreObj[INC_COL.config.Product_id] != undefined) {
        if (INC_COL.dataStore.dataStoreObj[INC_COL.config.Product_id][INC_COL.config.Product_id] != undefined) {
            if (INC_COL.dataStore.dataStoreObj[INC_COL.config.Product_id][INC_COL.config.Product_id].bundleId == "12345679") {
                empty_sidebarflag = true
            }
        }
    }
    if (INC_COL.dataStore.dataStoreObj.undefined != undefined || empty_sidebarflag == false) {
        var pdpBlockcol = generate_html_tag('div', 'inc_bk')
        pdpBlockcol.innerHTML = pdp_html
        pdpBlockcol.setAttribute('style', 'clear: both;')
        pdpBlockcol.classList.add('inc_multipack');
        var modalTitle = pdpBlockcol.querySelector('.inc_title_txt');
        modalTitle.innerText = INC_COL.config.FBTTitle
        var productListObj = INC_COL.dataStore.dataStoreObj;
        var mainProductcol = INC_COL.config.collection_combo_details[0].collection_bundles[0].products[0];
        var pdpProductId = INC_COL.dataStore.methods().getFirstProductObjByMainId({
            mainId: mainProductcol
        }).id;
        var mainProduct_id = pdpProductId
        var maincolproductBlock = this.createcolProductModuleBlock(pdpProductId, "pdpcollection", false, pdpBlockcol, "mainprod");
        var bundleProductsArray = INC_COL.dataStore.bundleProductsArray;
        var mainprod_html = maincolproductBlock.querySelector('.inc_prd_desc_bk').innerHTML
        var remMainprod_desc = maincolproductBlock.querySelector('.inc_prd_desc_bk')
        var elPdpMainProductBlock = pdpBlockcol.querySelector('.inc_product-main_bk');
        var tumbnail_array = [];
        maincolproductBlock.classList.add('main_product')
        elPdpMainProductBlock.appendChild(maincolproductBlock);

        var pdpBundleProductListMainBlock = pdpBlockcol.querySelector('.inc_bd_prd_list_main_bk');
        pdpBundleProductListMainBlock.innerHTML = "";

        var colpdpBundleProductListMainBlock = pdpBlockcol.querySelector(".inc_bd_prd_list_main_bk");
        colpdpBundleProductListMainBlock.innerHTML = "";
        var eldescrpionblock = pdpBlockcol.querySelector(".inc_main_product_description_text")
        eldescrpionblock.innerHTML = maincolproductBlock.querySelector('.inc_prd_modal_bk .inc_prd_description_main_bk').innerHTML

        if (maincolproductBlock.querySelector('.inc_prd_modal_bk .inc_prd_description_main_bk').innerHTML != '') {
            pdpBlockcol.querySelector(".inc_main_product_description_title_txt").innerHTML = INC_COL.config.descriptionsText
        }

        setTimeout(function() {
            if (document.querySelector('.inc_main_product_description_text .Tabnav h2') != null) {
                if (document.querySelector('.inc_main_product_description_text .Tabnav h2').innerText.toLowerCase() == 'product description') {
                    document.querySelector('.inc_main_product_description_text .Tabnav h2').style.display = 'none';
                }
            }
        })

        INC_COL.methods.getMainProductDetails(mainprod_html, pdpBlockcol)
        var colpdpBundleCartBlock = this.createcolPDPBundleCartBlock(pdpBlockcol);
        var rcolpdpBundleCartBlock = pdpBlockcol.querySelector('.inc_bd_cart_bk');
        rcolpdpBundleCartBlock.parentNode.removeChild(rcolpdpBundleCartBlock);
        if (window.innerWidth < 1200) {
            pdpBlockcol.querySelector('.inc_wrapper').appendChild(colpdpBundleCartBlock);
        } else {
            pdpBlockcol.querySelector('.inc_bundle_bk').appendChild(colpdpBundleCartBlock);
        }

        //inc_bundle_bk
        var descriptPlacementmob = pdpBlockcol.querySelector('.inc_main_product_description_bk')
        var descriptPlaHtml = descriptPlacementmob.innerHTML
        descriptPlacementmob.parentNode.removeChild(descriptPlacementmob)
        var maindesctext = generate_html_tag('div', 'inc_main_product_description_bk')
        maindesctext.innerHTML = descriptPlaHtml
        pdpBlockcol.appendChild(maindesctext);
        // pdpBlockcol.appendChild(maindesctext)
        if (document.querySelector('.show-ribbon strong') != null) {
            document.querySelector('.show-ribbon strong').style.display = "none";
        }
        if (document.querySelector('html').classList.contains('pdp')) {
            if (document.querySelector('.container-100--nowrap') != null) {
                document.querySelector('.container-100--nowrap').style.display = "none";
            }

            if (document.querySelector('.click-collect') != null) {
                document.querySelector('.click-collect').style.display = "none";
            }

            if (document.querySelector('.full-width') != null) {
                document.querySelector('.full-width').style.display = "none";
            }

            if (document.querySelector('.spacer-bottom-60') != null) {
                document.querySelector('.spacer-bottom-60').style.display = "none";
            }

            if (document.querySelector('.pdp-heading-ratings') != null) {
                document.querySelector('.pdp-heading-ratings').style.display = "none";
            }

            if (document.querySelector('.scroller') != null) {
                document.querySelector('.scroller').style.display = "none";
            }

            if (document.querySelector('.spacer-bottom-20') != null) {
                document.querySelector('.spacer-bottom-20').style.display = "none";
            }

            if (document.querySelector('.inner-spacer-top-30') != null) {
                document.querySelector('.inner-spacer-top-30').style.display = "none";
            }

            if (document.querySelector('.br_related_products') != null) {
                document.querySelector('.br_related_products').style.display = "none";
            }

            if (document.querySelector('.pdp-price') != null) {
                document.querySelector('.pdp-price').style.display = "none"
            }

            if (document.querySelector('.add-to-basket__inner') != null) {
                document.querySelector('.add-to-basket__inner').style.display = "none"
            }

            if (document.querySelector('#checkout-combo') != null) {
                document.querySelector('#checkout-combo').style.display = "none";
            }

            if (document.querySelector('.pdp-offer-text__list') != null) {
                document.querySelector('.pdp-offer-text__list').style.display = "none";
            }

            if (document.querySelector(".inc_pdp_bk") != null) {
                document.querySelector(".inc_pdp_bk").style.display = "none";
            }

            if (window.innerWidth > 767) {
                document.querySelector('.site-width-container').setAttribute('style', 'width: 100%;height: 68%;position: relative;background: white url(https://www.increasingly.co/Implementation/inc_loading.gif) no-repeat center center/auto;top: 0;left:0;background-size: 204px;z-index: 9999;display: block;min-height:204px;')
            } else {
                if (document.querySelector('.layout-pdp') != null) {
                    document.querySelector('.layout-pdp').setAttribute('style', 'width: 100%;height: 68%;position: relative;background: url(https://www.increasingly.co/Implementation/inc_loading.gif) no-repeat center center/auto;top: 0;left:0;background-size: 204px;z-index: 9999;display: block;min-height:204px;')
                }
            }
        }

        INC_COL.methods.clear();
        if (window.location.innerwidth > 767) {
            var pdpcolsibling = document.querySelector('.inner-content-wrap')
        } else {
            var pdpcolsibling = document.querySelector('.inner-content-wrap')
            if (pdpcolsibling == null || pdpcolsibling == "") {
                if (document.querySelector('.spacer-bottom-60') != null) {
                    var pdpcolsibling = document.querySelector('.spacer-bottom-60')
                } else {
                    var pdpcolsibling = document.querySelector('.ui-content')
                }

            }
        }
        //Error404
        if (window.innerWidth > 767) {
            if (pdpcolsibling != null) {
                pdpcolsibling.parentNode.insertBefore(pdpBlockcol, pdpcolsibling);
            }
        } else {
            if (document.querySelector('.ui-content') != null) {
                if (pdpcolsibling != null) {
                    pdpcolsibling.appendChild(pdpBlockcol)
                }
            } else {
                if (pdpcolsibling != null) {
                    pdpcolsibling.parentNode.insertBefore(pdpBlockcol, pdpcolsibling);
                }
            }
        }

        var elProductAddBlock = document.querySelectorAll('.inc_bd_prd_list_bk .inc_prd_desc_add_bk')
        var productBlocks = pdpBlockcol.querySelector('.inc_bd_prd_list_bk').querySelectorAll('.inc_prd_module_bk');
        if (document.querySelector('.inc_product-main_bk .inc_prd_desc_title_txt_hdr') != null) {
            document.querySelector('.inc_product-main_bk .inc_prd_desc_title_txt_hdr').innerHTML = "Selected Product"
            document.querySelector('.inc_product-main_bk .inc_prd_desc_title_txt_hdr').style.textTransform = "none"
        }
        var mainproductb = document.querySelector('.inc_product-main_bk .inc_prd_module_bk')
        var main_idsd = mainproductb.getAttribute('data-main_id')
        if (mainproductb.querySelector('.inc_prd_desc_att_color_list_item_img_bk[data-cpid="' + main_idsd + '"]') != null) {
            if (mainproductb.querySelector('.inc_prd_desc_att_color_list_item_img_bk[data-cpid="' + main_idsd + '"] .inc_prd_desc_att_color_list_item_img') != null) {
                mainproductb.querySelector('.inc_prd_desc_att_color_list_item_img_bk[data-cpid="' + main_idsd + '"] .inc_prd_desc_att_color_list_item_img').click()
            }
        } else {
            if (mainproductb.querySelector('.inc_prd_desc_att_color_list_item_img') != null) {
                mainproductb.querySelector('.inc_prd_desc_att_color_list_item_img').click()
            }
        }
        if (mainproductb.querySelector('.inc_prd_desc_att_zero_bk.inc_active') != null) {
            if (mainproductb.querySelector('.inc_prd_desc_att_size_list_item_img_bk.avail') != null) {
                if (mainproductb.querySelector('.inc_prd_desc_att_zero_bk.inc_active .inc_prd_desc_att_size_list_item_img_bk.avail[data-cpid="' + main_idsd + '"]') != null) {
                    mainproductb.querySelector('.inc_prd_desc_att_zero_bk.inc_active .inc_prd_desc_att_size_list_item_img_bk.avail[data-cpid="' + main_idsd + '"]').click()
                } else {
                    if (mainproductb.querySelector('.inc_prd_desc_att_size_list_item_img_bk.avail') != null) {
                        mainproductb.querySelector('.inc_prd_desc_att_size_list_item_img').click()
                    }
                }
            }
        }
        if (mainproductb.querySelector('.inc_prd_desc_att_size_bk.inc_active') != null) {
            if (mainproductb.querySelector('.inc_prd_desc_att_size_list_item_img_bk.avail') != null) {
                if (mainproductb.querySelector('.inc_prd_desc_att_zero_bk.inc_active .inc_prd_desc_att_size_list_item_img_bk.avail[data-cpid="' + main_idsd + '"]') != null) {
                    mainproductb.querySelector('.inc_prd_desc_att_zero_bk.inc_active .inc_prd_desc_att_size_list_item_img_bk.avail[data-cpid="' + main_idsd + '"]').click()
                } else {
                    if (mainproductb.querySelector('.inc_prd_desc_att_size_list_item_img_bk.avail') != null) {
                        mainproductb.querySelector('.inc_prd_desc_att_size_list_item_img').click()
                    }
                }
            }
        }
        if (mainproductb.querySelector('.inc_prd_desc_att_size_bk.inc_active') != null) {
            if (mainproductb.querySelector('.inc_prd_desc_att_size_list_item_img_bk.avail') != null) {
                if (mainproductb.querySelector('.inc_prd_desc_att_size_bk.inc_active .inc_prd_desc_att_size_list_item_img_bk.avail[data-cpid="' + main_idsd + '"]') != null) {
                    mainproductb.querySelector('.inc_prd_desc_att_size_bk.inc_active .inc_prd_desc_att_size_list_item_img_bk.avail[data-cpid="' + main_idsd + '"]').click()
                } else {
                    if (mainproductb.querySelector('.inc_prd_desc_att_size_list_item_img_bk.avail') != null) {
                        mainproductb.querySelector('.inc_prd_desc_att_size_list_item_img').click()
                    }
                }
            }
        }
        if (mainproductb.querySelector('.inc_prd_desc_att_third_bk.inc_active') != null) {
            if (mainproductb.querySelector('.inc_prd_desc_att_third_list_item_img_bk.avail') != null) {
                if (mainproductb.querySelector('.inc_prd_desc_att_third_bk.inc_active .inc_prd_desc_att_size_list_item_img_bk.avail[data-cpid="' + main_idsd + '"]') != null) {
                    mainproductb.querySelector('.inc_prd_desc_att_third_bk.inc_active .inc_prd_desc_att_size_list_item_img_bk.avail[data-cpid="' + main_idsd + '"]').click()
                } else {
                    if (mainproductb.querySelector('.inc_prd_desc_att_third_list_item_img_bk.avail') != null) {
                        mainproductb.querySelector('.inc_prd_desc_att_third_list_item_img').click()
                    }
                }
            }
        }

        document.querySelector('.inc_product-main_bk .inc_prd_desc_add_bk').click()
        setTimeout(function() {
            for (var i = 0; i < 7; i++) {
                if (i == 0 || i == 2 || i == 4 || i == 6) {
                    if (elProductAddBlock[i] != undefined) {
                        var elprodelm = elProductAddBlock[i].parentNode.parentNode.parentNode.parentNode.parentNode.parentNode

                        var main_idsd = elprodelm.getAttribute('data-sku')
                        if (elprodelm.querySelector('.inc_prd_desc_att_color_list_item_img_bk[data-cpid="' + main_idsd + '"]') != null) {
                            if (elprodelm.querySelector('.inc_prd_desc_att_color_list_item_img_bk[data-cpid="' + main_idsd + '"] .inc_prd_desc_att_color_list_item_img') != null) {
                                elprodelm.querySelector('.inc_prd_desc_att_color_list_item_img_bk[data-cpid="' + main_idsd + '"] .inc_prd_desc_att_color_list_item_img').click()
                            }
                        } else {
                            if (elprodelm.querySelector('.inc_prd_desc_att_color_list_item_img') != null) {
                                elprodelm.querySelector('.inc_prd_desc_att_color_list_item_img').click()
                            }
                        }
                        if (elprodelm.querySelector('.inc_prd_desc_att_zero_bk.inc_active') != null) {
                            if (elprodelm.querySelector('.inc_prd_desc_att_size_list_item_img_bk.avail') != null) {
                                if (elprodelm.querySelector('.inc_prd_desc_att_zero_bk.inc_active .inc_prd_desc_att_size_list_item_img_bk.avail[data-cpid="' + main_idsd + '"]') != null) {
                                    elprodelm.querySelector('.inc_prd_desc_att_zero_bk.inc_active .inc_prd_desc_att_size_list_item_img_bk.avail[data-cpid="' + main_idsd + '"]').click()
                                } else {
                                    if (elprodelm.querySelector('.inc_prd_desc_att_size_list_item_img_bk.avail') != null) {
                                        elprodelm.querySelector('.inc_prd_desc_att_size_list_item_img').click()
                                    }
                                }
                            }
                        }
                        if (elprodelm.querySelector('.inc_prd_desc_att_third_bk.inc_active') != null) {
                            if (elprodelm.querySelector('.inc_prd_desc_att_third_list_item_img_bk.avail') != null) {
                                if (elprodelm.querySelector('.inc_prd_desc_att_third_bk.inc_active .inc_prd_desc_att_third_list_item_img_bk.avail[data-cpid="' + main_idsd + '"]') != null) {
                                    elprodelm.querySelector('.inc_prd_desc_att_third_bk.inc_active .inc_prd_desc_att_third_list_item_img_bk.avail[data-cpid="' + main_idsd + '"]').click()
                                } else {
                                    if (elprodelm.querySelector('.inc_prd_desc_att_third_list_item_img_bk.avail') != null) {
                                        elprodelm.querySelector('.inc_prd_desc_att_third_list_item_img').click()
                                    }
                                }
                            }
                        }
                        if (elprodelm.querySelector('.inc_prd_desc_att_size_bk.inc_active') != null) {
                            if (elprodelm.querySelector('.inc_prd_desc_att_size_list_item_img_bk.avail') != null) {
                                if (elprodelm.querySelector('.inc_prd_desc_att_size_bk.inc_active .inc_prd_desc_att_size_list_item_img_bk.avail[data-cpid="' + main_idsd + '"]') != null) {
                                    elprodelm.querySelector('.inc_prd_desc_att_size_bk.inc_active .inc_prd_desc_att_size_list_item_img_bk.avail[data-cpid="' + main_idsd + '"]').click()
                                } else {
                                    if (elprodelm.querySelector('.inc_prd_desc_att_size_list_item_img_bk.avail') != null) {
                                        elprodelm.querySelector('.inc_prd_desc_att_size_list_item_img').click()
                                    }
                                }
                            }
                        }
                        elProductAddBlock[i].click();
                    }
                }
            }
            if (document.querySelectorAll('.inc_col_desc_main_product_details_bk .inc_col_size_qty_details_bk select option')[1] != null) {
                document.querySelectorAll('.inc_col_desc_main_product_details_bk .inc_col_size_qty_details_bk select option')[1].selected = "selected"
                INC_COL.methods.calculateBundleTotal()
                onloadpdp = true
                onloadpdp_delete = true
            }
        }, 100)
        setTimeout(function() {
            onloadpdp = true
            onloadpdp_delete = true
        }, 1000)
        setTimeout(function() {
            generate_meta_tag('viewport', "width=device-width, initial-scale=1.0")
        }, 200)
        INC_COL.methods.irbReq_is_categ_recomendation()
    }
}
INC_COL.methods.createPLPCollectionBlock = function(response) {
    if (document.querySelector('.plp_collection_bk') != null) {
        var collection_bk = document.querySelector('.plp_collection_bk')
        collection_bk.parentNode.removeChild(collection_bk);
    }

    var inc_col_lection_bk = generate_html_tag('div', 'plp_collection_bk');
    document.querySelector('body').classList.add('inc_bundles_available_plp');
    inc_col_lection_bk.setAttribute('style', 'padding: 15px 10px;')
    var collection_title_bk = generate_html_tag('div', 'collection_title_bk')
    var collection_plp_title_txt = generate_html_tag('div', 'collection_plp_title_txt')
    collection_plp_title_txt.innerText = "OUR LATEST COLLECTION"
    collection_title_bk.appendChild(collection_plp_title_txt)
    inc_col_lection_bk.appendChild(collection_title_bk)
    var inc_col_lection_bundle_bk = generate_html_tag('div', 'inc_col_lection_bundle_bk');
    inc_col_lection_bk.appendChild(inc_col_lection_bundle_bk)
    var sliderBtnCounter = 0;
    //
    var inc_col_lection_slider_bk = generate_html_tag('div', 'inc_col_lection_slider_bk');
    var inc_col_lection_thumbnail_arrows_bk = generate_html_tag('div', 'inc_col_lection_thumbnail_arrows_bk');
    inc_col_lection_slider_bk.appendChild(inc_col_lection_thumbnail_arrows_bk)
    var inc_col_lection_thumbnail_prev_wrapper = generate_html_tag('div', 'inc_col_lection_thumbnail_prev_wrapper');
    inc_col_lection_thumbnail_arrows_bk.appendChild(inc_col_lection_thumbnail_prev_wrapper)

    var inc_col_lection_thumbnail_prev_btn = generate_html_tag('div', 'inc_col_lection_thumbnail_prev_btn');
    inc_col_lection_thumbnail_prev_btn.innerText = "Předchozí"
    inc_col_lection_thumbnail_prev_wrapper.appendChild(inc_col_lection_thumbnail_prev_btn)
    var all_p_length = document.querySelectorAll('.inc_col_lection_item_bk').length
    inc_col_lection_thumbnail_prev_btn.setAttribute("style", "pointer-events: none;opacity:0.5");
    inc_col_lection_thumbnail_prev_btn.parentNode.setAttribute("style", "pointer-events: none;opacity:0.5");
    inc_col_lection_thumbnail_prev_wrapper.addEventListener('click', function() {
        var elprev = this.parentNode.parentNode.parentNode.parentNode
        sliderBtnCounter--;
        if (sliderBtnCounter == -1)
            sliderBtnCounter = 0;
        var all_p_length = document.querySelectorAll('.inc_col_lection_item_bk').length
        if (INC_COL.clientConfig.slidevalue == -1)
            INC_COL.clientConfig.slidevalue = 0;
        var width_slide = ""
        if (window.innerWidth > 1023) {
            width_slide = 285
        } else if (window.innerWidth > 835) {
            width_slide = 320
        } else {
            width_slide = 354
        }
        // if(window.innerWidth <= 834){
        //     width_slide = 354
        // }else if(window.innerWidth > 835 && window.innerWidth <= 1024){
        //     width_slide = 420
        // }else if(window.innerWidth > 1025){
        //     width_slide = 336
        // }
        if (INC_COL.clientConfig.slidevalue > 0) {
            document.querySelector('.inc_col_lection_thumbnail_next_btn').setAttribute("style", "pointer-events: auto;opacity:1");
            document.querySelector('.inc_col_lection_thumbnail_next_btn').parentNode.setAttribute("style", "pointer-events: auto;opacity:1");
            INC_COL.clientConfig.slidevalue--
            INC_COL.clientConfig.offset = (parseInt(INC_COL.clientConfig.offset) + width_slide) + 'px';
            var menu = document.querySelector('.inc_col_lection_item_list_bk');
            menu.setAttribute('style', 'margin-left:' + INC_COL.clientConfig.offset + ';transition-duration:0.5s;-webkit-transition-duration:0.5s;-moz-transition-duration:0.5s;-ms-transition-duration:0.5s;-o-transition-duration:0.5s;')
        }
        if (INC_COL.clientConfig.slidevalue == 0) {
            document.querySelector('.inc_col_lection_thumbnail_prev_btn').setAttribute("style", "pointer-events: none;opacity:0.5");
            document.querySelector('.inc_col_lection_thumbnail_prev_btn').parentNode.setAttribute("style", "pointer-events: none;opacity:0.5");
        }
    });

    var inc_col_lection_thumbnail_next_wrapper = generate_html_tag('div', 'inc_col_lection_thumbnail_next_wrapper');
    inc_col_lection_thumbnail_arrows_bk.appendChild(inc_col_lection_thumbnail_next_wrapper)
    var inc_col_lection_thumbnail_next_btn = generate_html_tag('div', 'inc_col_lection_thumbnail_next_btn');
    inc_col_lection_thumbnail_next_btn.innerText = "Další"
    inc_col_lection_thumbnail_next_wrapper.appendChild(inc_col_lection_thumbnail_next_btn)

    inc_col_lection_thumbnail_next_wrapper.addEventListener('click', function() {
        var elnext = this.parentNode.parentNode.parentNode.parentNode
        sliderBtnCounter++;
        var all_p_length = document.querySelectorAll('.inc_col_lection_item_bk').length
        if (sliderBtnCounter > all_p_length.length - 3) {
            sliderBtnCounter--;
        }

        var cc_ount = 1;
        if (window.innerWidth > 1239) {
            cc_ount = 4
        }
        var width_slide = ""
        if (window.innerWidth > 1023) {
            width_slide = 285
        } else if (window.innerWidth > 835) {
            width_slide = 320
        } else {
            width_slide = 354
        }
        //cc_ount=2
        if (+INC_COL.clientConfig.slidevalue + +cc_ount < all_p_length) {
            document.querySelector('.inc_col_lection_thumbnail_prev_btn').setAttribute("style", "pointer-events: auto;opacity:1");
            document.querySelector('.inc_col_lection_thumbnail_prev_btn').parentNode.setAttribute("style", "pointer-events: auto;opacity:1");
            INC_COL.clientConfig.slidevalue++
            INC_COL.clientConfig.offset = (parseInt(INC_COL.clientConfig.offset) - width_slide) + 'px';
            var menu = document.querySelector('.inc_col_lection_item_list_bk');
            menu.setAttribute('style', 'margin-left:' + INC_COL.clientConfig.offset + ';transition-duration:0.5s;-webkit-transition-duration:0.5s;-moz-transition-duration:0.5s;-ms-transition-duration:0.5s;-o-transition-duration:0.5s;')
        }

        if (+INC_COL.clientConfig.slidevalue + +cc_ount == all_p_length) {
            document.querySelector('.inc_col_lection_thumbnail_next_btn').setAttribute("style", "pointer-events: none;opacity:0.5");
            document.querySelector('.inc_col_lection_thumbnail_next_btn').parentNode.setAttribute("style", "pointer-events: none;opacity:0.5");
        }
    });
    if ((window.innerWidth > 420 && INC_COL.config.collection_combo_details.length > 3) || (window.innerWidth < 420 && INC_COL.config.collection_combo_details.length > 1)) {
        inc_col_lection_bk.appendChild(inc_col_lection_slider_bk)
    }
    //collection modal block

    var inc_col_lection_modal_bk = generate_html_tag('div', 'inc_col_lection_modal_bk');
    var inc_col_lection_modal_list = generate_html_tag('div', 'inc_col_lection_modal_list');
    inc_col_lection_modal_bk.appendChild(inc_col_lection_modal_list)
    inc_col_lection_bk.appendChild(inc_col_lection_modal_bk)

    var inc_col_lection_item_list_bk = generate_html_tag('div', 'inc_col_lection_item_list_bk');
    inc_col_lection_bundle_bk.appendChild(inc_col_lection_item_list_bk)

    for (k = 0; k < INC_COL.config.collection_combo_details.length; k++) {
        if (k < INC_COL.config.collection_combo_details.length) {
            var inc_col_lection_item_bk = generate_html_tag('div', 'inc_col_lection_item_bk');
            inc_col_lection_item_list_bk.appendChild(inc_col_lection_item_bk)
            var inc_col_lection_item_wrapper = generate_html_tag('div', 'inc_col_lection_item_wrapper');
            inc_col_lection_item_bk.appendChild(inc_col_lection_item_wrapper)

            //image gallery block for collections

            var inc_col_lection_Images_bk = generate_html_tag('div', 'inc_col_lection_Images_bk');
            inc_col_lection_item_wrapper.appendChild(inc_col_lection_Images_bk)

            //collection image per items
            var inc_col_lection_Images_gallery = generate_html_tag('div', 'inc_col_lection_Images_gallery');
            inc_col_lection_Images_gallery.classList.add('active')
            inc_col_lection_Images_bk.appendChild(inc_col_lection_Images_gallery)

            var img_wrapper_first = generate_html_tag('div', 'img_wrapper_first');
            var img_wrapper_second = generate_html_tag('div', 'img_wrapper_second');
            inc_col_lection_Images_gallery.appendChild(img_wrapper_first)
            inc_col_lection_Images_gallery.appendChild(img_wrapper_second)

            var collection_combo_img_wrapper = generate_html_tag('div', 'collection_combo_img_wrapper');
            var collection_combo_img = generate_html_tag('img');

            collection_combo_img_wrapper.appendChild(collection_combo_img)
            inc_col_lection_Images_gallery.appendChild(collection_combo_img_wrapper)

            inc_col_lection_Images_gallery.addEventListener('click', function() {
                this.parentNode.parentNode.parentNode.querySelector('.inc_col_lection_checkout_btn').click()
            })

            collection_combo_img_wrapper.classList.add('active')

            var inc_col_lection_promo_bk = generate_html_tag('div', 'inc_col_lection_promo_bk');
            inc_col_lection_Images_bk.appendChild(inc_col_lection_promo_bk)
            // inc_col_lection_Name_text.setAttribute('style','max-height: 40px;')

            //collection per product block
            var inc_col_lection_details_bk = generate_html_tag('div', 'inc_col_lection_details_bk');

            var inc_col_lection_details_btn_bk = generate_html_tag('div', 'inc_col_lection_details_btn_bk');
            inc_col_lection_item_bk.appendChild(inc_col_lection_details_btn_bk)

            inc_col_lection_details_btn_bk.appendChild(inc_col_lection_details_bk)

            var inc_col_lection_Name_bk = generate_html_tag('div', 'inc_col_lection_Name_bk');
            inc_col_lection_item_wrapper.appendChild(inc_col_lection_Name_bk)
            var inc_col_lection_Name_text = generate_html_tag('a', 'inc_col_lection_Name_text');
            inc_col_lection_Name_bk.appendChild(inc_col_lection_Name_text)

            inc_col_lection_Name_text.addEventListener('click', function() {
                INC_COL.methods.sendBundleClickTracking(this.getAttribute('comboid'));
                var urlc = this.getAttribute('ComboProductURL')
                window.location.href = urlc

            })

            //collection image per items
            // var inc_col_lection_Images_gallery = generate_html_tag('div','inc_col_lection_Images_gallery');
            // inc_col_lection_Images_gallery.classList.add('active')
            // inc_col_lection_Images_bk.appendChild(inc_col_lection_Images_gallery)

            // var collection_combo_img_wrapper=generate_html_tag('div','collection_combo_img_wrapper');
            // var collection_combo_img=generate_html_tag('img');

            // collection_combo_img_wrapper.appendChild(collection_combo_img)
            // inc_col_lection_Images_gallery.appendChild(collection_combo_img_wrapper)
            // collection_combo_img_wrapper.classList.add('active')

            // collection_combo_img_wrapper.addEventListener('click',function(e){
            //     if(window.location.href.indexOf('incgs=1') == -1){
            //         if(document.querySelector('.inc_col_lection_thumbnail_item.active') != null){
            //             var hrefre=document.querySelector('.inc_col_lection_thumbnail_item.active').getAttribute('href_red')
            //             var comboid=document.querySelector('.inc_col_lection_product_list_bk').getAttribute('data-combo_id')
            //             INC_COL.methods.sendBundleClickTracking(comboid);
            //             window.location.href=hrefre
            //         }
            //     }
            // })
            // var inc_col_lection_Images_gallery = generate_html_tag('div','inc_col_lection_Images_gallery');
            // inc_col_lection_Images_gallery.classList.add('active')
            // inc_col_lection_Images_bk.appendChild(inc_col_lection_Images_gallery)

            var collection_combo_img_wrapper = generate_html_tag('div', 'collection_combo_img_wrapper');
            var collection_combo_img = generate_html_tag('img');

            collection_combo_img_wrapper.appendChild(collection_combo_img)
            // inc_col_lection_Images_gallery.appendChild(collection_combo_img_wrapper)

            // inc_col_lection_Images_gallery.addEventListener('click',function(){
            //     this.parentNode.parentNode.parentNode.querySelector('.inc_col_lection_checkout_btn').click()
            // })

            collection_combo_img_wrapper.classList.add('active')

            var inc_col_lection_price_bk = generate_html_tag('div', 'inc_col_lection_price_bk');
            inc_col_lection_details_bk.appendChild(inc_col_lection_price_bk)

            var inc_col_lection_regular_price = generate_html_tag('div', 'inc_col_lection_regular_price');
            inc_col_lection_price_bk.appendChild(inc_col_lection_regular_price)

            var inc_col_lection_active_price = generate_html_tag('div', 'inc_col_lection_active_price');
            inc_col_lection_price_bk.appendChild(inc_col_lection_active_price)

            var inc_col_lection_Rating_bk = generate_html_tag('div', 'inc_col_lection_Rating_bk');
            inc_col_lection_details_bk.appendChild(inc_col_lection_Rating_bk)

            var pr = 0;
            var sp = 0;
            var bestrating = 0
            var inc_col_lection_product_list_wrapper_bk = generate_html_tag('div', 'inc_col_lection_product_list_wrapper_bk');
            // inc_col_lection_product_list_wrapper_bk.classList.add(inc_col_lection_product_list_wrapper_bk)
            inc_col_lection_item_wrapper.appendChild(inc_col_lection_product_list_wrapper_bk)
            for (p = 0; p < INC_COL.config.collection_combo_details[k].collection_bundles.length; p++) {
                for (r = 0; r < INC_COL.config.collection_combo_details[k].collection_bundles[p].products.length; r++) {
                    if (r < 4) {
                        inc_col_lection_Images_gallery.classList.add('combo_' + INC_COL.config.collection_combo_details[k].collection_bundles[p].products.length)
                        inc_col_lection_Images_bk.classList.add('combo_' + INC_COL.config.collection_combo_details[k].collection_bundles[p].products.length)
                        var product_id = INC_COL.config.collection_combo_details[k].collection_bundles[p].products[r]
                        var findObj = new INC_COL.classes.FindObj({
                            id: product_id
                        });
                        var productObj = INC_COL.dataStore.methods().getProductById(findObj);
                        var img_wrapper = generate_html_tag('div', 'img_wrapper');
                        if (window.innerWidth > 768) {
                            if (product_id == INC_COL.config.collection_combo_details[k].ComboMainPrdId) {
                                img_wrapper.classList.add("mainProductImage")
                            }
                        }
                        var p_img = generate_html_tag('img');
                        p_img.setAttribute('src', productObj["imageURL"])
                        img_wrapper.appendChild(p_img)

                        if (r == 0) {
                            img_wrapper_first.appendChild(img_wrapper)
                        } else {
                            img_wrapper_second.appendChild(img_wrapper)
                        }

                        img_wrapper.addEventListener('click', function(e) {
                            if (window.location.href.indexOf('incgs=1') == -1) {
                                if (document.querySelector('.inc_col_lection_thumbnail_item.active') != null) {
                                    var hrefre = document.querySelector('.inc_col_lection_thumbnail_item.active').getAttribute('href_red')
                                    var comboid = document.querySelector('.inc_col_lection_product_list_bk').getAttribute('data-combo_id')
                                    INC_COL.methods.sendBundleClickTracking(comboid);
                                    window.location.href = hrefre
                                }
                            }
                        })

                        ////////////////
                        var inc_col_lection_product_list_bk = generate_html_tag('div', 'inc_col_lection_product_list_bk');
                        inc_col_lection_product_list_bk.classList.add(productObj.ProductType)
                        inc_col_lection_product_list_wrapper_bk.appendChild(inc_col_lection_product_list_bk)

                        var inc_col_lection_product_list_wrapper = generate_html_tag('div', 'inc_col_lection_product_list_wrapper');
                        inc_col_lection_product_list_bk.appendChild(inc_col_lection_product_list_wrapper)

                        var inc_col_lection_product_image_bk = generate_html_tag('div', 'inc_col_lection_product_image_bk');
                        inc_col_lection_product_list_wrapper.appendChild(inc_col_lection_product_image_bk)

                        var inc_col_lection_product_image = generate_html_tag('img');
                        inc_col_lection_product_image.setAttribute('src', productObj["imageURL"])
                        inc_col_lection_product_image.setAttribute('onerror', "this.src='" + INC_COL.config.noimage + "'");
                        inc_col_lection_product_image_bk.appendChild(inc_col_lection_product_image)

                        inc_col_lection_product_image_bk.addEventListener('click', function() {
                            var activecol = this.parentNode.parentNode.parentNode.parentNode.parentNode.parentNode.parentNode.parentNode.parentNode
                            var datamainid = this.parentNode.parentNode.getAttribute('data-main_id');
                            if (activecol.querySelector('.inc_col_lection_modal_bk .inc_col_lection_module_bk.active') != null) {
                                activecol.querySelector('.inc_col_lection_modal_bk .inc_col_lection_module_bk.active').classList.remove('active')
                            }
                            if (activecol.querySelector('.inc_col_lection_modal_bk .inc_col_lection_module_bk[data-main_id="' + datamainid + '"]') != null) {
                                activecol.querySelector('.inc_col_lection_modal_bk .inc_col_lection_module_bk[data-main_id="' + datamainid + '"]').classList.add('active')
                            }
                            if (document.querySelector('.inc_col_lection_module_bk.active .inc_popup_product_details_tab_bk') != null) {
                                document.querySelector('.inc_col_lection_module_bk.active .inc_popup_product_details_tab_bk').click()
                            }
                            if (window.innerWidth < 820) {// $('.inc_col_lection_module_bk.active').animate({ scrollTop: $('.inc_product_img_bk').height() }, 'fast');
                            }
                            document.querySelector('html').classList.add('inc_overlay');
                            activecol.querySelector('.inc_col_lection_modal_bk').classList.toggle('active')
                            if (navigator.userAgent.toLowerCase().indexOf('safari') >= 0 && navigator.userAgent.toLowerCase().indexOf('chrome') == -1 && window.innerWidth < 1337) {
                                // collection_height= $('.inc_col_lection_product_item_bk').height() - not req
                                setTimeout(function() {
                                    document.querySelector('body').setAttribute('style', 'position: fixed;width: 100%;')
                                }, 100)
                            }
                        })

                        var inc_col_lection_product_info_bk = generate_html_tag('div', 'inc_col_lection_product_info_bk');
                        inc_col_lection_product_list_wrapper.appendChild(inc_col_lection_product_info_bk)

                        inc_col_lection_product_list_bk.setAttribute('data-id', productObj.id);
                        inc_col_lection_product_list_bk.setAttribute('data-sku', productObj.sku);
                        inc_col_lection_product_list_bk.setAttribute('data-main_id', productObj.mainId);
                        inc_col_lection_product_list_bk.setAttribute('data-bundle_id', productObj.bundleId);
                        inc_col_lection_product_list_bk.setAttribute('data-combo_id', INC_COL.config.collection_combo_details[k].comboId);
                        inc_col_lection_product_list_bk.setAttribute('id', 'inc' + productObj.mainId);

                        // inc_col_lection_product_title.addEventListener('click',function(){
                        //     var datamainid=this.parentNode.parentNode.getAttribute('data-main_id');
                        //     if(document.querySelector('.inc_col_lection_modal_bk .inc_col_lection_module_bk.active') != null){
                        //         document.querySelector('.inc_col_lection_modal_bk .inc_col_lection_module_bk.active').classList.remove('active')
                        //     }
                        //     if(document.querySelector('.inc_col_lection_modal_bk .inc_col_lection_module_bk[data-main_id="'+datamainid+'"]') != null){
                        //         document.querySelector('.inc_col_lection_modal_bk .inc_col_lection_module_bk[data-main_id="'+datamainid+'"]').classList.add('active')
                        //     }
                        //     if(document.querySelector('.inc_col_lection_module_bk.active .inc_popup_product_details_tab_bk') != null){
                        //         document.querySelector('.inc_col_lection_module_bk.active .inc_popup_product_details_tab_bk').click()
                        //     }
                        //     document.querySelector('html').classList.add('inc_overlay');
                        //     document.querySelector('.inc_col_lection_modal_bk').classList.toggle('active')
                        // })

                        // var inc_col_lection_product_rating = generate_html_tag('div','inc_col_lection_product_rating');
                        // var inc_product_desc_ratings_bk = generate_html_tag('div','inc_product_desc_ratings_bk');
                        // inc_col_lection_product_rating.appendChild(inc_product_desc_ratings_bk)
                        // var field1 = productObj.ratingsCount;
                        // var field2 = productObj.reviewsCount;
                        // INC_COL.methods.get_product_ratings_col(field1,field2,inc_product_desc_ratings_bk);
                        // inc_col_lection_product_info_bk.appendChild(inc_col_lection_product_rating)
                        var inc_col_lection_product_title = generate_html_tag('div', 'inc_col_lection_product_title');
                        var p_name = generate_html_tag('p');
                        p_name.innerText = productObj.name
                        inc_col_lection_product_title.setAttribute('title', productObj.name)
                        inc_col_lection_product_title.appendChild(p_name)
                        inc_col_lection_product_info_bk.appendChild(inc_col_lection_product_title)

                        findObj = new INC_COL.classes.FindObj({
                            mainId: productObj.mainId
                        });
                        var productColorsObj = INC_COL.dataStore.methods().getProductColorsObj(findObj);
                        var product0Obj = INC_COL.dataStore.methods().getProductopt0Obj(findObj);
                        if (productColorsObj.colorArray.length > 0) {
                            findObj = new INC_COL.classes.FindObj({
                                mainId: productObj.mainId,
                                colorText: productColorsObj.colorArray[0].text
                            });
                            var newproductObj = INC_COL.dataStore.methods().getProductByAtt(findObj);
                            if (Object.keys(newproductObj).length > 0) {
                                productObj = newproductObj
                            }
                        } else if (product0Obj.att0Array.length > 0) {
                            findObj = new INC_COL.classes.FindObj({
                                mainId: productObj.mainId,
                                colorText: ""
                            });
                            findObj.zeroText = product0Obj.att0Array[0].text
                            var newproductObj = INC_COL.dataStore.methods().getProductByAtt(findObj);
                            if (Object.keys(newproductObj).length > 0) {
                                productObj = newproductObj
                            }
                        }

                        var activePrice = parseFloat(productObj.activePrice).toFixed(2).toString();
                        var regularPrice = parseFloat(productObj.regularPrice).toFixed(2).toString();
                        if (productObj.discountPrice != "") {
                            INC_COL.clientConfig.discPrc = productObj.discountPrice;
                        }
                        var price = 0;
                        var specialprice = 0;
                        if (activePrice != regularPrice && regularPrice != "" && regularPrice != null && regularPrice != 0) {
                            specialprice = activePrice
                            price = regularPrice
                        } else {
                            price = regularPrice
                            specialprice = 0
                        }
                        if (sp != 0 && +specialprice != 0) {
                            pr += +price;
                            sp += +specialprice;
                        } else if (sp != 0 && +specialprice == 0) {
                            pr += +price;
                            sp += +price;
                        } else if (sp == 0 && +specialprice == 0) {
                            pr += +price;
                            sp += +price;
                        } else {
                            pr += +price;
                            sp += +specialprice;
                        }

                        var inc_col_lection_product_price_bk = generate_html_tag('div', 'inc_col_lection_product_price_bk');
                        inc_col_lection_product_info_bk.appendChild(inc_col_lection_product_price_bk)

                        var inc_col_lection_product_active_price = generate_html_tag('div', 'inc_col_lection_product_active_price');
                        inc_col_lection_product_price_bk.appendChild(inc_col_lection_product_active_price)

                        var inc_col_lection_product_regular_price = generate_html_tag('div', 'inc_col_lection_product_regular_price');
                        inc_col_lection_product_price_bk.appendChild(inc_col_lection_product_regular_price)

                        inc_col_lection_product_regular_price.innerText = "";

                        var inc_col_lection_product_save_price = generate_html_tag('div', 'inc_col_lection_product_save_price');
                        inc_col_lection_product_price_bk.appendChild(inc_col_lection_product_save_price)
                        inc_col_lection_product_regular_price.innerText = "";

                        if (activePrice != regularPrice && regularPrice != "" && regularPrice != null && regularPrice != 0) {
                            inc_col_lection_product_active_price.parentNode.classList.add('is_special_price')
                            inc_col_lection_product_active_price.innerText = formatter.format(activePrice)
                            inc_col_lection_product_regular_price.innerHTML = INC_COL.clientConfig.regularPricePrefix + formatter.format(regularPrice)
                            var discmoney = get_discount_price(regularPrice, activePrice)
                            var save_p = get_discount_price_percentage(regularPrice, activePrice)
                            inc_col_lection_product_save_price.innerText = "SAVE " + formatter.format(discmoney) + " (" + (save_p) + "%)";
                        } else {
                            inc_col_lection_product_active_price.innerText = formatter.format(activePrice)
                        }
                        var inc_col_lection_product_view_details_bk = generate_html_tag('div', 'inc_col_lection_product_view_details_bk');
                        if (productObj.ProductType == 'simple') {
                            inc_col_lection_product_view_details_bk.innerText = "View details";
                        } else {
                            inc_col_lection_product_view_details_bk.innerText = "Select options";
                        }
                        inc_col_lection_product_info_bk.appendChild(inc_col_lection_product_view_details_bk)
                        inc_col_lection_product_list_wrapper_bk.addEventListener('click', function() {
                            // document.querySelector('body').classList.add('local-progress')
                            var hrefredirect = this.parentNode.parentNode.querySelector('.inc_col_lection_checkout_btn').click()
                        })

                        ////////////////

                        var field1 = productObj.ratingsCount;
                        if (bestrating < productObj.ratingsCount) {
                            bestrating = productObj.ratingsCount
                        }
                        if (r == 0) {// var rating_col = INC_COL.methods.get_product_ratings(field1,inc_col_lection_Rating_bk);
                        }

                        // var activePrice = parseFloat(productObj.activePrice).toFixed(2).toString();
                        // var regularPrice = parseFloat(productObj.regularPrice).toFixed(2).toString();

                        // var price=0;
                        // var specialprice=0;
                        // if (activePrice != regularPrice && regularPrice != "" && regularPrice != null && regularPrice != 0) {
                        //     specialprice = activePrice
                        //     price = regularPrice
                        // } else{
                        //     price = regularPrice
                        //     specialprice = 0
                        // }
                        // if (sp != 0 && +specialprice != 0) {
                        //     pr += +price;
                        //     sp += +specialprice;
                        // } else if (sp != 0 && +specialprice == 0) {
                        //     pr += +price;
                        //     sp += +price;
                        // } else if (sp == 0 && +specialprice == 0) {
                        //     pr += +price;
                        //     sp += +price;
                        // } else {
                        //     pr += +price;
                        //     sp += +specialprice;
                        // }

                        // var productcollectionModalBlock = INC_COL.methods.createProductModalBlock(product_id, 'collection', true,inc_col_lection_modal_list);
                        // if(productcollectionModalBlock.querySelector('.inc_product_desc_add_text') != null){
                        //     productcollectionModalBlock.querySelector('.inc_product_desc_add_text').innerText = "Update"
                        // }
                        // productcollectionModalBlock.classList.add('active')
                        // inc_col_lection_module_product_bk.appendChild(productcollectionModalBlock)
                        // inc_col_lection_modal_list.appendChild(inc_col_lection_module_bk)

                        // var inc_col_lection_popup_close_icon = generate_html_tag('span','inc_col_lection_popup_close_icon')
                        // inc_col_lection_product_detail_tab_bk.appendChild(inc_col_lection_popup_close_icon)
                        // var inc_popup_product_details_tab_bk = generate_html_tag('div','inc_popup_product_details_tab_bk')
                        // inc_popup_product_details_tab_bk.classList.add('active')
                        // var inc_popup_product_details_tab_text = generate_html_tag('div','inc_popup_product_details_text')
                        // inc_popup_product_details_tab_text.innerText = "Zobrazit podrobnosti"
                        // inc_popup_product_details_tab_bk.appendChild(inc_popup_product_details_tab_text)
                        // inc_col_lection_product_detail_tab_bk.appendChild(inc_popup_product_details_tab_bk)

                        // inc_popup_product_details_tab_bk.addEventListener('click',function(){
                        //     this.parentNode.querySelector('.inc_popup_product_description_tab_bk').classList.remove('active')
                        //     this.parentNode.querySelector('.inc_popup_product_details_tab_bk').classList.add('active')
                        //     this.parentNode.parentNode.querySelector('.inc_popup_product_description_bk').classList.remove('active')
                        //     this.parentNode.parentNode.querySelector('.inc_product_bk').classList.add('active')
                        // })

                        // if(productObj.description != "" && productObj.description != null){
                        //     var inc_popup_product_description_tab_bk = generate_html_tag('div','inc_popup_product_description_tab_bk')
                        //     var inc_popup_product_description_tab_text = generate_html_tag('div','inc_popup_product_description_text')
                        //     inc_popup_product_description_tab_text.innerText = "Popis výrobku"
                        //     inc_popup_product_description_tab_bk.appendChild(inc_popup_product_description_tab_text)
                        //     inc_col_lection_product_detail_tab_bk.appendChild(inc_popup_product_description_tab_bk)
                        //     var inc_popup_product_description_bk = generate_html_tag('div','inc_popup_product_description_bk')
                        //     var inc_popup_product_description_text = generate_html_tag('div','inc_popup_product_description_text')
                        //     inc_popup_product_description_text.innerHTML  = productObj.description

                        //     inc_popup_product_description_tab_bk.addEventListener('click',function(){
                        //         this.parentNode.querySelector('.inc_popup_product_details_tab_bk').classList.remove('active')
                        //         this.parentNode.querySelector('.inc_popup_product_description_tab_bk').classList.add('active')
                        //         this.parentNode.parentNode.querySelector('.inc_product_bk').classList.remove('active')
                        //         this.parentNode.parentNode.querySelector('.inc_popup_product_description_bk').classList.add('active')
                        //     })

                        //     inc_popup_product_description_bk.appendChild(inc_popup_product_description_text)
                        //     inc_col_lection_module_product_bk.appendChild(inc_popup_product_description_bk)
                        // }

                        // if(r == 0){
                        //     inc_col_lection_module_bk.classList.add('active')
                        // }
                        //product slider on modal
                    }
                }
            }

            if (bestrating != 0) {
                INC_COL.methods.get_product_ratings_col(bestrating, inc_col_lection_Rating_bk);
            }

            inc_col_lection_regular_price.innerText = "";
            if (pr != sp && sp != 0) {
                var actprc = formatter.format(sp).replace('Kč', '').replace(',', '.').replace(/\s/g, '');
                var regpr = formatter.format(pr).replace('Kč', '').replace(',', '.').replace(/\s/g, '');
                inc_col_lection_active_price.parentNode.classList.add('is_special_price')
                // inc_col_lection_active_price.innerText = Math.round(actprc)  + ",00 Kč"
                // inc_col_lection_regular_price.innerHTML = Math.round(regpr)  + ",00 Kč"
                inc_col_lection_active_price.innerText = formatter.format(actprc)
                //  + ",00 Kč"
                inc_col_lection_regular_price.innerHTML = formatter.format(regpr)
                //  + ",00 Kč"

                var spec_text = generate_html_tag('span', 'special_text')
                spec_text.innerText = "Běžná cena"
                inc_col_lection_active_price.parentNode.insertBefore(spec_text, inc_col_lection_active_price)

                //promo
                var totalsaveprcplp = get_discount_price(pr, sp)
                var ec_promo_wrapper_div = document.createElement('div');
                ec_promo_wrapper_div.classList.add('pc_promo_hdr_div_col');
                ec_promo_wrapper_div.classList.add('inc_dual_promo_col')
                var ec_promo_hdr_div = document.createElement('div');
                ec_promo_hdr_div.classList.add('pc_promo_hdr_div_col');
                var ec_title_span = document.createElement('span');
                ec_title_span.classList.add('pc_title_span_col');
                ec_title_span.innerText = "Speciální nabídka";
                var ec_promo_div = document.createElement('div');
                ec_promo_div.classList.add('pc_promo_div_col')
                ec_promo_div.classList.add('inc_active')
                var ec_promo_span = document.createElement('span');
                ec_promo_span.classList.add('pc_promo_span_col')

                ec_promo_span.classList.add('red_promo_col')
                ec_promo_span.innerHTML = "<div class='collection_plp_promo'> <span>Save</span> " + "<div class='save_price_text_disc' style='margin-left: 4px;'>" + formatter.format(totalsaveprcplp) + " za tuto sadu</div></div>";
                ec_promo_hdr_div.appendChild(ec_title_span);
                ec_promo_div.appendChild(ec_promo_span);
                ec_promo_wrapper_div.appendChild(ec_promo_hdr_div);
                ec_promo_wrapper_div.appendChild(ec_promo_div)
                inc_col_lection_promo_bk.appendChild(ec_promo_wrapper_div)

            } else {
                inc_col_lection_regular_price.innerHTML = ""
                var actprc = formatter.format(pr).replace(',', '.').replace(/\s/g, '')
                inc_col_lection_active_price.innerText = actprc
            }

            var ComboImageURL = INC_COL.config.collection_combo_details[k].ComboImageURL
            var ComboProductURL = INC_COL.config.collection_combo_details[k].ComboProductURL
            var ComboTitle = INC_COL.config.collection_combo_details[k].ComboTitle.replace('with Accessory Bundle', 'kit')

            collection_combo_img_wrapper.setAttribute('href_c', ComboProductURL)
            collection_combo_img_wrapper.setAttribute('comboid', INC_COL.config.collection_combo_details[k].comboId)

            collection_combo_img_wrapper.addEventListener('click', function() {
                var hrefredirect = this.getAttribute('href_c')
                INC_COL.methods.sendBundleClickTracking(this.getAttribute('comboid'));
                window.location.href = hrefredirect
            })

            inc_col_lection_Name_text.innerText = ComboTitle
            inc_col_lection_Name_text.setAttribute('title', ComboTitle)
            collection_combo_img.setAttribute('src', ComboImageURL)
            inc_col_lection_Name_text.setAttribute('ComboProductURL', ComboProductURL)
            inc_col_lection_Name_text.setAttribute('href', ComboProductURL)
            inc_col_lection_Name_text.setAttribute('comboid', INC_COL.config.collection_combo_details[k].comboId)
            collection_combo_img.setAttribute('onerror', "this.src='" + INC_COL.config.noimage + "'");
            collection_combo_img.setAttribute('style', 'width: 100%;height: 100%;object-fit: contain;')
            var inc_col_lection_checkout_btn = generate_html_tag('a', 'inc_col_lection_checkout_btn');
            var inc_col_lection_checkout_btn_text = generate_html_tag('div', 'inc_col_lection_checkout_btn_text');
            inc_col_lection_checkout_btn_text.innerText = "Add To Bag"
            inc_col_lection_checkout_btn.appendChild(inc_col_lection_checkout_btn_text);

            // var product_id=INC_COL.config.collection_combo_details[k].collection_bundles[0].products[0]
            // var findObj = new INC_COL.classes.FindObj({ id: product_id });
            // var productObj = INC_COL.dataStore.methods().getProductById(findObj);

            var comboid = INC_COL.config.collection_combo_details[k].comboId
            var ComboImageURL = INC_COL.config.collection_combo_details[k].ComboImageURL
            var ComboProductURL = INC_COL.config.collection_combo_details[k].ComboProductURL
            var ComboTitle = INC_COL.config.collection_combo_details[k].ComboTitle.replace('with Accessory Bundle', 'kit')
            // var prodid=productObj.mainId
            // var p_url=""
            // p_url = "?&incgs=1&cid="+comboid+"&pid="+prodid
            inc_col_lection_checkout_btn.setAttribute('producturl', ComboProductURL)
            inc_col_lection_checkout_btn.setAttribute('href', ComboProductURL)
            inc_col_lection_checkout_btn.setAttribute('comboid', INC_COL.config.collection_combo_details[k].comboId)
            inc_col_lection_details_btn_bk.appendChild(inc_col_lection_checkout_btn);
            inc_col_lection_checkout_btn.addEventListener('click', function() {
                var hrefredirect = this.getAttribute('producturl')
                INC_COL.methods.sendBundleClickTracking(this.getAttribute('comboid'));
                window.location.href = hrefredirect
            })
        }
    }

    var plp_sibling = document.querySelector('.products-grid-wrap')
    var plp_mob = document.querySelector('#CategoryTools')
    var plp_mob1 = document.querySelector('.ProductListHeading')
    var plp_spec_cat = document.querySelector('.SpecialOffersBuyList')
    var plp_spl_elm = document.querySelector('#SpecialOfferDetail')
    var plpelmsib = document.querySelector('#MainContentWrapper .ProductListModule')
    if (plp_spl_elm != null) {
        inc_col_lection_bk.setAttribute('style', 'padding: 15px 10px;')
        plp_spl_elm.insertBefore(inc_col_lection_bk, plp_spl_elm.childNodes[0]);
    } else if (plp_spec_cat != null) {
        inc_col_lection_bk.setAttribute('style', 'padding: 15px 10px;')
        plp_spec_cat.parentNode.insertBefore(inc_col_lection_bk, plp_spec_cat);
    } else if (plpelmsib != null) {
        inc_col_lection_bk.setAttribute('style', 'padding: 15px 10px;')
        plpelmsib.insertBefore(inc_col_lection_bk, plpelmsib.childNodes[0]);
    } else if (plp_sibling != null) {
        plp_sibling.parentNode.insertBefore(inc_col_lection_bk, plp_sibling);
    }// else if(window.innerWidth > 600){
    //     plp_sibling.parentNode.insertBefore(inc_col_lection_bk, plp_sibling);
    // }
    else if (plp_mob != null) {
        plp_mob.parentNode.insertBefore(inc_col_lection_bk, plp_mob);
    } else if (plp_mob1 != null) {
        plp_mob1.parentNode.insertBefore(inc_col_lection_bk, plp_mob1);
    }

    irbobservload = true
}
INC_COL.methods.getMainProductDetails = function(blockEl, pdpBlockcol) {
    var descMainHTML = generate_html_tag('div', 'inc_col_desc_main_product_details_bk')
    descMainHTML.innerHTML = blockEl
    if (descMainHTML.querySelector('.inc_prd_variant_simple_bk') != null) {
        descMainHTML.querySelector('.inc_prd_variant_simple_bk').style.display = "none"
    }
    if (descMainHTML.querySelector('.inc_prd_desc_add_title_txt_bk') != null) {
        descMainHTML.querySelector('.inc_prd_desc_add_title_txt_bk').style.display = "none"
    }
    if (descMainHTML.querySelector('.inc_add_text') != null) {
        descMainHTML.querySelector('.inc_add_text').style.display = "none"
    }
    descMainHTML.querySelector('.inc_prd_desc_qty_bk').style.display = "none"
    var mainellink = descMainHTML.querySelector('.inc_prd_desc_title_txt a')
    mainellink.setAttribute('style', 'cursor: pointer;')
    var btntext = descMainHTML.querySelector('.inc_prd_add_text').innerText

    mainellink.addEventListener('click', function(e) {
        // e.preventDefault()
        // var href = document.querySelector('.inc_col_desc_main_product_details_bk .inc_prd_desc_title_txt a').href;
        // setTimeout(function(){
        //     window.open = href
        // },1000)
        var mainpdp = document.querySelector('.inc_product-main_bk .inc_prd_module_bk').getAttribute('data-main_id')
        INC_COL.methods.sendBundleClickTracking(mainpdp);
    })

    if (pdpBlockcol != null && pdpBlockcol != undefined) {
        if (pdpBlockcol.querySelector('.inc_col_desc_main_product_details_bk') == null) {
            var inserMainDetails = pdpBlockcol.querySelector('.inc_bd_prd_list_bk')
            var inserMainDetailsConfigurable = pdpBlockcol.querySelector('.inc_bd_prd_list_bk')
            var ProdConfig = pdpBlockcol.querySelector('.inc_product-main_bk .inc_prd_module_bk').classList.contains("configurable")
            if (ProdConfig == true) {
                inserMainDetailsConfigurable.parentNode.insertBefore(descMainHTML, inserMainDetailsConfigurable)
            } else {
                inserMainDetails.parentNode.insertBefore(descMainHTML, inserMainDetails)
            }
        } else {
            var elmainprod = pdpBlockcol.querySelector('.inc_col_desc_main_product_details_bk')
            elmainprod.parentNode.removeChild(elmainprod)
            var inserMainDetails = pdpBlockcol.querySelector('.inc_bd_prd_list_bk')
            var inserMainDetailsConfigurable = pdpBlockcol.querySelector('.inc_bd_prd_list_bk')
            var ProdConfig = pdpBlockcol.querySelector('.inc_product-main_bk .inc_prd_module_bk').classList.contains("configurable")
            if (ProdConfig == true) {
                inserMainDetailsConfigurable.parentNode.insertBefore(descMainHTML, inserMainDetailsConfigurable)
            } else {
                inserMainDetails.parentNode.insertBefore(descMainHTML, inserMainDetails)
            }

        }
    } else {
        if (document.querySelector('.inc_col_desc_main_product_details_bk') == null) {
            var inserMainDetails = document.querySelector('.inc_bd_prd_list_bk')
            inserMainDetails.parentNode.insertBefore(descMainHTML, inserMainDetails)
        } else {
            var elmainprod = document.querySelector('.inc_col_desc_main_product_details_bk')
            elmainprod.parentNode.removeChild(elmainprod)
            var inserMainDetails = document.querySelector('.inc_bd_prd_list_bk')
            var inserMainDetailsConfigurable = document.querySelector('.inc_bd_prd_list_bk')
            var ProdConfig = document.querySelector('.inc_product-main_bk .inc_prd_module_bk').classList.contains("configurable")
            if (ProdConfig == true) {
                inserMainDetailsConfigurable.parentNode.insertBefore(descMainHTML, inserMainDetailsConfigurable)
                if (inserMainDetailsConfigurable.parentNode.querySelectorAll('.inc_bd_prd_bk .inc_col_size_qty_details_bk select option')[1] != null) {
                    if (inserMainDetailsConfigurable.parentNode.querySelectorAll('.inc_bd_prd_bk .inc_col_size_qty_details_bk select option')[1].selected != null) {
                        inserMainDetailsConfigurable.parentNode.querySelectorAll('.inc_bd_prd_bk .inc_col_size_qty_details_bk select option')[1].selected = 'selected';
                    }
                }
            } else {
                inserMainDetails.parentNode.insertBefore(descMainHTML, inserMainDetails)
            }
        }
    }
}
INC_COL.methods.createcolPDPBundleCartBlock = function(pdpBlock) {
    var pdpBundleCartBlock = pdpBlock.querySelector('.inc_bd_cart_bk')
    var elBundleCartTitleBlock = pdpBlock.querySelector('.inc_bd_cart_title_bk')
    var elBundleCartTitleText = pdpBlock.querySelector('.inc_bd_cart_title_txt')
    var elBundleCartAddedBlock = pdpBlock.querySelector('.inc_bd_cart_added_bk')
    var elBundleCartSummaryViewBlock = pdpBlock.querySelector('.inc_bd_cart_smry_view_bk');
    var elBundleCartSummaryViewBtnText = pdpBlock.querySelector('.inc_bd_cart_smry_view_btn_text');
    var elBundleCartAddBtnBlock = pdpBlock.querySelector('.inc_bd_cart_smry_add_btn_bk');
    var elBundleCartAddBlock = pdpBlock.querySelector('.inc_bd_cart_smry_add_bk');
    var elBundleCartsummaryBlock = pdpBlock.querySelector('.inc_bd_cart_smry_bk');
    var elBundleCartTitleTextblock = pdpBlock.querySelector('.inc_bd_cart_title_txt_bk')
    elBundleCartTitleText.innerText = "Price Summary";
    elBundleCartAddedBlock.innerHTML = "";
    elBundleCartSummaryViewBtnText.innerText = "Added items";
    if (elBundleCartAddBtnBlock != null) {
        elBundleCartAddBtnBlock.addEventListener("click", function(e) {
            checkAddedProductInJustAddedcol()
            this.classList.add('inc_loading');
            INC_COL.clientConfig.offset = 0;
            INC_COL.clientConfig.slidevalue = 0;

            if (INC_COL.config.disablebtn == true) {
                var btn_cart = e.target
                INC_COL.config.disablebtn = false
                btn_cart.classList.add('inc_loading')
                btn_cart.parentNode.parentNode.classList.add('inc_loading')
                INC_COL.methods.addBundleToCartcol(btn_cart);
            }
        });
    }
    var elqtyb = pdpBlock.querySelector('.inc_prd_desc_qty_bk')
    var elqtyblock = generate_html_tag('div', 'inc_prd_desc_qty_bk')
    elqtyblock.style.display = "flex"
    elqtyblock.innerHTML = elqtyb.innerHTML
    elqtyblock.classList.add('singleqty')
    var mainelQtyInput = elqtyblock.querySelector('.inc_prd_desc_qty_input_text input')
    var mainelQtyDownBlock = elqtyblock.querySelector('.inc_prd_desc_qty_down_bk')
    var mainelQtyUpBlock = elqtyblock.querySelector('.inc_prd_desc_qty_up_bk')
    mainelQtyInput.setAttribute('pattern', '[0-9]');
    // mainelQtyInput.setAttribute("readonly", "");
    mainelQtyInput.setAttribute("onkeydown", "if(event.key==='.'){event.preventDefault();}");
    mainelQtyInput.setAttribute('onKeyPress', 'if(this.value.length==2) return false;');
    if (document.querySelector('.inc_product-main_bk input') != null) {
        var qtymain = document.querySelector('.inc_product-main_bk input').value
    } else {
        var qtymain = 1
    }
    if (qtymain == "" || qtymain == undefined) {
        qtymain = 1
    }
    mainelQtyInput.value = qtymain
    function inputqtyfn(ev) {
        var prod_showcase = document.querySelector('.inc_product-main_bk .inc_prd_showcase_bk')
        var prod_modal = document.querySelector('.inc_product-main_bk .inc_prd_modal_bk')
        var prod_cardmodule = document.querySelector('.inc_product-main_bk .inc_prd_module_bk')
        // if (mainelQtyInput.value.length == 0){
        setTimeout(function() {
            if (mainelQtyInput.value.length == 0)
                mainelQtyInput.value = 1;
            if (mainelQtyInput.value == 0)
                mainelQtyInput.value = 1;
            if (mainelQtyInput.value > 99)
                mainelQtyInput.value = 99;

            var id = prod_cardmodule.getAttribute('data-id');
            var qty = parseInt(mainelQtyInput.value);
            var main_id = prod_cardmodule.getAttribute('data-main_id');
            var bundle_id = prod_cardmodule.getAttribute('data-bundle_id');
            var pname = prod_cardmodule.querySelector('.inc_prd_desc_title_txt').textContent;
            var pprice = prod_cardmodule.querySelector('.inc_prd_desc_ecirp_active_text').textContent.replace('$', '');
            var combo_id = prod_cardmodule.getAttribute('data-comboid');
            var elmaineltext = prod_showcase.querySelector('.inc_prd_desc_add_text')
            prod_modal.querySelector('.inc_prd_desc_qty_input_bk input').value = mainelQtyInput.value
            prod_showcase.querySelector('.inc_prd_desc_qty_input_bk input').value = mainelQtyInput.value
            if (elmaineltext.textContent == INC_COL.config.AddedText) {
                INC_COL.methods.updatecolBundleCart({
                    sku: id,
                    qty: qty
                }, "add", main_id, bundle_id, pname, pprice, combo_id);
            }
        }, 50);
        // }
    }
    mainelQtyInput.addEventListener("keydown", function(event) {
        var keyCode = event.which || event.keyCode;
        if (keyCode === 13) {
            event.preventDefault();
        } else if (($.inArray(event.keyCode, incallowedKeys) !== -1) || (keyCode === 65 && (event.ctrlKey || event.metaKey)) || (keyCode >= 35 && keyCode <= 40)) {
            return;
        }
        var charValue = String.fromCharCode(keyCode)
          , valid = /^[0-9]+$/.test(charValue);
        if (!valid) {
            event.preventDefault();
        } else {
            inputqtyfn(event)
        }

        setTimeout(function() {
            if (mainelQtyInput.value == 1) {
                mainelQtyInput.parentNode.parentNode.parentNode.parentNode.classList.add('singleqty');
            } else {
                mainelQtyInput.parentNode.parentNode.parentNode.parentNode.classList.remove('singleqty');
            }
        }, 100);
    });
    mainelQtyInput.addEventListener('focusout', function(ev) {
        inputqtyfn(ev)
    });
    mainelQtyDownBlock.addEventListener('click', function() {
        var prod_showcase = document.querySelector('.inc_product-main_bk .inc_prd_showcase_bk')
        var prod_modal = document.querySelector('.inc_product-main_bk .inc_prd_modal_bk')
        var prod_cardmodule = document.querySelector('.inc_product-main_bk .inc_prd_module_bk')
        if (prod_cardmodule.querySelector('.inc_prd_modal_bk .inc_col_hdr_bk') != null) {
            prod_cardmodule.parentNode.querySelector('.inc_prd_modal_bk .inc_col_hdr_bk').click()
        }
        var elmaineltext = prod_showcase.querySelector('.inc_prd_desc_add_text')
        var prod_card = prod_showcase
        mainelQtyInput.value = (mainelQtyInput.value - 1 < 1) ? 1 : mainelQtyInput.value - 1;
        if (mainelQtyInput.value == 1) {
            mainelQtyInput.parentNode.parentNode.parentNode.parentNode.classList.add('singleqty');
        }
        prod_modal.querySelector('.inc_prd_desc_qty_input_bk input').value = mainelQtyInput.value
        prod_showcase.querySelector('.inc_prd_desc_qty_input_bk input').value = mainelQtyInput.value
        var id = prod_cardmodule.getAttribute('data-id');
        var qty = parseInt(mainelQtyInput.value);
        var main_id = prod_cardmodule.getAttribute('data-main_id');
        var bundle_id = prod_cardmodule.getAttribute('data-bundle_id');
        var pname = prod_cardmodule.querySelector('.inc_prd_desc_title_txt').textContent;
        var pprice = prod_cardmodule.querySelector('.inc_prd_desc_ecirp_active_text').textContent.replace('$', '');
        var combo_id = prod_cardmodule.getAttribute('data-comboid');
        if (elmaineltext.textContent == INC_COL.config.AddedText || elmaineltext.textContent == INC_COL.config.updateText || elmaineltext.textContent == INC_COL.config.AddedText || elmaineltext.textContent == INC_COL.config.UpdateText) {
            INC_COL.methods.updatecolBundleCart({
                sku: id,
                qty: qty
            }, "add", main_id, bundle_id, pname, pprice, combo_id);
        }
    });

    mainelQtyUpBlock.addEventListener('click', function() {
        var prod_showcase = document.querySelector('.inc_product-main_bk .inc_prd_showcase_bk')
        var prod_modal = document.querySelector('.inc_product-main_bk .inc_prd_modal_bk')
        var prod_cardmodule = document.querySelector('.inc_product-main_bk .inc_prd_module_bk')
        if (prod_cardmodule.querySelector('.inc_prd_modal_bk .inc_col_hdr_bk') != null) {
            prod_cardmodule.querySelector('.inc_prd_modal_bk .inc_col_hdr_bk').click()
        }
        var prod_card = prod_showcase
        mainelQtyInput.value = (parseInt(mainelQtyInput.value) + 1 > 99) ? 99 : parseInt(mainelQtyInput.value) + 1;

        if (mainelQtyInput.parentNode.parentNode.parentNode.parentNode.classList.contains('singleqty')) {
            mainelQtyInput.parentNode.parentNode.parentNode.parentNode.classList.remove('singleqty');
        }
        prod_modal.querySelector('.inc_prd_desc_qty_input_bk input').value = mainelQtyInput.value
        prod_showcase.querySelector('.inc_prd_desc_qty_input_bk input').value = mainelQtyInput.value
        var id = prod_cardmodule.getAttribute('data-id');
        var qty = parseInt(mainelQtyInput.value);
        var main_id = prod_cardmodule.getAttribute('data-main_id');
        var bundle_id = prod_cardmodule.getAttribute('data-bundle_id');
        var pname = prod_cardmodule.querySelector('.inc_prd_desc_title_txt').textContent;
        var pprice = prod_cardmodule.querySelector('.inc_prd_desc_ecirp_active_text').textContent.replace('$', '');
        var combo_id = prod_cardmodule.getAttribute('data-comboid');
        var elmaineltext = prod_showcase.querySelector('.inc_prd_desc_add_text')
        if (elmaineltext.textContent == INC_COL.config.AddedText || elmaineltext.textContent == INC_COL.config.updateText || elmaineltext.textContent == INC_COL.config.AddedText || elmaineltext.textContent == INC_COL.config.UpdateText) {
            INC_COL.methods.updatecolBundleCart({
                sku: id,
                qty: qty
            }, "add", main_id, bundle_id, pname, pprice, combo_id);
        }
    });
    elBundleCartAddBlock.parentNode.insertBefore(elqtyblock, elBundleCartAddBlock)
    return pdpBundleCartBlock;
}
INC_COL.methods.sendBundleClickTracking = function(productId) {
    var pageType = "";
    var core_productID = INC_COL.methods.getProductIdFromWebPage();
    switch (INC_COL.config.pageType) {
    case "pdpcollection":
        pageType = "107";
        break;
    case "productList":
        pageType = "101";
        break;
    case "cartPage":
        pageType = "103";
        break;
    case "ticket":
        pageType = "103";
        break;
    case "other":
        pageType = "101";
    }
    if (document.querySelector('.inc_col_sidebar_modal_bk.inc_active') == null && INC_COL.config.pageType == "pdpcollection") {
        pageType = "100";
    }
    if (document.querySelector('.header-gnav-cart__overlay.visible') == null && INC_COL.config.pageType == "pdpcollection") {
        pageType = "100"
    }
    if (document.querySelector('.header-gnav-cart__overlay.visible') != null && INC_COL.config.pageType == "pdpcollection") {
        pageType = "107"
    }
    //INC_COL.methods.trackingEventscol("bundleProductClickTracking", { "product_id": productId, "core_product_id": INC_COL.dataStore.pdpProductId }, pageType);
    INC_COL.methods.trackingEventscol("bundleProductClickTracking", {
        "product_id": productId,
        "core_product_id": core_productID
    }, pageType);
}
INC_COL.methods.createcolProductModuleBlock = function(pdpProductId, blockType, bundleProductListCheck, parentblock, mainprod) {
    if (INC_COL.dataStore.dataStoreObj.undefined == undefined) {
        var productModuleBlock = generate_html_tag('div', 'inc_prd_module_bk')
        var findObj = new INC_COL.classes.FindObj({
            id: pdpProductId
        });
        var productObj = INC_COL.dataStore.methods().getProductById(findObj);
        productModuleBlock.style.userSelect = "none";
        productModuleBlock.setAttribute('data-id', productObj.id);
        productModuleBlock.setAttribute('data-sku', productObj.sku);
        productModuleBlock.setAttribute('data-main_id', productObj.mainId);
        productModuleBlock.setAttribute('data-bundle_id', productObj.bundleId);
        productModuleBlock.setAttribute('data-comboId', productObj.comboId);
        productModuleBlock.classList.add(productObj.ProductType)

        var elProductShowcaseBlock = generate_html_tag('div', 'inc_prd_showcase_bk');
        elProductShowcaseBlock.innerHTML = showcase_productcard
        var elProductModalBlock = generate_html_tag('div', 'inc_prd_modal_bk');
        elProductModalBlock.innerHTML = modal_productcard
        if (elProductShowcaseBlock != null) {
            elProductShowcaseBlock.setAttribute('role', "contentinfo")
        }
        if (elProductModalBlock != null) {
            elProductModalBlock.setAttribute('role', "contentinfo")
        }
        var productShowcaseBlock = INC_COL.methods.createcolProductShowcaseBlock(pdpProductId, blockType, bundleProductListCheck, parentblock, elProductShowcaseBlock, mainprod);
        var productModalBlock = INC_COL.methods.createcolProductModalBlock(pdpProductId, blockType, bundleProductListCheck, parentblock, elProductModalBlock, mainprod);

        elProductShowcaseBlock.appendChild(productShowcaseBlock);
        elProductModalBlock.appendChild(productModalBlock);
        productModuleBlock.appendChild(elProductShowcaseBlock)
        productModuleBlock.appendChild(elProductModalBlock)
        return productModuleBlock;
    }
}

INC_COL.methods.createcolProductShowcaseBlock = function(pdpProductId, blockType, bundleProductListCheck, parentblock, elProductShowcaseBlock, mainprod) {
    var productBlock = elProductShowcaseBlock.querySelector('.inc_prd_bk')
    if (window.innerWidth < 820 && mainprod != "mainprod") {
        var add_html = productBlock.querySelector('.inc_prd_desc_qty_bk').innerHTML
        var add_sibling = productBlock.querySelector('.inc_prd_desc_att_variant_add_bk')
        var html_add_block = document.createElement('div');
        html_add_block.classList.add('inc_prd_desc_qty_bk')
        html_add_block.innerHTML = add_html
        var add_html_rem = productBlock.querySelector('.inc_prd_desc_qty_bk');
        add_html_rem.parentNode.removeChild(add_html_rem);
        add_sibling.parentNode.insertBefore(html_add_block, add_sibling)
    }
    var findObj = new INC_COL.classes.FindObj({
        id: pdpProductId
    });
    var productObj = INC_COL.dataStore.methods().getProductById(findObj);
    productBlock.setAttribute('data-id', productObj.id);
    productBlock.setAttribute('data-sku', productObj.sku);
    productBlock.setAttribute('data-main_id', productObj.mainId);
    productBlock.setAttribute('data-bundle_id', productObj.bundleId);
    productBlock.setAttribute('data-comboId', productObj.comboId);
    productBlock.setAttribute('data_main_variant', productObj.mainProdVariant);
    productBlock.setAttribute('data-category_name', productObj.categoryName);
    productBlock.setAttribute('product_type', productObj.ProductType);
    productBlock.classList.add(productObj.ProductType)

    var elHeaderInfoBlck = productBlock.querySelector('.inc_prd_info_main_bk');
    var elHeader = productBlock.querySelector('.inc_prd_hdr_main_bk');
    var elImgBlock = productBlock.querySelector('.inc_prd_img_bk');
    var elImgGalleryListBlock = productBlock.querySelector('.inc_prd_img_gallery_list_bk');
    var elTitleBlock = productBlock.querySelector('.inc_prd_desc_title_bk');
    var elTitleTextBlock = productBlock.querySelector('.inc_prd_desc_title_txt_bk');
    var elTitleText = productBlock.querySelector('.inc_prd_desc_title_txt');
    var elproductPriceBlock = productBlock.querySelector('.inc_prd_desc_ecirp_bk');
    var elproductPriceLabel = productBlock.querySelector('.inc_prd_ecirp_label_bk');
    var elPriceActiveText = productBlock.querySelector('.inc_prd_desc_ecirp_active_text');
    ;var elPriceActiveMsg = productBlock.querySelector('.inc_prd_desc_ecirp_active_text_msg');
    var elPriceRegularText = productBlock.querySelector('.inc_prd_desc_ecirp_regular_text');
    var eleditblock = productBlock.querySelector('.inc_prd_desc_att_edit_bk');
    var elAttBlock = productBlock.querySelector('.inc_prd_desc_att_bk');
    var elAttColorBlock = productBlock.querySelector('.inc_prd_desc_att_color_bk');
    var elAttColorTitleText = productBlock.querySelector('.inc_prd_desc_att_color_title_txt');
    var elAttColorTitleTextSelected = productBlock.querySelector('.inc_prd_desc_att_color_title_txt_selected');
    var elAttColorListBlock = productBlock.querySelector('.inc_prd_desc_att_color_list_bk');
    var elAttSizeBlock = productBlock.querySelector('.inc_prd_desc_att_size_bk');
    var elAttSizeTitleBlock = productBlock.querySelector('.inc_prd_desc_att_size_title_bk');
    var elAttSizeTitleText = productBlock.querySelector('.inc_prd_desc_att_size_title_txt');
    var elAttSizeTitleTextSelected = productBlock.querySelector('.inc_prd_desc_att_size_title_txt_selected');
    var elAttSizeListBlock = productBlock.querySelector('.inc_prd_desc_att_size_list_bk');
    var elAtt0ListBlock = productBlock.querySelector('.inc_prd_desc_att_zero_list_bk');
    var elAtt3ListBlock = productBlock.querySelector('.inc_prd_desc_att_third_list_bk');
    var elAtt4ListBlock = productBlock.querySelector('.inc_prd_desc_att_fourth_list_bk');
    var elbcprdname = productBlock.querySelector('.inc_breadcrumb_prd');

    var elAtt0Block = productBlock.querySelector('.inc_prd_desc_att_zero_bk');
    var elAtt3Block = productBlock.querySelector('.inc_prd_desc_att_third_bk');
    var elAtt4Block = productBlock.querySelector('.inc_prd_desc_att_fourth_bk');
    var elAtt0TitleTextSelected = productBlock.querySelector('.inc_prd_desc_att_zero_title_txt_selected');
    var elAtt0TitleText = productBlock.querySelector('.inc_prd_desc_att_zero_title_txt');
    var elAtt3TitleTextSelected = productBlock.querySelector('.inc_prd_desc_att_third_title_txt_selected');
    var elAtt3TitleText = productBlock.querySelector('.inc_prd_desc_att_third_title_txt');
    var elAtt4TitleTextSelected = productBlock.querySelector('.inc_prd_desc_att_fourth_title_txt_selected');
    var elAtt4TitleText = productBlock.querySelector('.inc_prd_desc_att_fourth_title_txt');
    var elQtyBlock = productBlock.querySelector('.inc_prd_desc_qty_bk');
    var elQtyInputText = productBlock.querySelector('.inc_prd_desc_qty_input_text');
    var elQtyDownBlock = productBlock.querySelector('.inc_prd_desc_qty_down_bk');
    var elQtyUpBlock = productBlock.querySelector('.inc_prd_desc_qty_up_bk');
    var elAddBlock = productBlock.querySelector('.inc_prd_desc_add_bk');
    var elAddText = productBlock.querySelector('.inc_prd_desc_add_text');
    var elAddImg = productBlock.querySelector('.inc_prd_desc_add_img');
    var elratingsBlock = productBlock.querySelector('.inc_prd_desc_ratings_bk');
    var elworthPrice = productBlock.querySelector('.inc_prd_desc_ecirp_worth_text');
    var eldetailsprodblock = productBlock.querySelector('.inc_prd_desc_att_details_bk');
    var eladdvarianttext = productBlock.querySelector('.inc_prd_variant_simple_text');
    var elconfigtitle = productBlock.querySelector('.inc_prd_desc_add_title_txt_bk');
    var elvariantaddbtn = productBlock.querySelector('.inc_prd_desc_att_variant_add_bk');
    var elvariantaddbtntext = productBlock.querySelector('.inc_prd_desc_att_variant_text');
    var elvariantviewdetails = productBlock.querySelector('.inc_prd_desc_att_variant_view_details_bk');
    var elvariantviewdetailstext = productBlock.querySelector('.inc_prd_desc_att_variant_view_details_text');
    var eldescblock = productBlock.querySelector('.inc_prd_desc_bk');
    var elbstxtblock = productBlock.querySelector('.inc_prd_bstxt_bk');
    var elvariantpopupclose = productBlock.querySelector('.inc_prd_desc_variant_popup_close_bk');
    var elselectoptaddbtn = productBlock.querySelector('.inc_prd_variant_simple_bk');
    var elsizetitleblock = productBlock.querySelector('.inc_prd_desc_att_zero_title_bk');
    var eldescrpionblock = productBlock.querySelector('.inc_prd_desc_bk');
    var elPackOfListBlock = productBlock.querySelector('.inc_prd_desc_pack_of_list_bk');
    var productDescQtyInputText = productBlock.querySelector('.inc_prd_desc_qty_input_text');
    var productDescQtyBlock = productBlock.querySelector('.inc_prd_desc_qty_bk');
    var productDescAddText = productBlock.querySelector('.inc_prd_add_text');
    var elQtyAddBtnBlock = productBlock.querySelector('.inc_prd_desc_qty_add_btn_bk');
    var eledit = productBlock.querySelector('.inc_prd_variant_simple_edit_text');
    var colproductHeaderMainBlockRating = productBlock.querySelector('.inc_prd_hdr_main_rating_bk');
    var colproductHeaderMainBlockTitle = productBlock.querySelector('.inc_prd_hdr_main_title_bk');
    var elproductHrdPriceBlock = productBlock.querySelector('.inc_prd_hrd_desc_ecirp_bk');
    var elproductHrdPriceLabel = productBlock.querySelector('.inc_prd_hrd_ecirp_label_bk');
    var elPriceHrdActiveText = productBlock.querySelector('.inc_prd_hrd_desc_ecirp_active_text');
    ;var elPriceHrdActiveMsg = productBlock.querySelector('.inc_prd_hrd_desc_ecirp_active_text_msg');
    var elPriceHrdRegularText = productBlock.querySelector('.inc_prd_hrd_desc_ecirp_regular_text');
    var elGalleryleftArrow = productBlock.querySelector('.inc_prd_img_gallery_left_bk');
    var elGalleryRightArrow = productBlock.querySelector('.inc_prd_img_gallery_right_bk');
    if (productObj.ProductType == 'simple') {// eledit.style.display="none"
    }
    if (mainprod == "mainprod") {
        if (productBlock.querySelector('.inc_prd_variant_simple_bk') != null) {
            productBlock.querySelector('.inc_prd_variant_simple_bk').style.display = "none"
        }
        if (productBlock.querySelector('.inc_prd_desc_add_title_txt_bk') != null) {
            productBlock.querySelector('.inc_prd_desc_add_title_txt_bk').style.display = "none"
        }
        if (productBlock.querySelector('.inc_add_text') != null) {
            productBlock.querySelector('.inc_add_text').style.display = "none"
        }
    }
    elQtyAddBtnBlock.classList.add(productObj.ProductType);
    // elproductPriceLabel.innerHTML = "SALE"

    elvariantpopupclose.addEventListener('click', function() {
        if (document.querySelector('.inc_prd_modal_bk.inc_active') == null && document.querySelector('.inc_sidebar_modal_bk.inc_active') == null) {
            document.querySelector('html').classList.remove('inc_overlay')
            document.querySelector('body').style.position = "relative"
            document.querySelector('body').style.overflow = "auto"
        }
        this.parentNode.classList.remove('inc_active')
        productBlock.classList.remove('show_overlay')
    });
    elHeaderInfoBlck.setAttribute('data-id', productObj.id);
    elHeaderInfoBlck.setAttribute('data-sku', productObj.sku);
    elHeaderInfoBlck.setAttribute('data-main_id', productObj.mainId);
    elHeaderInfoBlck.setAttribute('data-bundle_id', productObj.bundleId);
    elHeaderInfoBlck.setAttribute('data-comboId', productObj.comboId);

    elHeader.querySelector('.inc_prd_hdr_img_bk').addEventListener("click", function() {
        productBlock.parentNode.classList.remove("inc_active");
    });
    var elImgMainImg = elImgBlock.querySelector('.inc_prd_img_main_img');
    var elImgTag1 = generate_html_tag('img');
    elImgTag1.src = productObj.imageURLMain
    elImgTag1.setAttribute('data-src', productObj.imageURLMain)
    if (elImgTag1 == true) {
        elImgTag.src = productObj.imageURLMain
    }
    elImgTag1.setAttribute('onerror', "this.src='" + INC_COL.config.noimage + "'");
    elImgTag1.setAttribute('role', 'img')
    elImgTag1.setAttribute('aria-label', 'Image')
    elImgTag1.setAttribute('alt', productObj.nameMain)
    elImgTag1.setAttribute('data-mouseover', productObj["otherImageList"])
    elImgTag1.setAttribute('data-imageURL', productObj["imageURLMain"])
    var productLink = document.createElement('a');
    productLink.target = "_blank";
    productLink.setAttribute('rel', 'noopener noreferrer')
    productLink.href = productObj.url;
    productLink.appendChild(elImgTag1);
    productLink.setAttribute('otherImageList', productObj["otherImageList"])
    productLink.setAttribute('imageURL', productObj["imageURLMain"])
    add_swipee(productLink)

    elImgMainImg.appendChild(productLink);

    if (INC_COL.config.pdpPID == productObj.mainId) {
        productLink.addEventListener('click', function(e) {// if(blockType != "sidebar" || blockType != "am"){
        //     e.preventDefault();  
        // }else
        // if(mainprod != "mainprod"){
        // e.preventDefault();  
        // }
        })
    }

    // if (productBlock.parentNode.parentNode.parentNode.classList.contains('inc_pdp_product-main_bk') != true){
    if ((INC_COL.config.pageType == "pdpcollection" && window.innerWidth < 821 || blockType == "sidebar" || blockType == "am") && mainprod != "mainprod") {
        productLink.setAttribute("href", productObj.url);
        elImgMainImg.addEventListener("click", function() {
            INC_COL.methods.sendBundleClickTracking(productObj.mainId);
            var href = productBlock.querySelector('.inc_prd_desc_title_text a').href
            setTimeout(function() {
                window.location.href = href
            }, 1000)
            getTrackingPixel();
        });
    } else if (mainprod != "mainprod" && window.innerWidth > 820) {
        elImgMainImg.addEventListener("click", function(e) {
            e.preventDefault();
            if (document.querySelector('.inc_pdp_bk') != null) {
                var doc = document.querySelector('.inc_pdp_bk');
                inc_scroll_height = (window.pageYOffset || doc.scrollTop) - (doc.clientTop || 0);
            } else if (document.querySelector('.inc_af_bk') != null) {
                var doc = document.querySelector('.inc_af_bk');
                inc_scroll_height = (window.pageYOffset || doc.scrollTop) - (doc.clientTop || 0);
            }
            if (productBlock.parentNode.parentNode.querySelector('.inc_prd_modal_bk .inc_prd_header_bk') != null) {
                productBlock.parentNode.parentNode.querySelector('.inc_prd_modal_bk .inc_prd_header_bk').click()
            }
            Array.prototype.forEach.call(document.querySelectorAll('.inc_prd_modal_bk'), function(el) {
                el.classList.remove("inc_active");
            });
            if (document.querySelector('.inc_sidebar_modal_bk.inc_active') == null) {
                document.querySelector('html').classList.add('inc_overlay');
            }

            // productBlock.parentNode.parentNode.querySelector('.inc_prd_modal_bk .inc_product_hdr_title_bk_1').click()
            document.querySelector('html').classList.add('inc_overlay');
            if (document.querySelector('.sidebar_outer.sidebar_outer_active .inc_sidebar_modal_bk') != null) {
                document.querySelector('.sidebar_outer.sidebar_outer_active .inc_sidebar_modal_bk').classList.add('overflow_visible')
                document.querySelector('body').classList.add('inc_popup_open');
            }
            productBlock.parentNode.parentNode.querySelector('.inc_prd_modal_bk').classList.add("inc_active")
        });
    }
    elImgGalleryListBlock.innerHTML = "";
    if ((productObj.otherImageList != null) && productObj.otherImageList.length >= 1) {
        var otimg = 0
        if (productObj.otherImageList.length > 1) {
            productObj.otherImageList.forEach(function(otherImgURL) {
                otherImgURL = otherImgURL;
                var elImgGalleryListItemBlock = generate_html_tag('div', 'inc_prd_img_gallery_list_item_bk')
                var imglist = '<div class="inc_prd_img_gallery_list_item_img_bk"><div class="inc_prd_img_gallery_list_item_img"><img class="inc_lazy" data-src="' + otherImgURL + '" src="' + otherImgURL + '" role="img" aria-label="Image"  alt="' + productObj.name + '"></div></div><div class="inc_prd_img_gallery_list_item_text_bk"><div class="inc_prd_img_gallery_list_item_text"></div></div>'
                elImgGalleryListItemBlock.innerHTML = imglist

                var elImgGalleryListItemImg = elImgGalleryListItemBlock.querySelector('.inc_prd_img_gallery_list_item_img');

                var elOtherImgTag = elImgGalleryListItemBlock.querySelector('.inc_prd_img_gallery_list_item_img img')
                elOtherImgTag.src = otherImgURL
                elOtherImgTag.setAttribute('alt', productObj.name)
                elOtherImgTag.setAttribute('role', 'img')
                elOtherImgTag.setAttribute('aria-label', 'Image')
                elOtherImgTag.setAttribute('onerror', "this.src='" + INC_COL.config.noimage + "'");

                if (productObj.otherImageList.length > 4) {
                    elImgGalleryListItemImg.classList.add('OthImg4');
                }

                elImgGalleryListItemBlock.setAttribute('index', otimg)
                elImgGalleryListItemBlock.addEventListener("click", function() {
                    Array.prototype.forEach.call(productBlock.querySelectorAll('.inc_prd_img_gallery_list_item_bk'), function(galleryListItemBlock) {
                        galleryListItemBlock.classList.remove("inc_active");
                    });

                    elImgGalleryListItemBlock.classList.add("inc_active");

                    elImgMainImg.querySelector('img').src = otherImgURL;
                    elImgMainImg.querySelector('img').setAttribute('onerror', "this.src='" + INC_COL.config.noimage + "'");
                })
                elImgGalleryListBlock.appendChild(elImgGalleryListItemBlock);

                if (otimg == 0) {
                    elImgGalleryListItemBlock.classList.add('inc_active')
                }
                otimg++;
                if (productObj.otherImageList.length > 5) {
                    elImgGalleryListItemBlock.parentNode.classList.add("flex-start")
                }
            });
        } else {
            var elImgGalleryListItemBlock = generate_html_tag('div', 'inc_prd_img_gallery_list_item_bk')
            var imglist = '<div class="inc_prd_img_gallery_list_item_img_bk"><div class="inc_prd_img_gallery_list_item_img"><img class="inc_lazy" data-src="' + productObj.otherImageList + '" src="' + productObj.otherImageList + '" role="img" aria-label="Image"  alt="' + productObj.name + '"></div></div><div class="inc_prd_img_gallery_list_item_text_bk"><div class="inc_prd_img_gallery_list_item_text"></div></div>'
            elImgGalleryListItemBlock.innerHTML = imglist

            var elImgGalleryListItemImg = elImgGalleryListItemBlock.querySelector('.inc_prd_img_gallery_list_item_img');

            var elOtherImgTag = elImgGalleryListItemBlock.querySelector('.inc_prd_img_gallery_list_item_img img')
            elOtherImgTag.src = productObj.otherImageList
            elOtherImgTag.setAttribute('alt', productObj.name)
            elOtherImgTag.setAttribute('role', 'img')
            elOtherImgTag.setAttribute('aria-label', 'Image')
            elOtherImgTag.setAttribute('onerror', "this.src='" + INC_COL.config.noimage + "'");

            elImgGalleryListItemBlock.setAttribute('index', 0)
            elImgGalleryListItemBlock.addEventListener("click", function() {
                Array.prototype.forEach.call(productBlock.querySelectorAll('.inc_prd_img_gallery_list_item_bk'), function(galleryListItemBlock) {
                    galleryListItemBlock.classList.remove("inc_active");
                });

                elImgGalleryListItemBlock.classList.add("inc_active");

                elImgMainImg.querySelector('img').src = productObj.otherImageList;
                elImgMainImg.querySelector('img').setAttribute('onerror', "this.src='" + INC_COL.config.noimage + "'");
            })

            elImgGalleryListBlock.appendChild(elImgGalleryListItemBlock);
            elImgGalleryListBlock.classList.add('SingleImage')
            elImgGalleryListItemBlock.classList.add('inc_active')

            if (productObj.otherImageList.length > 5) {
                elImgGalleryListItemBlock.parentNode.classList.add("flex-start")
            }
        }

    }

    var sliderBtnCounter = 0;
    var prod_sl_c = 5
    // if (productObj.otherImageList.length > prod_sl_c) {
    //     productBlock.querySelector('.inc_af_right_btn_block').style.visibility = "visible";
    //     productBlock.querySelector('.inc_af_left_btn_block').style.visibility = "visible";
    //     productBlock.querySelector('.inc_af_left_btn_block').setAttribute("style", "pointer-events: none;opacity:0.5");
    //     productBlock.querySelector('.inc_af_right_btn_img').style.visibility = "visible";
    //     productBlock.querySelector('.inc_af_left_btn_img').style.visibility = "visible";
    //     productBlock.querySelector('.inc_af_left_btn_img').setAttribute("style", "pointer-events: none;opacity:0.5");
    // }
    // var cc_ount = 1;
    if (window.innerWidth > 768) {
        cc_ount = 5
    }
    elGalleryleftArrow.addEventListener("click", function(e) {
        sliderBtnCounter--;
        if (sliderBtnCounter == -1)
            sliderBtnCounter = 0;
        var all_p_length = productBlock.parentNode.parentNode.querySelectorAll('.inc_prd_showcase_bk .inc_prd_img_gallery_list_bk .inc_prd_img_gallery_list_item_bk').length
        if (INC_COL.clientConfig.slidevalue == -1)
            INC_COL.clientConfig.slidevalue = 0;
        var width_slide = ""

        if (window.innerWidth < 1440) {
            width_slide = 70
        } else {
            width_slide = 70
        }

        if (INC_COL.clientConfig.slidevalue > 0) {
            productBlock.parentNode.parentNode.querySelector('.inc_prd_showcase_bk .inc_prd_img_gallery_right_bk').setAttribute("style", "pointer-events: auto;opacity:1");
            productBlock.parentNode.parentNode.querySelector('.inc_prd_showcase_bk .inc_prd_img_gallery_right_btn_img').setAttribute("style", "pointer-events: auto;opacity:1");
            INC_COL.clientConfig.slidevalue--
            INC_COL.clientConfig.offset = (parseInt(INC_COL.clientConfig.offset) + width_slide) + 'px';
            var menu = productBlock.parentNode.parentNode.querySelector('.inc_prd_showcase_bk .inc_prd_img_gallery_list_bk');
            menu.setAttribute('style', 'margin-top:' + INC_COL.clientConfig.offset + ';transition-duration:0.5s;-webkit-transition-duration:0.5s;-moz-transition-duration:0.5s;-ms-transition-duration:0.5s;-o-transition-duration:0.5s;')
            if (document.querySelector('.inc_prd_showcase_bk .inc_prd_img_gallery_list_bk .inc_prd_img_gallery_list_item_bk.inc_active') != null) {
                document.querySelector('.inc_prd_showcase_bk .inc_prd_img_gallery_list_bk .inc_prd_img_gallery_list_item_bk.inc_active').classList.remove('inc_active')
            }
            if (document.querySelectorAll('.inc_af_main_block .inc_af_product-list-dots-main_block .inc_dots')[+INC_COL.clientConfig.slidevalue] != null)
                document.querySelectorAll('.inc_af_main_block .inc_af_product-list-dots-main_block .inc_dots')[+INC_COL.clientConfig.slidevalue].classList.add('inc_active')
        }
        if (INC_COL.clientConfig.slidevalue == 0) {
            productBlock.parentNode.parentNode.querySelector('.inc_prd_showcase_bk .inc_prd_img_gallery_left_bk').setAttribute("style", "pointer-events: none;opacity:0.5");
            productBlock.parentNode.parentNode.querySelector('.inc_prd_showcase_bk .inc_prd_img_gallery_left_btn_img').setAttribute("style", "pointer-events: none;opacity:0.5");
        }
    });

    elGalleryRightArrow.addEventListener("click", function(e) {
        sliderBtnCounter++;
        if (sliderBtnCounter > productObj.otherImageList.length - 1) {
            sliderBtnCounter--;
        }
        var all_p_length = productBlock.parentNode.parentNode.querySelectorAll('.inc_prd_showcase_bk .inc_prd_img_gallery_list_bk .inc_prd_img_gallery_list_item_bk').length
        // var cc_ount = 1;
        if (window.innerWidth > 768) {
            cc_ount = 5
        }
        var width_slide = ""
        if (window.innerWidth < 1440) {
            width_slide = 70
        } else {
            width_slide = 70
        }
        if (+INC_COL.clientConfig.slidevalue + +cc_ount < all_p_length) {
            productBlock.parentNode.parentNode.querySelector('.inc_prd_showcase_bk .inc_prd_img_gallery_left_bk').setAttribute("style", "pointer-events: auto;opacity:1");
            productBlock.parentNode.parentNode.querySelector('.inc_prd_showcase_bk .inc_prd_img_gallery_left_btn_img').setAttribute("style", "pointer-events: auto;opacity:1");
            INC_COL.clientConfig.slidevalue++
            INC_COL.clientConfig.offset = (parseInt(INC_COL.clientConfig.offset) - width_slide) + 'px';
            var menu = productBlock.parentNode.parentNode.querySelector('.inc_prd_showcase_bk .inc_prd_img_gallery_list_bk');
            menu.setAttribute('style', 'margin-top:' + INC_COL.clientConfig.offset + ';transition-duration:0.5s;-webkit-transition-duration:0.5s;-moz-transition-duration:0.5s;-ms-transition-duration:0.5s;-o-transition-duration:0.5s;')
            if (document.querySelector('.inc_prd_showcase_bk .inc_prd_img_gallery_list_bk .inc_prd_img_gallery_list_item_bk.inc_active') != null) {
                document.querySelector('.inc_prd_showcase_bk .inc_prd_img_gallery_list_bk .inc_prd_img_gallery_list_item_bk.inc_active').classList.remove('inc_active')
            }
            if (document.querySelectorAll('.inc_af_main_block .inc_af_product-list-dots-main_block .inc_dots')[+INC_COL.clientConfig.slidevalue] != null)
                document.querySelectorAll('.inc_af_main_block .inc_af_product-list-dots-main_block .inc_dots')[+INC_COL.clientConfig.slidevalue].classList.add('inc_active')
        }

        if (+INC_COL.clientConfig.slidevalue + +cc_ount == all_p_length) {
            productBlock.parentNode.parentNode.querySelector('.inc_prd_showcase_bk .inc_prd_img_gallery_right_bk').setAttribute("style", "pointer-events: none;opacity:0.5");
            productBlock.parentNode.parentNode.querySelector('.inc_prd_showcase_bk .inc_prd_img_gallery_right_btn_img').setAttribute("style", "pointer-events: none;opacity:0.5");
        }
    });

    if ((productObj.otherImageList == null) || productObj.otherImageList.length <= 5) {
        elGalleryRightArrow.style.display = "none"
        elGalleryleftArrow.style.display = "none"
    }

    if ((INC_COL.config.pageType == "pdpcollection" && window.innerWidth < 821 || blockType == "sidebar" || blockType == "am") && mainprod != "mainprod") {
        elTitleTextBlock.addEventListener("click", function(e) {
            INC_COL.methods.sendBundleClickTracking(productObj.mainId);
            getTrackingPixel();
            var href = productBlock.querySelector('.inc_prd_desc_title_text a').href
            setTimeout(function() {
                window.location.href = href
            }, 1000)
        });
    } else if (mainprod != "mainprod" && window.innerWidth > 820) {
        elTitleTextBlock.addEventListener("click", function(e) {
            e.preventDefault();
            if (document.querySelector('.inc_pdp_bk') != null) {
                var doc = document.querySelector('.inc_pdp_bk');
                inc_scroll_height = (window.pageYOffset || doc.scrollTop) - (doc.clientTop || 0);
            } else if (document.querySelector('.inc_af_bk') != null) {
                var doc = document.querySelector('.inc_af_bk');
                inc_scroll_height = (window.pageYOffset || doc.scrollTop) - (doc.clientTop || 0);
            }
            if (productBlock.parentNode.parentNode.querySelector('.inc_prd_modal_bk .inc_prd_header_bk') != null) {
                productBlock.parentNode.parentNode.querySelector('.inc_prd_modal_bk .inc_prd_header_bk').click()
            }
            Array.prototype.forEach.call(document.querySelectorAll('.inc_prd_modal_bk'), function(el) {
                el.classList.remove("inc_active");
            });

            // productBlock.parentNode.parentNode.querySelector('.inc_prd_modal_bk .inc_product_hdr_title_bk_1').click()
            document.querySelector('html').classList.add('inc_overlay');
            if (document.querySelector('.sidebar_outer.sidebar_outer_active .inc_sidebar_modal_bk') != null) {
                document.querySelector('.sidebar_outer.sidebar_outer_active .inc_sidebar_modal_bk').classList.add('overflow_visible')
                document.querySelector('body').classList.add('inc_popup_open');
            }
            productBlock.parentNode.parentNode.querySelector('.inc_prd_modal_bk').classList.add("inc_active")
            setTimeout(function() {
                if (document.querySelector('.inc_prd_modal_bk.inc_active') != null)
                    document.querySelector('html').classList.add('inc_overlay');
            }, 300)
        });
    }

    var pTitleDiv = document.createElement('div');

    if (window.innerWidth < 821 && mainprod == "mainprod" && INC_COL.config.pageType == "pdpcollection") {
        pTitleDiv.innerHTML = "<strong>This item </strong>" + productObj.nameMain;
    } else {
        pTitleDiv.innerHTML = productObj.nameMain;
    }
    if (mainprod == "mainprod") {
        // if (document.querySelector('.inc_breadcrumb_prd') != null){
        INC_COL.config.MainPrdName = productObj.combotitle;
        // }
    }
    var field1 = productObj.ratingsCount
    var field2 = productObj.reviewsCount
    INC_COL.methods.get_product_ratingscol(field1, field2, elratingsBlock);
    if (window.innerWidth < 820) {
        INC_COL.methods.get_product_ratingscol(field1, field2, colproductHeaderMainBlockRating);
    }

    // if(window.innerWidth > 820){
    var pLink = document.createElement('a');
    if (blockType == "pdpcollection" && mainprod == "mainprod") {
        pLink.setAttribute('style', 'cursor: default;text-decoration: none;')
    } else {
        pLink.setAttribute('style', 'cursor: default;text-decoration: none;')
    }
    if (window.innerWidth > 820) {
        pLink.setAttribute("target", "_blank");
    }
    pLink.href = productObj.url;
    if (mainprod == "mainprod") {
        pLink.addEventListener('click', function(e) {
            INC_COL.methods.sendBundleClickTracking(productObj.mainId);
            getTrackingPixel();
            // if(window.innerWidth < 821){
            // e.preventDefault()
            // }
        })
    }
    pLink.setAttribute('style', 'text-transform: unset;')
    pLink.setAttribute('title', productObj.nameMain)
    pLink.appendChild(pTitleDiv);
    elTitleText.appendChild(pLink);
    // }
    if (window.innerWidth < 820) {
        console.log("mobile working")
        var pLinkModal = document.createElement('a');
        pLinkModal.setAttribute("title", productObj.nameMain);
        pLinkModal.setAttribute("href", productObj.url);
        pLinkModal.setAttribute("target", "_blank");
        pLinkModal.innerText = productObj.nameMain;
        colproductHeaderMainBlockTitle.appendChild(pLinkModal)
    }
    if (mainprod == "mainprod" && (window.location.href.indexOf('incgs=2') >= 0 || window.location.href.indexOf('incgs=1') >= 0 || window.location.href.indexOf('incgs=3') >= 0)) {
        pTitleDiv.innerHTML = productObj.combotitle
        //+ " - Pack of " + INC_COL.config.collectioncount;
        elImgTag1.src = productObj.comboimg
    }
    if (productObj.PromotionalMessage != 'null' && productObj.PromotionalMessage != "" && productObj.PromotionalMessage != undefined) {
        productBlock.querySelector('.pc_promo_div').classList.remove('empty');
        productBlock.querySelector('.pc_promo_div').setAttribute('style', "display:block");
        productBlock.querySelector('.pc_promo_div').innerHTML = "OFFER";
    }

    var activePrice = parseFloat(productObj.activePriceMain * INC_COL.config.collectioncount).toFixed(2).toString();
    var regularPrice = parseFloat(productObj.regularPriceMain * INC_COL.config.collectioncount).toFixed(2).toString();
    var totalsaveprc = get_discount_price(productObj.regularPriceMain * INC_COL.config.collectioncount, productObj.activePriceMain * INC_COL.config.collectioncount)
    var totalsaveper = get_discount_price_percentage(productObj.regularPriceMain * INC_COL.config.collectioncount, productObj.activePriceMain * INC_COL.config.collectioncount)
    var fromTxt = generate_html_tag('span', 'fromTxt');
    var actPrc = elPriceActiveText.parentNode.parentNode
    elPriceRegularText.textContent = "";
    if (activePrice != regularPrice && regularPrice != "" && regularPrice != null && regularPrice != 0) {
        elPriceActiveText.parentNode.parentNode.parentNode.classList.add('is_special_ecirp')
        elPriceActiveText.innerHTML = formatter.format(activePrice)
        elPriceHrdActiveText.innerHTML = formatter.format(activePrice)
        elPriceRegularText.innerHTML = INC_COL.clientConfig.regularPricePrefix + formatter.format(regularPrice)
        elPriceHrdRegularText.innerHTML = INC_COL.clientConfig.regularPricePrefix + formatter.format(regularPrice);
        if (totalsaveper > 0) {
            elworthPrice.innerHTML = "<span>You save</span> " + formatter.format(totalsaveprc);
        }
    } else {
        elPriceActiveText.innerHTML = formatter.format(activePrice)
        elPriceHrdActiveText.innerHTML = formatter.format(activePrice)
        elworthPrice.innerHTML = ""
    }
    if (window.innerWidth < 821) {
        var inc_empty_popup = generate_html_tag('div', 'inc_empty_popup');
        eldetailsprodblock.appendChild(inc_empty_popup);
    }
    if (blockType == "am") {
        productDescAddText.innerText = "Add"
    } else if (blockType == "sidebar") {
        productDescAddText.innerText = "Add"
    } else {
        productDescAddText.innerText = "Add"
    }
    productDescAddText.addEventListener('click', function() {
        this.parentNode.parentNode.parentNode.querySelector('.inc_prd_desc_add_bk').click()
    });
    var elQtyInput = generate_html_tag('input');
    elQtyInput.setAttribute('type', "number");
    elQtyInput.setAttribute('aria-label', "quantity");
    elQtyInput.setAttribute('min', 1);
    elQtyInput.setAttribute('max', 999);
    elQtyInput.setAttribute('maxlength', 3);
    elQtyInput.value = 1;
    elQtyInput.setAttribute('old_qty', '1');
    elQtyInput.setAttribute('pattern', '/^-?\d+\.?\d*$/');
    elQtyInput.setAttribute("onkeydown", "if(event.key==='.'){event.preventDefault();}");
    elQtyInput.setAttribute('onKeyPress', 'if(this.value.length==3) return false;');
    elQtyInput.setAttribute("oninput", "validity.valid||(value='');");
    // elQtyInput.setAttribute('readOnly', '');
    elQtyInput.addEventListener("keydown", function(event) {
        var old_qty = this.value
        var keyCode = event.which || event.keyCode;
        if (keyCode === 13) {
            event.preventDefault();
        } else if (($.inArray(event.keyCode, incallowedKeys) !== -1) || (keyCode === 65 && (event.ctrlKey || event.metaKey)) || (keyCode >= 35 && keyCode <= 40)) {
            return;
        }
        var charValue = String.fromCharCode(keyCode)
          , valid = /^[0-9]+$/.test(charValue);
        if (!valid) {
            event.preventDefault();
        } else {
            setTimeout(function() {
                if (elQtyInput.value.length == 0)
                    elQtyInput.value = 1;
                if (elQtyInput.value == 0)
                    elQtyInput.value = 1;
                if (elQtyInput.value > 8)
                    elQtyInput.value = 8;

                var productModuleBlock = productBlock.parentNode.parentNode;
                var showcaseProductBlock = productModuleBlock.querySelector('.inc_prd_showcase_bk').querySelector('.inc_prd_bk');
                var modalProductBlock = productModuleBlock.querySelector('.inc_prd_modal_bk').querySelector('.inc_prd_bk')
                showcaseProductBlock.querySelector('.inc_prd_desc_qty_bk').querySelector('input').value = parseInt(elQtyInput.value);
                modalProductBlock.querySelector('.inc_prd_desc_qty_input_text input').value = parseInt(elQtyInput.value);

                var id = productBlock.getAttribute('data-id');
                var qty = parseInt(elQtyInput.value);
                var main_id = productBlock.getAttribute('data-main_id');
                var bundle_id = productBlock.getAttribute('data-bundle_id');
                var combo_id = productBlock.getAttribute('data-comboid');
                var pname = productBlock.querySelector('.inc_prd_desc_title_txt').textContent;
                var pprice = productBlock.querySelector('.inc_prd_desc_ecirp_active_text').textContent.replace('£', '');
                if (elAddText.textContent == 'Added' || elAddText.textContent == "Update") {
                    INC_COL.methods.updatecolBundleCart({
                        sku: id,
                        qty: qty
                    }, "add", main_id, bundle_id, pname, pprice, combo_id);
                }
                if (elQtyInput.value == 1) {
                    elQtyBlock.classList.add('singleqty')
                } else {
                    elQtyBlock.classList.remove('singleqty')
                }
                if (productBlock.parentNode.parentNode.parentNode.classList.contains('inc_pdp_product-main_bk') == true) {
                    var bundleblock = productBlock.parentNode.parentNode.parentNode.parentNode.parentNode
                    if (bundleblock.classList.contains('inc_pdp_bundle_bk') == true) {
                        INC_COL.methods.updateallbasketprice(bundleblock)
                    }
                } else if (productBlock.parentNode.parentNode.parentNode.classList.contains('inc_pdp_product-main_bk') == false) {
                    var bundleblock = productBlock.parentNode.parentNode.parentNode.parentNode.parentNode.parentNode.parentNode
                    if (bundleblock.classList.contains('inc_pdp_bundle_bk') == true) {
                        INC_COL.methods.updateallbasketprice(bundleblock)
                    }
                }
            }, 50);
        }
    });
    elQtyInput.addEventListener('focusout', function(ev) {
        var old_qty = this.value
        var elm = ev.currentTarget
        if (elm.tagName != "INPUT") {
            elm = elm.querySelector('input')
        }
        var prod_card = elm.parentNode.parentNode.parentNode.parentNode.parentNode.parentNode.parentNode.parentNode.parentNode.parentNode
        if (prod_card.classList.contains('inc_prd_showcase_bk') == true) {
            prod_card = elm.parentNode.parentNode.parentNode.parentNode.parentNode.parentNode.parentNode.parentNode.parentNode.parentNode.parentNode
        }
        // if (elm.value.length == 0) {
        setTimeout(function() {
            if (elQtyInput.value.length == 0)
                elQtyInput.value = 1;
            if (elQtyInput.value == 0)
                elQtyInput.value = 1;
            if (elQtyInput.value > 8)
                elQtyInput.value = 8;

            var productModuleBlock = productBlock.parentNode.parentNode;
            var productModuleBlock = productBlock.parentNode.parentNode;
            var showcaseProductBlock = productModuleBlock.querySelector('.inc_prd_showcase_bk').querySelector('.inc_prd_bk');
            var modalProductBlock = productModuleBlock.querySelector('.inc_prd_modal_bk').querySelector('.inc_prd_bk')
            showcaseProductBlock.querySelector('.inc_prd_desc_qty_bk').querySelector('input').value = parseInt(elQtyInput.value);
            modalProductBlock.querySelector('.inc_prd_desc_qty_input_text input').value = parseInt(elQtyInput.value);

            var id = productBlock.getAttribute('data-id');
            var qty = parseInt(elQtyInput.value);
            var main_id = productBlock.getAttribute('data-main_id');
            var bundle_id = productBlock.getAttribute('data-bundle_id');
            var combo_id = productBlock.getAttribute('data-comboid');
            var pname = productBlock.querySelector('.inc_prd_desc_title_txt').textContent;
            var pprice = productBlock.querySelector('.inc_prd_desc_ecirp_active_text').textContent.replace('£', '');
            if (elAddText.textContent == 'Added' || elAddText.textContent == "Update") {
                INC_COL.methods.updatecolBundleCart({
                    sku: id,
                    qty: qty
                }, "add", main_id, bundle_id, pname, pprice, combo_id);
            }
            if (elQtyInput.value == 1) {
                elQtyBlock.classList.add('singleqty')
            }

            if (productBlock.parentNode.parentNode.parentNode.classList.contains('inc_pdp_product-main_bk') == true) {
                var bundleblock = productBlock.parentNode.parentNode.parentNode.parentNode.parentNode
                if (bundleblock.classList.contains('inc_pdp_bundle_bk') == true) {
                    INC_COL.methods.updateallbasketprice(bundleblock)
                }
            } else if (productBlock.parentNode.parentNode.parentNode.classList.contains('inc_pdp_product-main_bk') == false) {
                var bundleblock = productBlock.parentNode.parentNode.parentNode.parentNode.parentNode.parentNode.parentNode
                if (bundleblock.classList.contains('inc_pdp_bundle_bk') == true) {
                    INC_COL.methods.updateallbasketprice(bundleblock)
                }
            }
        }, 50);
        // }
    });

    productDescQtyInputText.appendChild(elQtyInput);

    var added_text = document.createElement('span');
    added_text.classList.add("inc_add_text");
    productDescQtyInputText.appendChild(added_text);
    if (window.innerWidth < 820) {
        added_text.style.display = "none"
    }
    elQtyDownBlock.addEventListener('click', function() {
        var prod_card = elQtyInput.parentNode.parentNode.parentNode.parentNode.parentNode.parentNode.parentNode.parentNode.parentNode.parentNode
        elQtyInput.value = (elQtyInput.value - 1 < 1) ? 1 : elQtyInput.value - 1;
        var productModuleBlock = productBlock.parentNode.parentNode;
        var showcaseProductBlock = productModuleBlock.querySelector('.inc_prd_showcase_bk').querySelector('.inc_prd_bk');
        var modalProductBlock = productModuleBlock.querySelector('.inc_prd_modal_bk').querySelector('.inc_prd_bk')

        showcaseProductBlock.querySelector('.inc_prd_desc_qty_bk').querySelector('input').value = parseInt(elQtyInput.value);
        modalProductBlock.querySelector('.inc_prd_desc_qty_input_text input').value = parseInt(elQtyInput.value);

        var id = productBlock.getAttribute('data-id');
        var sku = productBlock.getAttribute('data-sku');
        var qty = parseInt(elQtyInput.value);
        var bundle_id = productBlock.getAttribute('data-bundle_id');
        var main_id = productBlock.getAttribute('data-main_id');
        var combo_id = productBlock.getAttribute('data-comboid');
        var pname = productBlock.querySelector('.inc_prd_desc_title_txt').innerText;
        var pprice = productBlock.querySelector('.inc_prd_desc_ecirp_active_text').innerText.replace('£', '');
        if (parseInt(elQtyInput.value) == 1 && productDescQtyBlock.classList.contains('singleqty') == true) {
            if (elAddText.textContent == "Added" || elAddText.textContent == "Update" || elAddText.textContent == INC_COL.config.AddedText || elAddText.textContent == INC_COL.config.UpdateText) {
                document.querySelector('html').classList.remove('inc_overlay')
                var modal_blck = productModuleBlock.querySelector('.inc_prd_modal_bk')
                var showcase_blck = productModuleBlock.querySelector('.inc_prd_showcase_bk')
                var elAddTextshowcase = showcase_blck.querySelector('.inc_prd_desc_add_text')
                var elAddTextmodal = modal_blck.querySelector('.inc_prd_desc_add_text')
                if (INC_COL.config.pageType == "pdpcollection" && blockType == "pdpcollection")
                    INC_COL.methods.updatecolBundleCart({
                        sku: id,
                        qty: qty
                    }, "add", main_id, bundle_id, pname, pprice, combo_id);
            }
        } else {
            if (elAddText.textContent == "Added" || elAddText.textContent == "Update" || elAddText.textContent == INC_COL.config.AddedText || elAddText.textContent == INC_COL.config.UpdateText) {
                INC_COL.methods.updatecolBundleCart({
                    sku: id,
                    qty: qty
                }, "add", main_id, bundle_id, pname, pprice, combo_id);
            }
        }
        if (elQtyInput.value == 1) {
            elQtyBlock.classList.add('singleqty')
            productModuleBlock.querySelector('.inc_prd_showcase_bk .inc_prd_desc_qty_bk').classList.add('singleqty')
            productModuleBlock.querySelector('.inc_prd_showcase_bk .inc_prd_desc_qty_bk').classList.add('singleqty')
            modalProductBlock.querySelector('.inc_prd_desc_qty_input_text input').parentNode.parentNode.parentNode.parentNode.classList.add('singleqty');
        }
        setTimeout(function() {
            if (productBlock.parentNode.parentNode.parentNode.classList.contains('inc_pdp_product-main_bk') == true) {
                var bundleblock = productBlock.parentNode.parentNode.parentNode.parentNode.parentNode
                if (bundleblock.classList.contains('inc_pdp_bundle_bk') == true) {
                    INC_COL.methods.updateallbasketprice(bundleblock)
                }
            } else if (productBlock.parentNode.parentNode.parentNode.classList.contains('inc_pdp_product-main_bk') == false) {
                var bundleblock = productBlock.parentNode.parentNode.parentNode.parentNode.parentNode.parentNode.parentNode
                if (bundleblock.classList.contains('inc_pdp_bundle_bk') == true) {
                    INC_COL.methods.updateallbasketprice(bundleblock)
                }
            }
        }, 200)
    });

    elQtyUpBlock.addEventListener('click', function() {
        var prod_card = elQtyInput.parentNode.parentNode.parentNode.parentNode.parentNode.parentNode.parentNode.parentNode.parentNode
        elQtyInput.value = (parseInt(elQtyInput.value) + 1 > 8) ? 8 : parseInt(elQtyInput.value) + 1;
        var productModuleBlock = productBlock.parentNode.parentNode;
        var showcaseProductBlock = productModuleBlock.querySelector('.inc_prd_showcase_bk').querySelector('.inc_prd_bk');
        var modalProductBlock = productModuleBlock.querySelector('.inc_prd_modal_bk').querySelector('.inc_prd_bk')

        showcaseProductBlock.querySelector('.inc_prd_desc_qty_bk').querySelector('input').value = parseInt(elQtyInput.value);
        modalProductBlock.querySelector('.inc_prd_desc_qty_input_text input').value = parseInt(elQtyInput.value);

        modalProductBlock.querySelector('.inc_prd_desc_qty_input_text input').parentNode.parentNode.parentNode.parentNode.classList.remove('singleqty');

        productDescQtyBlock.classList.remove('singleqty')
        productModuleBlock.querySelector('.inc_prd_showcase_bk .inc_prd_desc_qty_bk').classList.remove('singleqty')
        var id = productBlock.getAttribute('data-id');
        var qty = parseInt(elQtyInput.value);
        var bundle_id = productBlock.getAttribute('data-bundle_id');
        var combo_id = productBlock.getAttribute('data-comboid');
        var main_id = productBlock.getAttribute('data-main_id');
        var pname = productBlock.querySelector('.inc_prd_desc_title_txt').innerText;
        var pprice = productBlock.querySelector('.inc_prd_desc_ecirp_active_text').innerText.replace('£', '');
        if (elAddText.textContent == "Added" || elAddText.textContent == "Update" || elAddText.textContent == INC_COL.config.AddedText || elAddText.textContent == INC_COL.config.UpdateText) {
            INC_COL.methods.updatecolBundleCart({
                sku: id,
                qty: qty
            }, "add", main_id, bundle_id, pname, pprice, combo_id);
        }
        setTimeout(function() {
            if (productBlock.parentNode.parentNode.parentNode.classList.contains('inc_pdp_product-main_bk') == true) {
                var bundleblock = productBlock.parentNode.parentNode.parentNode.parentNode.parentNode
                if (bundleblock.classList.contains('inc_pdp_bundle_bk') == true) {
                    INC_COL.methods.updateallbasketprice(bundleblock)
                }
            } else if (productBlock.parentNode.parentNode.parentNode.classList.contains('inc_pdp_product-main_bk') == false) {
                var bundleblock = productBlock.parentNode.parentNode.parentNode.parentNode.parentNode.parentNode.parentNode
                if (bundleblock.classList.contains('inc_pdp_bundle_bk') == true) {
                    INC_COL.methods.updateallbasketprice(bundleblock)
                }
            }
        }, 200)
    });

    var elPackOfArrray = [];
    var qty_c = 8
    if (document.querySelectorAll('select[name="quantity"] option') != null && blockType == "pdp" && productObj.mainId == INC_COL.methods.getProductIdFromWebPage()) {
        qty_c = document.querySelectorAll('select[name="quantity"] option').length
    }
    // for (var i = 0; i < qty_c; i++) elPackOfArrray.push(i);
    // elPackOfArrray.forEach(function(i) {
    //     //inc_prd_desc_pack_of_item_bk
    //     //inc_prd_desc_pack_of_item_quantity_text
    //     var elPackOfItemBlock1 = generate_html_tag('div','inc_prd_desc_pack_of_item_bk');
    //     var packtext = generate_html_tag('div','inc_prd_desc_pack_of_item_quantity_text')
    //     elPackOfItemBlock1.appendChild(packtext)
    //     packtext.innerText = i + 1;
    //     elPackOfListBlock.appendChild(elPackOfItemBlock1);

    //     elPackOfItemBlock1.addEventListener("click", function() { 
    //         elQtyInput.value = i + 1;
    //         var sku = productBlock.getAttribute('data-sku');
    //         var qty = parseInt(elQtyInput.value);
    //         var elm = elQtyInput.parentNode.parentNode.parentNode.parentNode.parentNode;
    //         var prod_bk = elm.parentNode.parentNode.parentNode.parentNode.parentNode;
    //         if(prod_bk.querySelector('.inc_prd_showcase_bk .inc_prd_desc_qty_input_text input') != null){
    //             prod_bk.querySelector('.inc_prd_showcase_bk .inc_prd_desc_qty_input_text input').value=qty
    //         }

    //         if (elAddText.innerText == "ADDED" || elAddText.innerText == "UPDATE" || elAddText.innerText == "Update" || elAddText.innerText == "Added") {
    //            // INC_COL.methods.updateBundleCart({ sku: sku, qty: qty }, "add");
    //            if(isIE()){
    //             setTimeout(function(){
    //                 INC_COL.methods.updatecolBundleCart({ sku: sku, qty: qty }, "add");
    //             },10);
    //         }else{
    //             INC_COL.methods.updatecolBundleCart({ sku: sku, qty: qty }, "add");
    //         }
    //         }
    //         setTimeout(function(){
    //             elPackOfListBlock.classList.remove("active");
    //         })

    //     });
    // });
    elQtyBlock.addEventListener('click', function() {// elPackOfListBlock.classList.toggle("active");
    })
    function qtyF() {
        var prod_card = elQtyInput.parentNode.parentNode.parentNode.parentNode.parentNode.parentNode.parentNode.parentNode.parentNode.parentNode
        if (prod_card.classList.contains('inc_prd_showcase_bk') == true) {
            prod_card = elQtyInput.parentNode.parentNode.parentNode.parentNode.parentNode.parentNode.parentNode.parentNode.parentNode.parentNode.parentNode
        }
        setTimeout(function() {
            if (elQtyInput.value.length == 0)
                elQtyInput.value = 1;
            if (elQtyInput.value == 0)
                elQtyInput.value = 1;
            if (elQtyInput.value > 100)
                elQtyInput.value = 100;

            var productModuleBlock = productBlock.parentNode.parentNode;

            var showcaseProductBlock = productModuleBlock.querySelector(getSelectorClassName(classNames, "colproductShowcaseBlock")).querySelector(getSelectorClassName(classNames, "productBlock"));

            showcaseProductBlock.querySelector(getSelectorClassName(classNames, "colproductQtyInputText")).querySelector('input').value = parseInt(elQtyInput.value);

            var id = productBlock.getAttribute('data-id');
            var qty = parseInt(elQtyInput.value);
            var main_id = productBlock.getAttribute('data-main_id');
            var bundle_id = productBlock.getAttribute('data-bundle_id');
            var combo_id = productBlock.getAttribute('data-comboid');
            var pname = productBlock.querySelector('.inc_prd_desc_title_txt').textContent;
            var pprice = productBlock.querySelector('.inc_prd_desc_price_active_text').textContent.replace('$', '');
            prod_card.querySelector('.inc_prd_modal_bk .inc_prd_desc_qty_input_text input').value = elQtyInput.value
            if (elAddText.textContent == INC_COL.config.AddedText) {
                INC_COL.methods.updatecolBundleCart({
                    sku: id,
                    qty: qty
                }, "add", main_id, bundle_id, pname, pprice, combo_id);
            }
        }, 50);
    }
    findObj = new INC_COL.classes.FindObj({
        mainId: productObj.mainId
    });
    var productColorsObj = INC_COL.dataStore.methods().getProductColorsObj(findObj);
    if (productColorsObj.colorArray.length == 0) {
        var productSizesObj = INC_COL.dataStore.methods().getProductSizesObj(findObj);
    }
    var product0Obj = INC_COL.dataStore.methods().getProductopt0Obj(findObj);

    var productSizesObj = INC_COL.dataStore.methods().getProductSizesObj(findObj);

    var productColorsObj = INC_COL.dataStore.methods().getProductColorsObj(findObj);

    var product3Obj = INC_COL.dataStore.methods().getProductopt3Obj(findObj);

    elAtt0ListBlock.innerHTML = "";
    elAttSizeListBlock.innerHTML = "";
    elAttColorListBlock.innerHTML = "";
    elAtt3ListBlock.innerHTML = "";

    if (product0Obj.att0Array.length > 0) {
        if (product0Obj["att0Array"][0].code != "Color") {
            findObj = new INC_COL.classes.FindObj({
                mainId: productObj.mainId
            });
            elAtt0ListBlock.innerHTML = "";
            var product0Obj = product0Obj;
            var productSizeText = "";
            if (product0Obj["att0Array"].length > 0) {
                elAtt0TitleText.innerText = product0Obj["att0Array"][0].code + ':';
                elAtt0Block.classList.add("inc_active");
                elAtt0Block.classList.add("inc_total_" + product0Obj["att0Array"].length)
                product0Obj["att0Array"].forEach(function(sizeObj) {
                    var attSizeBlock0 = generate_html_tag('div', 'inc_prd_desc_att_size_list_item_bk');
                    var attSizeImgBlock0 = generate_html_tag('div', 'inc_prd_desc_att_size_list_item_img_bk');
                    var attSizeImg0 = generate_html_tag('div', 'inc_prd_desc_att_size_list_item_img');
                    attSizeImgBlock0.setAttribute('onClick', 'INC_COL.methods.mappvariants(this,\'' + blockType + '\',"zero")')
                    attSizeImgBlock0.classList.add('avail')
                    if (productSizeText.length == 0) {
                        productSizeText = sizeObj["text"];
                    }
                    var reg = new RegExp('^[A-Z]|XS|S|M|L|XL|XXL|XXXL|XX|XXXXL|2XL|3XL|4XL$');
                    var chckType = sizeObj["text"];
                    reg.test(chckType);

                    if (sizeObj["imgSrc"].length > 0) {
                        if (sizeObj["colorCode"] == "" || sizeObj["colorCode"] == undefined) {
                            var sizeimg = generate_html_tag('img');
                            sizeimg.setAttribute('alt', sizeObj["text"])
                            sizeimg.src = sizeObj["imgSrc"]
                            attSizeImgBlock0.setAttribute('data-optionimge', sizeObj["imgSrc"])
                            attSizeImgBlock0.appendChild(sizeimg);
                            elAtt0TitleText.classList.add('img_tag_avail')
                            elAtt0TitleText.style.display = "flex"
                            attSizeImgBlock0.classList.add('img_avail')
                        }
                    }
                    attSizeImg0.innerText = sizeObj["text"];
                    attSizeImgBlock0.setAttribute('data-size', sizeObj["text"]);
                    attSizeImgBlock0.setAttribute("datasize", sizeObj["text"].toLocaleLowerCase());
                    attSizeImgBlock0.setAttribute('data-option', "1");
                    attSizeImgBlock0.setAttribute('data-cpid', sizeObj["cpid"])
                    if (product0Obj["att0Array"][0].code == "size") {
                        attSizeImgBlock0.setAttribute('title', sizeObj["text"].toUpperCase());
                    } else if (product0Obj["att0Array"][0].code == "letter") {
                        attSizeImgBlock0.setAttribute('title', "Letter" + " " + sizeObj["text"].toUpperCase());
                    } else if (product0Obj["att0Array"][0].code == "choose") {
                        attSizeImgBlock0.setAttribute('title', "Number " + sizeObj["text"].toUpperCase());
                    } else {
                        attSizeImgBlock0.setAttribute('title', sizeObj["text"].toUpperCase());
                    }
                    attSizeImgBlock0.appendChild(attSizeImg0);
                    elAtt0ListBlock.appendChild(attSizeImgBlock0);
                });

            }
        }
    }
    if (productSizesObj.sizeArray.length > 0) {
        if (productSizesObj["sizeArray"][0].code != "Color") {
            findObj = new INC_COL.classes.FindObj({
                mainId: productObj.mainId
            });

            elAttSizeListBlock.innerHTML = "";
            var productSizeText = "";
            if (productSizesObj["sizeArray"].length > 0) {
                elAttSizeTitleText.innerText = productSizesObj["sizeArray"][0].code + " :";
                elAttSizeBlock.classList.add("inc_active");
                productSizesObj["sizeArray"].forEach(function(sizeObj) {
                    var attSizeBlock = generate_html_tag('div', 'inc_prd_desc_att_size_list_item_bk');
                    var attSizeImgBlock = generate_html_tag('div', 'inc_prd_desc_att_size_list_item_img_bk');
                    var attSizeImg = generate_html_tag('div', 'inc_prd_desc_att_size_list_item_img');
                    elAttSizeTitleTextSelected.innerText = "Please select option"
                    if (elAttSizeTitleTextSelected.innerText == "Please select option") {// elAttSizeTitleTextSelected.setAttribute('style', 'color:#FF0000')
                    }
                    attSizeImgBlock.classList.add('avail')
                    attSizeImgBlock.setAttribute('onClick', 'INC_COL.methods.mappvariants(this,\'' + blockType + '\',"size")')
                    if (productSizeText.length == 0) {
                        productSizeText = sizeObj["text"];
                    }
                    var reg = new RegExp('^[A-Z]|XS|S|M|L|XL|XXL|XXXL|XX|XXXXL|2XL|3XL|4XL$');
                    var chckType = sizeObj["text"];

                    reg.test(chckType);
                    attSizeImg.innerText = sizeObj["text"];
                    attSizeImgBlock.setAttribute('data-size', sizeObj["text"]);
                    attSizeImgBlock.setAttribute("datasize", sizeObj["text"].toLocaleLowerCase());
                    attSizeImgBlock.setAttribute('data-option', "2");
                    if (productSizesObj["sizeArray"][0].code == "size") {
                        attSizeImgBlock.setAttribute('title', sizeObj["text"].toUpperCase());
                    } else if (productSizesObj["sizeArray"][0].code == "letter") {
                        attSizeImgBlock.setAttribute('title', "Letter" + " " + sizeObj["text"].toUpperCase());
                    } else if (productSizesObj["sizeArray"][0].code == "choose") {
                        attSizeImgBlock.setAttribute('title', "Number " + sizeObj["text"].toUpperCase());
                    } else {
                        attSizeImgBlock.setAttribute('title', sizeObj["text"].toUpperCase());
                    }
                    attSizeImgBlock.appendChild(attSizeImg);
                    elAttSizeListBlock.appendChild(attSizeImgBlock);

                });

            }
        }
    }
    if (productColorsObj.colorArray.length > 0) {
        elAttColorListBlock.innerHTML = "";
        var one_attr_flag = false
        if (productColorsObj["colorArray"].length == 1) {
            one_attr_flag = true
        }
        if (productColorsObj["colorArray"].length > 0) {
            productColorsObj["colorArray"].forEach(function(colorObj) {
                elAttColorBlock.classList.add("inc_active");
                elAttColorTitleText.innerText = "Colour : ";
                var attColorBlock = generate_html_tag('div', 'inc_prd_desc_att_color_list_item_bk')
                var attColorImgBlock = generate_html_tag('div', 'inc_prd_desc_att_color_list_item_img_bk');
                var attColorImg = generate_html_tag('div', 'inc_prd_desc_att_color_list_item_img');
                var attColorTextBlock = generate_html_tag('div', 'inc_prd_desc_att_color_list_item_text_bk');
                var attColorText = generate_html_tag('div', 'inc_prd_desc_att_color_list_item_text');

                attColorImgBlock.setAttribute('onClick', 'INC_COL.methods.mappvariants(this,\'' + blockType + '\',"color")')
                if (true) {
                    elAttColorTitleTextSelected.innerText = "Please select a Color"
                    if (elAttColorTitleTextSelected.innerText == "Please select a Color") {
                        elAttColorTitleTextSelected.setAttribute('style', 'color:#FF0000')
                    }
                }
                if (colorObj["colorCode"] != "" && colorObj["colorCode"] != undefined) {
                    var spancolorcode = generate_html_tag('span');
                    spancolorcode.setAttribute('alt', colorObj["text"])
                    spancolorcode.style.backgroundColor = colorObj["colorCode"];
                    attColorImg.appendChild(spancolorcode);
                } else if (colorObj["imgSrc"].length > 0) {
                    if (colorObj["colorCode"] == "") {
                        var colorImg = generate_html_tag('img');
                        colorImg.setAttribute('alt', colorObj["text"])
                        colorImg.src = colorObj["imgSrc"]
                        if (productObj.categoryName != "") {
                            colorImg.classList.add(productObj.categoryName.replace(/\s/g, ''))
                        }
                        attColorImg.appendChild(colorImg);
                    }
                }
                var colorTitle = generate_html_tag('a');
                colorTitle.innerText = colorObj["text"]
                colorTitle.title = colorObj["text"].toUpperCase();
                colorTitle.addEventListener('click', function(e) {
                    e.preventDefault();
                })

                // attColorImg.appendChild(colorTitle);

                attColorImgBlock.setAttribute('data-color', colorObj["text"]);
                attColorImgBlock.setAttribute("datacolor", colorObj["text"].toLocaleLowerCase());
                attColorImgBlock.setAttribute('data-option', "0");
                attColorImgBlock.setAttribute('data-cpid', colorObj["cpid"])
                attColorImgBlock.setAttribute('data-colorcode', colorObj["colorCode"])
                attColorImgBlock.setAttribute('data-optionimge', colorObj["imgSrc"])

                attColorImgBlock.appendChild(attColorImg);
                attColorBlock.appendChild(attColorImgBlock);
                elAttColorListBlock.appendChild(attColorBlock);
                var prod_id = productBlock.getAttribute('data-main_id');
                if (one_attr_flag == true) {
                    setTimeout(function() {
                        if (INC_COL.methods.getProductIdFromWebPage() == prod_id) {
                            attColorImgBlock.click()
                        }
                    }, 0)
                }
            });

        }
    }
    if (product3Obj.att3Array.length > 0) {
        if (product3Obj["att3Array"][0].code != "Color") {
            findObj = new INC_COL.classes.FindObj({
                mainId: productObj.mainId
            });

            elAtt3ListBlock.innerHTML = "";
            var productSizeText = "";
            if (product3Obj["att3Array"].length > 0) {
                product3Obj["att3Array"].forEach(function(sizeObj) {
                    elAtt3TitleTextSelected.innerText = "Please select option"
                    if (elAtt3TitleTextSelected.innerText == "Please select option") {// elAtt3TitleTextSelected.setAttribute('style', 'color:#FF0000')
                    }
                    elAtt3TitleText.innerText = product3Obj["att3Array"][0].code + " :";
                    elAtt3TitleText.style.textTransform = "capitalize";
                    elAtt3Block.classList.add("inc_active");
                    var attSizeBlock3 = generate_html_tag('div', 'inc_prd_desc_att_third_list_item_bk');
                    var attSizeImgBlock3 = generate_html_tag('div', 'inc_prd_desc_att_third_list_item_img_bk');
                    var attSizeImg3 = generate_html_tag('div', 'inc_prd_desc_att_third_list_item_img');

                    attSizeImgBlock3.setAttribute('onClick', 'INC_COL.methods.mappvariants(this,\'' + blockType + '\',"third")')
                    attSizeImgBlock3.classList.add('avail')

                    if (productSizeText.length == 0) {
                        productSizeText = sizeObj["text"];
                    }
                    var reg = new RegExp('^[A-Z]|XS|S|M|L|XL|XXL|XXXL|XX|XXXXL|2XL|3XL|4XL$');
                    var chckType = sizeObj["text"];
                    reg.test(chckType);
                    attSizeImg3.innerText = sizeObj["text"];
                    attSizeImgBlock3.setAttribute('data-size', sizeObj["text"]);
                    attSizeImgBlock3.setAttribute("datasize", sizeObj["text"].toLocaleLowerCase());
                    attSizeImgBlock3.setAttribute('data-option', "3");

                    attSizeImgBlock3.appendChild(attSizeImg3);
                    elAtt3ListBlock.appendChild(attSizeImgBlock3);

                });

            }
        }
    }
    if (product0Obj["att0Array"].length > 0) {
        productBlock.querySelector('.inc_prd_desc_att_zero_title_bk').addEventListener('click', function(e) {
            if (document.querySelector('.inc_prd_desc_att_zero_bk.show_dropdown') != e.currentTarget) {
                if (document.querySelector('.inc_prd_desc_att_zero_bk.show_dropdown') != null) {
                    if (e.currentTarget.parentNode.classList.contains('show_dropdown') == false) {
                        document.querySelector('.inc_prd_desc_att_zero_bk.show_dropdown').classList.remove('show_dropdown')
                    }
                }
            }
            if (document.querySelector('.inc_prd_desc_att_color_bk.show_dropdown') != null) {
                document.querySelector('.inc_prd_desc_att_color_bk.show_dropdown').classList.remove('show_dropdown')
            }
            this.parentNode.classList.toggle('show_dropdown')
        })
    }
    if (productColorsObj["colorArray"].length > 0) {
        productBlock.querySelector('.inc_prd_desc_att_color_title_bk').addEventListener('click', function(e) {
            if (document.querySelector('.inc_prd_desc_att_color_bk.show_dropdown') != e.currentTarget) {
                if (document.querySelector('.inc_prd_desc_att_color_bk.show_dropdown') != null) {
                    if (e.currentTarget.parentNode.classList.contains('show_dropdown') == false) {
                        document.querySelector('.inc_prd_desc_att_color_bk.show_dropdown').classList.remove('show_dropdown')
                    }
                }
            }
            if (document.querySelector('.inc_prd_desc_att_zero_bk.show_dropdown') != null) {
                document.querySelector('.inc_prd_desc_att_zero_bk.show_dropdown').classList.remove('show_dropdown')
            }
            this.parentNode.classList.toggle('show_dropdown')
        })
    }
    if (product3Obj["att3Array"].length > 0) {
        productBlock.querySelector('.inc_prd_desc_att_third_title_bk').addEventListener('click', function(e) {
            if (document.querySelector('.inc_prd_desc_att_third_list_bk.show_dropdown') != e.currentTarget) {
                if (document.querySelector('.inc_prd_desc_att_third_list_bk.show_dropdown') != null) {
                    if (e.currentTarget.parentNode.classList.contains('show_dropdown') == false) {
                        document.querySelector('.inc_prd_desc_att_third_list_bk.show_dropdown').classList.remove('show_dropdown')
                    }
                }
            }
            if (document.querySelector('.inc_prd_desc_att_zero_bk.show_dropdown') != null) {
                document.querySelector('.inc_prd_desc_att_zero_bk.show_dropdown').classList.remove('show_dropdown')
            }
            this.parentNode.classList.toggle('show_dropdown')
        })
    }
    if (productSizesObj["sizeArray"].length > 0) {
        productBlock.querySelector('.inc_prd_desc_att_size_title_bk').addEventListener('click', function(e) {
            if (document.querySelector('.inc_prd_desc_att_size_list_bk.show_dropdown') != e.currentTarget) {
                if (document.querySelector('.inc_prd_desc_att_size_list_bk.show_dropdown') != null) {
                    if (e.currentTarget.parentNode.classList.contains('show_dropdown') == false) {
                        document.querySelector('.inc_prd_desc_att_size_list_bk.show_dropdown').classList.remove('show_dropdown')
                    }
                }
            }
            if (document.querySelector('.inc_prd_desc_att_zero_bk.show_dropdown') != null) {
                document.querySelector('.inc_prd_desc_att_zero_bk.show_dropdown').classList.remove('show_dropdown')
            }
            this.parentNode.classList.toggle('show_dropdown')
        })
    }
    var sizezero = INC_COL.dataStore.methods().getProductopt0Obj(findObj)
    if (productColorsObj["colorArray"].length == 0 && sizezero["att0Array"].length == 0 && product3Obj["att3Array"].length == 0 && productSizesObj["sizeArray"].length == 0) {
        // eledit.style.display="none"
        elAttBlock.classList.add('attributes_not_avail')
        eladdvarianttext.textContent = "Add"
        switch (blockType) {
        case "pdpcollection":
            eladdvarianttext.textContent = "Add";
            break;
        }
        eladdvarianttext.classList.add('simple')
    } else if (productColorsObj["colorArray"].length > 0) {
        elAttBlock.classList.add('attributes_avail')
        // elAttSizeTitleText.textContent = "View colours";
        eladdvarianttext.textContent = "Select Option";
        eladdvarianttext.classList.add('config')
        elconfigtitle.textContent = "Please select a Color";
        switch (blockType) {
        case "pdpcollection":
            eladdvarianttext.textContent = "Add";
            break;
        }
        eladdvarianttext.classList.remove('simple')
    } else if (sizezero["att0Array"].length > 0) {
        eladdvarianttext.classList.remove('simple')
        eladdvarianttext.textContent = "Select Option";
        eladdvarianttext.classList.add('config')
        elAttBlock.classList.add('attributes_avail')
        elAttSizeTitleText.textContent = "Size :";
        elconfigtitle.textContent = "Please select your Size";
        switch (blockType) {
        case "pdpcollection":
            eladdvarianttext.textContent = "Add";
            break;
        }
    } else if (product3Obj["att3Array"].length > 0) {
        eladdvarianttext.classList.remove('simple')
        eladdvarianttext.textContent = "Select Option";
        eladdvarianttext.classList.add('config')
        elAttBlock.classList.add('attributes_avail')
        elAttSizeTitleText.textContent = "Volume :";
        elconfigtitle.textContent = "Please select your Volume";
        switch (blockType) {
        case "pdpcollection":
            eladdvarianttext.textContent = "Add";
            break;
        }
    } else {
        if (productSizesObj["sizeArray"].length > 0) {
            eladdvarianttext.classList.remove('simple')
            eladdvarianttext.textContent = "Select Option";
            eladdvarianttext.classList.add('config')
            elAttBlock.classList.add('attributes_avail')
            elAttSizeTitleText.textContent = "Weight :";
            elconfigtitle.textContent = "Please select your Weight";
            switch (blockType) {
            case "pdpcollection":
                eladdvarianttext.textContent = "Add";
                break;
            }
        }
    }

    elvariantaddbtn.addEventListener('click', function() {
        if ((this.textContent.trim() == "Update" || this.parentNode.classList.contains('config_avail') == true) && this.innerText.trim() != "Add To Bag") {
            var moduleblk = this.parentNode.parentNode.parentNode.parentNode.parentNode.parentNode.parentNode
            var flag_check = INC_COL.methods.checkVariantSelection(moduleblk)
            if (flag_check == 1 || flag_check == 3) {
                if (document.querySelector('.inc_prd_modal_bk.inc_active') == null && document.querySelector('.inc_sidebar_modal_bk.inc_active') == null) {
                    document.querySelector('html').classList.remove('inc_overlay')
                }
                this.parentNode.parentNode.querySelector('.inc_prd_desc_variant_popup_close_bk').click()
                this.parentNode.parentNode.querySelector('.inc_prd_desc_variant_popup_close_bk').click()
                var delayset = 0
                productBlock.classList.remove('show_overlay')
                if (this.textContent.trim() == "Add") {
                    this.parentNode.parentNode.parentNode.querySelector('.inc_prd_desc_add_bk').click()
                }
            } else {
                if (flag_check == 2 || flag_check == 0) {
                    if (flag_check != 0) {
                        if (this.parentNode.parentNode.querySelector('.inc_variant_tag') != null) {
                            this.parentNode.querySelector('.inc_prd_desc_add_title_txt_bk').innerText = "Please select a Color";
                            this.parentNode.parentNode.querySelector('.inc_variant_tag').setAttribute('style', 'border:1px solid #E52B45;')
                        }
                    }

                    if (this.parentNode.querySelector('.inc_prd_desc_add_title_txt_bk') != null) {
                        if (this.parentNode.getAttribute('data-color') == null && this.parentNode.getAttribute('data-zero') != null && this.parentNode.getAttribute('data-size') != null) {
                            this.parentNode.querySelector('.inc_prd_desc_add_title_txt_bk').innerText = "Please select your Size and Color options";
                        } else if (this.parentNode.getAttribute('data-color') != null && this.parentNode.querySelectorAll('inc_prd_desc_att_color_list_item_bk.inc_active').length > 0) {
                            this.parentNode.querySelector('.inc_prd_desc_add_title_txt_bk').innerText = "Please select your Size";
                        } else if (this.parentNode.getAttribute('data-zero') != null || this.parentNode.getAttribute('data-size') != null) {
                            this.parentNode.querySelector('.inc_prd_desc_add_title_txt_bk').innerText = "Please select a Color";
                        }
                        this.parentNode.querySelector('.inc_prd_desc_add_title_txt_bk').setAttribute('style', 'display:block;')
                    }

                }
            }
        } else {
            if (this.innerText.trim() == "Add To Bag" || this.innerText.trim() == "SELECT") {
                var moduleblk = this.parentNode.parentNode.parentNode.parentNode.parentNode.parentNode.parentNode
                var flag_check = INC_COL.methods.checkVariantSelection(moduleblk)
                if (flag_check == 1 || flag_check == 3) {
                    if (document.querySelector('.inc_prd_modal_bk.inc_active') == null && document.querySelector('.inc_sidebar_modal_bk.inc_active') == null) {
                        document.querySelector('html').classList.remove('inc_overlay')
                    }
                    this.parentNode.parentNode.querySelector('.inc_prd_desc_variant_popup_close_bk').click()
                    this.parentNode.parentNode.querySelector('.inc_prd_desc_variant_popup_close_bk').click()

                    productBlock.classList.remove('show_overlay')
                    if (this.textContent.trim() == "Add To Bag" || this.textContent.trim() == "SELECT" || this.textContent.trim() == "Add") {
                        this.parentNode.parentNode.parentNode.querySelector('.inc_prd_desc_add_bk').click()
                    }
                } else {
                    if (flag_check == 2 || flag_check == 0) {
                        if (this.parentNode.querySelector('.inc_prd_desc_add_title_txt_bk') != null) {
                            if (this.parentNode.getAttribute('data-color') == null && this.parentNode.getAttribute('data-zero') == null && this.parentNode.getAttribute('data-size') == null) {
                                this.parentNode.querySelector('.inc_prd_desc_add_title_txt_bk').innerText = "Please select your Size and Color options";
                            } else if (this.parentNode.getAttribute('data-zero') == null) {
                                this.parentNode.querySelector('.inc_prd_desc_add_title_txt_bk').innerText = "Please select your Size";
                            } else if (this.parentNode.getAttribute('data-zero') != null || this.parentNode.getAttribute('data-size') != null) {
                                this.parentNode.querySelector('.inc_prd_desc_add_title_txt_bk').innerText = "Please select a Color";
                            }
                            this.parentNode.querySelector('.inc_prd_desc_add_title_txt_bk').setAttribute('style', 'display:block;')
                        }

                        if (flag_check == 0) {
                            if (this.parentNode.querySelector('.inc_prd_desc_add_title_txt_bk') != null) {
                                this.parentNode.querySelector('.inc_prd_desc_add_title_txt_bk').innerText = "Please select your size";
                            }
                        }
                    }
                }
            } else {
                var moduleblk = this.parentNode.parentNode.parentNode.parentNode.parentNode.parentNode.parentNode
                var flag_check = INC_COL.methods.checkVariantSelection(moduleblk)
                if (flag_check == 1 || flag_check == 3) {
                    this.parentNode.parentNode.parentNode.querySelector('.inc_prd_desc_add_bk').click()
                    this.parentNode.parentNode.parentNode.querySelector('.inc_prd_desc_variant_popup_close_bk').click()
                } else {
                    if (flag_check == 2 || flag_check == 0) {
                        if (flag_check != 0) {
                            if (this.parentNode.parentNode.querySelector('.inc_variant_tag') != null) {
                                this.parentNode.querySelector('.inc_prd_desc_add_title_txt_bk').innerText = "Please select a Color";
                            }
                        }

                        if (this.parentNode.querySelector('.inc_prd_desc_add_title_txt_bk') != null) {
                            if (this.parentNode.getAttribute('data-color') == null && this.parentNode.getAttribute('data-zero') == null && this.parentNode.getAttribute('data-size') == null) {
                                this.parentNode.querySelector('.inc_prd_desc_add_title_txt_bk').innerText = "Please select your Size and Color options";
                            } else if (this.parentNode.getAttribute('data-color') != null) {
                                this.parentNode.querySelector('.inc_prd_desc_add_title_txt_bk').innerText = "Please select your Size";
                            } else if (this.parentNode.getAttribute('data-zero') != null || this.parentNode.getAttribute('data-size')) {
                                this.parentNode.querySelector('.inc_prd_desc_add_title_txt_bk').innerText = "Please select a Color";
                            }
                            this.parentNode.querySelector('.inc_prd_desc_add_title_txt_bk').setAttribute('style', 'display:block;')
                        }

                        if (flag_check == 0) {
                            if (this.parentNode.querySelector('.inc_prd_desc_add_title_txt_bk') != null) {
                                this.parentNode.querySelector('.inc_prd_desc_add_title_txt_bk').innerText = "Please select your size";
                            }
                        }
                    }
                }
            }

        }
    })

    // elselectoptaddbtn.addEventListener('click', function () {
    //     if (document.querySelector('.inc_prd_desc_att_bk.inc_active') != null) {
    //         document.querySelector('.inc_prd_desc_att_bk.inc_active').classList.remove('inc_active')
    //     }
    //     if(document.querySelector('.inc_pdp_bk') != null){
    //         var doc = document.querySelector('.inc_pdp_bk');
    //         inc_col_scroll_height = (window.pageYOffset || doc.scrollTop)  - (doc.clientTop || 0);
    //     }else if(document.querySelector('.inc_af_bk') != null){
    //         var doc = document.querySelector('.inc_af_bk');
    //         inc_col_scroll_height = (window.pageYOffset || doc.scrollTop)  - (doc.clientTop || 0);
    //     }
    //     if (this.querySelector('.inc_prd_variant_simple_text.simple') != null) {
    //         this.parentNode.parentNode.parentNode.querySelector('.inc_prd_desc_add_bk').click()
    //     } else {
    //         if (window.innerWidth < 768 && INC_COL.config.pageType != "cartPage") {
    //             // document.querySelector('html').classList.add('inc_overlay')
    //             // document.querySelector('body').style.overflow = "hidden"
    //             // productBlock.classList.add('show_overlay')
    //             // this.parentNode.querySelector('.inc_prd_desc_att_bk.attributes_avail').classList.add('inc_active')
    //             document.querySelector('html').classList.add('inc_overlay');
    //             this.parentNode.parentNode.parentNode.parentNode.parentNode.parentNode.parentNode.querySelector('.inc_prd_modal_bk')
    //             if (document.querySelector('.sidebar_outer.sidebar_outer_active .inc_sidebar_modal_bk') != null) {
    //                 document.querySelector('.sidebar_outer.sidebar_outer_active .inc_sidebar_modal_bk').classList.add('overflow_visible')
    //                 document.querySelector('body').classList.add('inc_popup_open');
    //                 document.querySelector('html').classList.add('inc_overlay');
    //             }
    //         }else{
    //             document.querySelector('html').classList.add('inc_overlay');
    //             this.parentNode.parentNode.parentNode.parentNode.parentNode.parentNode.querySelector('.inc_prd_modal_bk').classList.add('inc_active')
    //             if (document.querySelector('.sidebar_outer.sidebar_outer_active .inc_sidebar_modal_bk') != null) {
    //                 document.querySelector('.sidebar_outer.sidebar_outer_active .inc_sidebar_modal_bk').classList.add('overflow_visible')
    //                 document.querySelector('body').classList.add('inc_overlay');
    //                 document.querySelector('body').classList.add('inc_popup_open');
    //             }
    //         }

    //         if (productBlock.parentNode.parentNode.parentNode.classList.contains('inc_af_product-list_bk')) {
    //             document.querySelector('html').classList.add('inc_overlay');
    //         }
    //         productBlock.parentNode.parentNode.querySelector('.inc_prd_modal_bk .inc_prd_info_main_bk').classList.add('inc_active');
    //         productBlock.parentNode.parentNode.querySelector('.inc_prd_modal_bk .inc_prd_description_main_bk').classList.remove('inc_active');
    //     }
    // })

    elselectoptaddbtn.addEventListener('click', function() {
        if (document.querySelector('.inc_prd_desc_att_bk.inc_active') != null) {
            document.querySelector('.inc_prd_desc_att_bk.inc_active').classList.remove('inc_active')
        }
        if (this.querySelector('.inc_prd_variant_simple_text.simple') != null) {
            this.parentNode.parentNode.parentNode.querySelector('.inc_prd_desc_add_bk').click()
        } else {
            if (window.innerWidth < 820 && INC.config.pageType != "cartPage") {
                document.querySelector('html').classList.add('inc_overlay')

                document.querySelector('body').style.overflow = "hidden"
                productBlock.classList.add('show_overlay')
                this.parentNode.querySelector('.inc_prd_desc_att_bk.attributes_avail').classList.add('inc_active')
            } else {
                document.querySelector('html').classList.add('inc_overlay');
                this.parentNode.parentNode.parentNode.parentNode.parentNode.parentNode.parentNode.querySelector('.inc_prd_modal_bk').classList.add('inc_active')
            }

            if (productBlock.parentNode.parentNode.parentNode.classList.contains('inc_af_product-list_bk')) {
                document.querySelector('html').classList.add('inc_overlay');
            }

            productBlock.parentNode.parentNode.querySelector('.inc_prd_modal_bk .inc_prd_info_main_bk').classList.add('inc_active');

            productBlock.parentNode.parentNode.querySelector('.inc_prd_modal_bk .inc_prd_description_main_bk').classList.remove('inc_active');
            if (document.querySelector('.sidebar_outer.sidebar_outer_active') != null) {
                var mainprodname = document.querySelector('.inc_pdp_product-main_bk .inc_prd_desc_title_text').innerText
                var clickprodnamne = productBlock.querySelector('.inc_prd_desc_title_text').innerText
                window.dataLayer = window.dataLayer || [];
                // window.dataLayer.push({
                //     'event' : 'GAEvent',
                //     'eventCategory' : 'Bundle',
                //     'eventAction' : 'Select Option',
                //     'eventLabel' : mainprodname,
                //     'item' : clickprodnamne
                // });
                // dataLayer.push({
                //     'event':'vpv',
                //     'virtualPageURL':'/shop/bundle/ProductDetails/vpv',
                //     'virtualPageTitle' : 'Bundle Product Details Quickview VPV'
                // });
            }
        }
    })
    switch (blockType) {
    case "pdpcollection":
        eladdvarianttext.textContent = "Add";
        break;
    }
    elAddBlock.addEventListener("click", function() {
        var productModuleBlock = productBlock.parentNode.parentNode;
        var modalProductBlock = productModuleBlock.querySelector('.inc_prd_modal_bk').querySelector('.inc_prd_bk')
        var flag_check = INC_COL.methods.checkVariantSelection(productModuleBlock)
        var sku = productBlock.getAttribute('data-sku');
        var mainId = productBlock.getAttribute('data-main_id');
        var main_id = productBlock.getAttribute('data-main_id');
        var bundle_id = productBlock.getAttribute('data-bundle_id');
        var combo_id = productBlock.getAttribute('data-comboid');
        var pname = productBlock.querySelector('.inc_prd_desc_title_txt').textContent;
        var pprice = productBlock.querySelector('.inc_prd_desc_ecirp_active_text').textContent.replace('£', '');
        var qty = parseInt(elQtyInput.value);
        if (qty < 1)
            qty = 1
        var prod_card = elAddText.parentNode.parentNode.parentNode.parentNode.parentNode.parentNode.parentNode.parentNode
        if (document.querySelector('.inc_sidebar_modal_bk.inc_active') == null) {
            if (flag_check == 1 || onloadpdp == false || onloadpdp_delete == false) {
                switch (elAddText.textContent) {
                case "Add":
                    elAddText.textContent = "Added";
                    elAddText.classList.add('added');
                    productDescAddText.textContent = "Added"
                    elAddText.parentNode.parentNode.parentNode.querySelector('.inc_prd_desc_add_bk').classList.add('Inc_checked');
                    modalProductBlock.querySelector('.inc_prd_desc_add_text').textContent = "Update";
                    var pListItemBlock = document.querySelector('.inc_pdp_bd_prd_list_item_bk' + "[data-main_id=\"" + mainId + "\"]");
                    if (pListItemBlock != null) {
                        pListItemBlock.classList.add('product_added');
                        pListItemBlock.querySelector('.inc_pdp_bd_prd_list_item_added_btn_img').classList.add("checked");
                    }
                    elAddImg.classList.add("checked");
                    modalProductBlock.querySelector('.inc_prd_desc_add_img').classList.add("checked");
                    if (INC_COL.config.pageType == "pdpcollection" && blockType == "pdpcollection")
                        INC_COL.methods.updatecolBundleCart({
                            sku: sku,
                            qty: qty
                        }, "add", main_id, bundle_id, pname, pprice, combo_id);
                    if (prod_card != null) {
                        if (prod_card.querySelector('.inc_prd_modal_bk.inc_active') != null) {
                            if (inc_col_scroll_height > 100) {
                                window.scrollTo(0, inc_col_scroll_height);
                            }
                            prod_card.querySelector('.inc_prd_modal_bk.inc_active').classList.remove('inc_active')
                        }
                    }
                    productModuleBlock.querySelector('.inc_prd_variant_simple_bk').classList.add('added_inc')
                    productModuleBlock.querySelector('.inc_prd_desc_qty_add_btn_bk').classList.add('added_inc')
                    if (productModuleBlock.querySelector('.inc_prd_desc_qty_add_btn_bk .inc_add_text') != null) {
                        productModuleBlock.querySelector('.inc_prd_desc_qty_add_btn_bk .inc_add_text').innerText = "Added to Bundle";
                    }
                    productModuleBlock.querySelector('.inc_prd_add_bk').classList.add('added_inc')
                    productModuleBlock.querySelector('.inc_prd_modal_bk .inc_prd_add_bk').classList.add('added_inc')
                    productModuleBlock.querySelector('.inc_prd_desc_att_variant_text').textContent = "Update"
                    productModuleBlock.querySelector('.inc_prd_variant_simple_text').textContent = productModuleBlock.querySelector('.inc_prd_variant_simple_text').getAttribute('title')
                    break;
                case "Added":
                    if (modalProductBlock.querySelector('.inc_prd_desc_add_text').textContent != "Update" && prod_card.querySelector('.inc_prd_modal_bk.inc_active') != null) {
                        elAddText.textContent = "Add";
                        productDescAddText.textContent = "Add to Bundle"
                        elAddText.classList.remove('added');
                        elAddText.parentNode.parentNode.classList.remove('Inc_checked');
                        modalProductBlock.querySelector('.inc_prd_desc_add_text').textContent = "Add to Bundle";
                        var pListItemBlock = document.querySelector('.inc_pdp_bd_prd_list_item_bk' + "[data-main_id=\"" + mainId + "\"]");
                        if (pListItemBlock != null) {
                            pListItemBlock.classList.remove('product_added');
                            pListItemBlock.querySelector('.inc_pdp_bd_prd_list_item_added_btn_img').classList.remove("checked");
                        }
                        elAddImg.classList.remove("checked");
                        modalProductBlock.querySelector('.inc_prd_desc_add_img').classList.remove("checked");
                        if (productModuleBlock.querySelector('.inc_prd_variant_simple_text.simple') != null) {
                            productModuleBlock.querySelector('.inc_prd_variant_simple_text.simple').textContent = "Add to Bundle"
                        } else {
                            productModuleBlock.querySelector('.inc_prd_variant_simple_text').textContent = "Select Option";

                        }
                        if (productModuleBlock.querySelector('.inc_prd_variant_simple_bk') != null) {
                            productModuleBlock.querySelector('.inc_prd_variant_simple_bk').classList.remove('added_inc')
                        }
                        productModuleBlock.querySelector('.inc_prd_desc_qty_add_btn_bk').classList.remove('added_inc')
                        productModuleBlock.querySelector('.inc_prd_add_bk').classList.remove('added_inc')
                        productModuleBlock.querySelector('.inc_prd_modal_bk .inc_prd_add_bk').classList.remove('added_inc')
                        productModuleBlock.querySelector('.inc_prd_desc_att_variant_text').textContent = "Add to Bundle"
                        if (INC_COL.config.pageType == "pdpcollection" && blockType == "pdpcollection")
                            INC_COL.methods.updatecolBundleCart({
                                sku: sku,
                                qty: qty
                            }, "sub", main_id, bundle_id, pname, pprice, combo_id);
                    } else {
                        if (prod_card.querySelector('.inc_prd_modal_bk.inc_active') == null) {
                            elAddText.textContent = "Add";
                            productDescAddText.textContent = "Add to Bundle"
                            elAddText.classList.remove('added');
                            elAddText.parentNode.parentNode.classList.remove('Inc_checked');
                            modalProductBlock.querySelector('.inc_prd_desc_add_text').textContent = "Add to Bundle";
                            var pListItemBlock = document.querySelector('.inc_pdp_bd_prd_list_item_bk' + "[data-main_id=\"" + mainId + "\"]");
                            if (pListItemBlock != null) {
                                pListItemBlock.classList.remove('product_added');
                                pListItemBlock.querySelector('.inc_pdp_bd_prd_list_item_added_btn_img').classList.remove("checked");
                            }
                            if (productModuleBlock.querySelector('.inc_prd_variant_simple_text.simple') != null) {
                                productModuleBlock.querySelector('.inc_prd_variant_simple_text.simple').textContent = "Add to Bundle"
                            } else {// productModuleBlock.querySelector('.inc_prd_variant_simple_edit_text').textContent = "";
                            //productModuleBlock.querySelector('.inc_prd_variant_simple_text').textContent = "Select Option";
                            }
                            if (productModuleBlock.querySelector('.inc_prd_variant_simple_bk') != null) {
                                productModuleBlock.querySelector('.inc_prd_variant_simple_bk').classList.remove('added_inc')
                            }
                            productModuleBlock.querySelector('.inc_prd_desc_qty_add_btn_bk').classList.remove('added_inc')
                            productModuleBlock.querySelector('.inc_prd_add_bk').classList.remove('added_inc')
                            productModuleBlock.querySelector('.inc_prd_modal_bk .inc_prd_add_bk').classList.remove('added_inc')
                            productModuleBlock.querySelector('.inc_prd_desc_att_variant_text').textContent = "Add to Bundle"
                            elAddImg.classList.remove("checked");
                            modalProductBlock.querySelector('.inc_prd_desc_add_img').classList.remove("checked");
                            if (INC_COL.config.pageType == "pdpcollection" && blockType == "pdpcollection")
                                INC_COL.methods.updatecolBundleCart({
                                    sku: sku,
                                    qty: qty
                                }, "sub", main_id, bundle_id, pname, pprice, combo_id);
                        }
                    }
                    if (prod_card != null) {
                        if (prod_card.querySelector('.inc_prd_modal_bk.inc_active') != null) {
                            if (inc_col_scroll_height > 100) {
                                window.scrollTo(0, inc_col_scroll_height);
                            }
                            prod_card.querySelector('.inc_prd_modal_bk.inc_active').classList.remove('inc_active')
                        }
                    }
                    break;
                }
            } else {
                if (document.querySelector('.inc_prd_modal_bk.inc_active') == null) {
                    if (document.querySelector('.inc_pdp_bundle_bk.inc_active .inc_pdp_bd_cart_title_img_bk') != null) {
                        document.querySelector('.inc_pdp_bundle_bk.inc_active .inc_pdp_bd_cart_title_img_bk').click()
                    }
                    if (window.innerWidth < 821) {
                        productModuleBlock.querySelector('.inc_prd_variant_simple_text').click()
                    } else {
                        productModuleBlock.querySelector('.inc_prd_variant_simple_bk').click()
                    }
                    switch (elAddText.textContent) {
                    case "Add":
                        if (document.querySelector('.inc_prd_modal_bk.inc_active') == null) {
                            if (window.innerWidth < 821) {
                                productModuleBlock.querySelector('.inc_prd_variant_simple_text').click()
                            } else {
                                productModuleBlock.querySelector('.inc_prd_details_prod_bk').click()
                            }
                        }
                        if (productModuleBlock.querySelector('.inc_prd_variant_simple_text').getAttribute('title') != null) {
                            productModuleBlock.querySelector('.inc_prd_variant_simple_text').textContent = productModuleBlock.querySelector('.inc_prd_variant_simple_text').getAttribute('title');
                        }
                        break;
                    case "Added":
                        if (modalProductBlock.querySelector('.inc_prd_desc_add_text').textContent != "Update" && prod_card.querySelector('.inc_prd_modal_bk.inc_active') != null) {
                            elAddText.textContent = "Add";
                            productDescAddText.textContent = "Add to Bundle"
                            elAddText.classList.remove('added');
                            elAddText.parentNode.parentNode.classList.remove('Inc_checked');
                            modalProductBlock.querySelector('.inc_prd_desc_add_text').textContent = "Add to Bundle";
                            var pListItemBlock = document.querySelector('.inc_pdp_bd_prd_list_item_bk' + "[data-main_id=\"" + mainId + "\"]");
                            if (pListItemBlock != null) {
                                pListItemBlock.classList.remove('product_added');
                                pListItemBlock.querySelector('.inc_pdp_bd_prd_list_item_added_btn_img').classList.remove("checked");
                            }
                            elAddImg.classList.remove("checked");
                            modalProductBlock.querySelector('.inc_prd_desc_add_img').classList.remove("checked");
                            if (productModuleBlock.querySelector('.inc_prd_variant_simple_text.simple') != null) {
                                productModuleBlock.querySelector('.inc_prd_variant_simple_text.simple').textContent = "Add to Bundle"
                            } else {
                                productModuleBlock.querySelector('.inc_prd_variant_simple_text').textContent = "Select Option";
                            }
                            if (productModuleBlock.querySelector('.inc_prd_variant_simple_bk') != null) {
                                productModuleBlock.querySelector('.inc_prd_variant_simple_bk').classList.remove('added_inc')
                            }
                            productModuleBlock.querySelector('.inc_prd_desc_qty_add_btn_bk').classList.remove('added_inc')
                            productModuleBlock.querySelector('.inc_prd_add_bk').classList.remove('added_inc')
                            productModuleBlock.querySelector('.inc_prd_modal_bk .inc_prd_add_bk').classList.remove('added_inc')
                            productModuleBlock.querySelector('.inc_prd_desc_att_variant_text').textContent = "Add to Bundle"
                            if (INC_COL.config.pageType == "pdpcollection" && blockType == "pdpcollection")
                                INC_COL.methods.updatecolBundleCart({
                                    sku: sku,
                                    qty: qty
                                }, "sub", main_id, bundle_id, pname, pprice, combo_id);
                        } else {
                            if (prod_card.querySelector('.inc_prd_modal_bk.inc_active') == null) {
                                elAddText.textContent = "Add";
                                productDescAddText.textContent = "Add to Bundle"
                                elAddText.classList.remove('added');
                                elAddText.parentNode.parentNode.classList.remove('Inc_checked');
                                modalProductBlock.querySelector('.inc_prd_desc_add_text').textContent = "Add to Bundle";
                                var pListItemBlock = document.querySelector('.inc_pdp_bd_prd_list_item_bk' + "[data-main_id=\"" + mainId + "\"]");
                                if (pListItemBlock != null) {
                                    pListItemBlock.classList.remove('product_added');
                                    pListItemBlock.querySelector('.inc_pdp_bd_prd_list_item_added_btn_img').classList.remove("checked");
                                }
                                if (productModuleBlock.querySelector('.inc_prd_variant_simple_text.simple') != null) {
                                    productModuleBlock.querySelector('.inc_prd_variant_simple_text.simple').textContent = "Add to Bundle"
                                } else {
                                    productModuleBlock.querySelector('.inc_prd_variant_simple_text').textContent = "Select Option";
                                }
                                if (productModuleBlock.querySelector('.inc_prd_variant_simple_bk') != null) {
                                    productModuleBlock.querySelector('.inc_prd_variant_simple_bk').classList.remove('added_inc')
                                }
                                productModuleBlock.querySelector('.inc_prd_desc_qty_add_btn_bk').classList.remove('added_inc')
                                productModuleBlock.querySelector('.inc_prd_add_bk').classList.remove('added_inc')
                                productModuleBlock.querySelector('.inc_prd_modal_bk .inc_prd_add_bk').classList.remove('added_inc')
                                productModuleBlock.querySelector('.inc_prd_desc_att_variant_text').textContent = "Add to Bundle"
                                elAddImg.classList.remove("checked");
                                modalProductBlock.querySelector('.inc_prd_desc_add_img').classList.remove("checked");
                                if (INC_COL.config.pageType == "pdpcollection" && blockType == "pdpcollection")
                                    INC_COL.methods.updatecolBundleCart({
                                        sku: sku,
                                        qty: qty
                                    }, "sub", main_id, bundle_id, pname, pprice, combo_id);
                            }
                        }
                        if (prod_card != null) {
                            setTimeout(function() {
                                if (prod_card.querySelector('.inc_prd_modal_bk.inc_active') != null) {
                                    if (inc_col_scroll_height > 100) {
                                        window.scrollTo(0, inc_col_scroll_height);
                                    }
                                    prod_card.querySelector('.inc_prd_modal_bk.inc_active').classList.remove('inc_active')
                                }
                            }, 100)
                        }
                        break;
                    }
                }
            }
        } else {
            if (flag_check == 1) {
                elAddText.textContent = "Adding...";
                elAddText.parentNode.parentNode.setAttribute("style", "pointer-events: none;opacity: 0.5;");
            } else {
                if (document.querySelector('.inc_prd_modal_bk.inc_active') == null) {
                    productModuleBlock.querySelector('.inc_prd_details_prod_bk').click()
                }
            }
        }
    });
    return productBlock;
}

INC_COL.methods.createcolProductModalBlock = function(pdpProductId, blockType, bundleProductListCheck, parentblock, elmodalblock, mainprod) {
    var productBlock = elmodalblock.querySelector('.inc_prd_bk')
    var findObj = new INC_COL.classes.FindObj({
        id: pdpProductId
    });
    var productObj = INC_COL.dataStore.methods().getProductById(findObj);

    productBlock.setAttribute('data-id', productObj.id);
    productBlock.setAttribute('data-sku', productObj.sku);
    productBlock.setAttribute('data-main_id', productObj.mainId);
    productBlock.setAttribute('data-bundle_id', productObj.bundleId);
    productBlock.setAttribute('data-comboId', productObj.comboId);
    productBlock.classList.add(productObj.ProductType)

    var main_prod_id = productObj.mainId

    var elHeaderInfoBlck = productBlock.querySelector('.inc_prd_info_main_bk');
    var elHeader = productBlock.querySelector('.inc_prd_hdr_main_bk');
    var elImgBlock = productBlock.querySelector('.inc_prd_img_bk');
    var elImgGalleryListBlock = productBlock.querySelector('.inc_prd_img_gallery_list_bk');
    var elTitleBlock = productBlock.querySelector('.inc_prd_desc_title_bk');
    var elTitleTextBlock = productBlock.querySelector('.inc_prd_desc_title_txt_bk');
    var elTitleText = productBlock.querySelector('.inc_prd_desc_title_txt');
    var elproductPriceBlock = productBlock.querySelector('.inc_prd_desc_ecirp_bk');
    var elproductPriceLabel = productBlock.querySelector('.inc_prd_ecirp_label_bk');
    var elPriceActiveText = productBlock.querySelector('.inc_prd_desc_ecirp_active_text');
    ;var elPriceActiveMsg = productBlock.querySelector('.inc_prd_desc_ecirp_active_text_msg');
    var elPriceRegularText = productBlock.querySelector('.inc_prd_desc_ecirp_regular_text');
    var eleditblock = productBlock.querySelector('.inc_prd_desc_att_edit_bk');
    var elAttBlock = productBlock.querySelector('.inc_prd_desc_att_bk');
    var elAttColorBlock = productBlock.querySelector('.inc_prd_desc_att_color_bk');
    var elAttColorTitleText = productBlock.querySelector('.inc_prd_desc_att_color_title_txt');
    var elAttColorTitleTextSelected = productBlock.querySelector('.inc_prd_desc_att_color_title_txt_selected');
    var elAttColorListBlock = productBlock.querySelector('.inc_prd_desc_att_color_list_bk');
    var elAttSizeBlock = productBlock.querySelector('.inc_prd_desc_att_size_bk');
    var elAttSizeTitleBlock = productBlock.querySelector('.inc_prd_desc_att_size_title_bk');
    var elAttSizeTitleText = productBlock.querySelector('.inc_prd_desc_att_size_title_txt');
    var elAttSizeTitleTextSelected = productBlock.querySelector('.inc_prd_desc_att_size_title_txt_selected');
    var elAttSizeListBlock = productBlock.querySelector('.inc_prd_desc_att_size_list_bk');
    var elAtt0ListBlock = productBlock.querySelector('.inc_prd_desc_att_zero_list_bk');
    var elAtt3ListBlock = productBlock.querySelector('.inc_prd_desc_att_third_list_bk');
    var elAtt4ListBlock = productBlock.querySelector('.inc_prd_desc_att_fourth_list_bk');

    var elAtt0Block = productBlock.querySelector('.inc_prd_desc_att_zero_bk');
    var elAtt3Block = productBlock.querySelector('.inc_prd_desc_att_third_bk');
    var elAtt4Block = productBlock.querySelector('.inc_prd_desc_att_fourth_bk');
    var elAtt0TitleTextSelected = productBlock.querySelector('.inc_prd_desc_att_zero_title_txt_selected');
    var elAtt0TitleText = productBlock.querySelector('.inc_prd_desc_att_zero_title_txt');
    var elAtt3TitleTextSelected = productBlock.querySelector('.inc_prd_desc_att_third_title_txt_selected');
    var elAtt3TitleText = productBlock.querySelector('.inc_prd_desc_att_third_title_txt');
    var elAtt4TitleTextSelected = productBlock.querySelector('.inc_prd_desc_att_fourth_title_txt_selected');
    var elAtt4TitleText = productBlock.querySelector('.inc_prd_desc_att_fourth_title_txt');
    var elQtyBlock = productBlock.querySelector('.inc_prd_desc_qty_bk');
    var elQtyInputText = productBlock.querySelector('.inc_prd_desc_qty_input_text');
    var elQtyDownBlock = productBlock.querySelector('.inc_prd_desc_qty_down_bk');
    var elQtyUpBlock = productBlock.querySelector('.inc_prd_desc_qty_up_bk');
    var elAddBlock = productBlock.querySelector('.inc_prd_desc_add_bk');
    var elAddText = productBlock.querySelector('.inc_prd_desc_add_text');
    var elAddImg = productBlock.querySelector('.inc_prd_desc_add_img');
    var elratingsBlock = productBlock.querySelector('.inc_prd_desc_ratings_bk');
    var elworthPrice = productBlock.querySelector('.inc_prd_desc_ecirp_worth_text');
    var eldetailsprodblock = productBlock.querySelector('.inc_prd_desc_att_details_bk');
    var eladdvarianttext = productBlock.querySelector('.inc_prd_variant_simple_text');
    var elconfigtitle = productBlock.querySelector('.inc_prd_desc_add_title_txt_bk');
    var elvariantaddbtn = productBlock.querySelector('.inc_prd_desc_att_variant_add_bk');
    var elvariantaddbtntext = productBlock.querySelector('.inc_prd_desc_att_variant_text');
    var elvariantviewdetails = productBlock.querySelector('.inc_prd_desc_att_variant_view_details_bk');
    var elvariantviewdetailstext = productBlock.querySelector('.inc_prd_desc_att_variant_view_details_text');
    var eldescblock = productBlock.querySelector('.inc_prd_desc_bk');
    var elbstxtblock = productBlock.querySelector('.inc_prd_bstxt_bk');
    var elvariantpopupclose = productBlock.querySelector('.inc_prd_desc_variant_popup_close_bk');
    var elselectoptaddbtn = productBlock.querySelector('.inc_prd_variant_simple_bk');
    var elsizetitleblock = productBlock.querySelector('.inc_prd_desc_att_zero_title_bk');
    var eldescrpionblock = productBlock.querySelector('.inc_prd_desc_bk');
    var elPackOfListBlock = productBlock.querySelector('.inc_prd_desc_pack_of_list_bk');
    var productDescQtyInputText = productBlock.querySelector('.inc_prd_desc_qty_input_text');
    var productDescQtyBlock = productBlock.querySelector('.inc_prd_desc_qty_bk');
    var productDescAddText = productBlock.querySelector('.inc_prd_add_text');
    var elQtyAddBtnBlock = productBlock.querySelector('.inc_prd_desc_qty_add_btn_bk');
    var elGalleryRightArrow = productBlock.querySelector('.inc_prd_img_gallery_right_bk');
    var elGallerylefttArrow = productBlock.querySelector('.inc_prd_img_gallery_left_bk');
    var colcolproductDescriptionMainBlock = productBlock.querySelector('.inc_prd_description_main_bk');
    var productHeaderMainBlockTitle = productBlock.querySelector('.inc_prd_hdr_main_title_bk')
    var productHeaderMainBlockRating = productBlock.querySelector('.inc_prd_hdr_main_rating_bk')
    var elproductPriceLabel = productBlock.querySelector('.inc_prd_ecirp_label_bk')
    var elcolortitleblock = productBlock.querySelector('.inc_prd_desc_att_color_title_bk')
    var elHeaderTitle = productBlock.querySelector('.inc_col_hdr_title')
    // elproductPriceLabel.innerHTML = "SALE"
    var colelInfoText = productBlock.querySelector('.inc_prd_desc_info_text')
    var colelInfoBlock = productBlock.querySelector('.inc_prd_desc_info_text_bk')
    var colelFullDesctext = productBlock.querySelector('.inc_prd_Info_Full_desc_info_bk')
    // if (colelInfoText.querySelector('.see-more') != null) {
    //     colelInfoText.removeChild(colelInfoText.querySelector('.see-more'))
    // }
    var shortDescriptionVar = generate_html_tag('div');
    // shortDescriptionVar.innerText = colelInfoText.innerText;
    // if (productObj.description != "") {
    //     var short_desc=productObj.description;
    //     var deschtml =document.createElement('div')
    //     deschtml.innerHTML=short_desc;

    //     if(deschtml.querySelector('#information') != null){
    //         colelInfoText.innerHTML = deschtml.querySelector('#information').innerText.trim()
    //     }else{
    //         colelInfoText.innerHTML = deschtml.innerText
    //     }

    //     var read_more = document.createElement('a');
    //     read_more.classList.add('inc_readMore');
    //     read_more.innerHTML = 'Read more';

    //     colelInfoBlock.appendChild(read_more);

    //     colelFullDesctext.innerHTML = productObj.description;
    //     if (colelFullDesctext.querySelector('.see-more') != null) {
    //         colelFullDesctext.removeChild(colelFullDesctext.querySelector('.see-more'))
    //     }
    //     if (colelInfoBlock.querySelector('.inc_readMore') != null) {
    //         colelInfoBlock.querySelector('.inc_readMore').addEventListener("click", function (e) {
    //             productBlock.querySelector('.inc_prd_Info_Full_desc_info_bk').classList.toggle('show_full_desc')
    //             productBlock.querySelector('.inc_prd_desc_info_text').classList.add('mobile_desc')
    //             productBlock.querySelector('.inc_prd_desc_info_bk').classList.add('mobile_desc_bk')
    //             e.target.classList.add('mobile_rm_hide')
    //         })
    //     }
    // }
    elHeader.querySelector('.inc_prd_hdr_img_bk').addEventListener("click", function() {
        if (document.querySelector('.inc_sidebar_modal_bk.inc_active') == null) {
            document.querySelector('html').classList.remove('inc_overlay');
            document.querySelector('body').classList.remove('inc_popup_open');
        }
        if (document.querySelector('.inc_sidebar_modal_bk.inc_active') != null) {
            document.querySelector('.inc_sidebar_modal_bk.inc_active').classList.remove('overflow_visible')
        }
        if (productBlock.parentNode.parentNode.querySelector('.inc_prd_modal_bk .inc_prd_desc_qty_input_text input') != null && productBlock.parentNode.parentNode.querySelector('.inc_prd_showcase_bk .inc_prd_desc_qty_input_text input') != null) {
            if (productBlock.parentNode.parentNode.querySelector('.inc_prd_modal_bk .inc_prd_desc_qty_input_text input').value != productBlock.parentNode.parentNode.querySelector('.inc_prd_showcase_bk .inc_prd_desc_qty_input_text input').value) {
                productBlock.parentNode.parentNode.querySelector('.inc_prd_modal_bk .inc_prd_desc_qty_input_text input').value = productBlock.parentNode.parentNode.querySelector('.inc_prd_showcase_bk .inc_prd_desc_qty_input_text input').value
            }
        }

        productBlock.parentNode.classList.remove("inc_active");
        productBlock.parentNode.querySelector('.inc_prd_hdr_title_bk').classList.add('inc_active');
        productBlock.parentNode.querySelector('.inc_product_hdr_title_bk_1').classList.remove('inc_active');
        if (document.querySelector('.inc_prd_modal_bk.inc_active') == null) {
            document.querySelector('html').setAttribute('style', 'overflow:auto')
        }
        if (inc_col_scroll_height > 100) {
            window.scrollTo(0, inc_col_scroll_height);
        }
    });

    var promo_div = "<div class='pc_promo_div inc_active'><span class='ec_avail_offer'>Available Offer</span><span class='pc_promo_span red_promo'>Offer</span></div>";
    var pro_div = document.createElement('div');
    pro_div.classList.add('ec_promo_div_main');
    pro_div.innerHTML = promo_div;

    var view = productBlock.querySelector('.inc_prd_desc_att_details_bk');
    if (productObj.PromotionalMessage != 'null' && productObj.PromotionalMessage != "" && productObj.PromotionalMessage != undefined) {
        view.parentNode.insertBefore(pro_div, view);
    }

    var elImgMainImg = elImgBlock.querySelector('.inc_prd_img_main_img');
    var elImgTag1 = generate_html_tag('img');
    elImgTag1.src = productObj.imageURLMain
    elImgTag1.setAttribute('data-src', productObj.imageURLMain)
    if (elImgTag1 == true) {
        elImgTag1.src = productObj.imageURLMain
    }
    elImgTag1.setAttribute('onerror', "this.src='" + INC_COL.config.noimage + "'");
    elImgTag1.setAttribute('role', 'img')
    elImgTag1.setAttribute('aria-label', 'Image')
    elImgTag1.setAttribute('alt', productObj.nameMain)
    if (window.innerWidth < 821) {
        if (productObj.otherImageList != null && productObj.otherImageList.length < 5) {
            elGalleryRightArrow.style.display = 'none';
            elGallerylefttArrow.style.display = 'none';
        }
    } else {
        if (productObj.otherImageList != null && productObj.otherImageList.length < 5) {
            elGalleryRightArrow.style.display = 'none';
            elGallerylefttArrow.style.display = 'none';
        }
    }
    var productLink = document.createElement('a');
    productLink.target = "_blank";
    productLink.setAttribute('rel', 'noopener noreferrer')
    productLink.href = productObj.url;
    productLink.appendChild(elImgTag1);
    productLink.style.cursor = 'pointer';
    productLink.setAttribute('otherImageList', productObj["otherImageList"])
    productLink.setAttribute('imageURL', productObj["imageURLMain"])
    add_swipee(productLink)
    elImgMainImg.appendChild(productLink);
    elImgMainImg.addEventListener("click", function() {
        INC_COL.methods.sendBundleClickTracking(productBlock.getAttribute('data-main_id'));
        getTrackingPixel();
    });
    elImgGalleryListBlock.innerHTML = "";
    if ((productObj.otherImageList != null) && productObj.otherImageList.length >= 1) {
        var otimg = 0

        if (productObj.otherImageList.length > 1) {
            productObj.otherImageList.forEach(function(otherImgURL) {
                otherImgURL = otherImgURL;
                var elImgGalleryListItemBlock = generate_html_tag('div', 'inc_prd_img_gallery_list_item_bk')
                var imglist = '<div class="inc_prd_img_gallery_list_item_img_bk"><div class="inc_prd_img_gallery_list_item_img"><img class="inc_lazy" data-src="' + otherImgURL + '" src="' + otherImgURL + '" role="img" aria-label="Image"  alt="' + productObj.name + '"></div></div><div class="inc_prd_img_gallery_list_item_text_bk"><div class="inc_prd_img_gallery_list_item_text"></div></div>'
                elImgGalleryListItemBlock.innerHTML = imglist

                var elImgGalleryListItemImg = elImgGalleryListItemBlock.querySelector('.inc_prd_img_gallery_list_item_img');

                var elOtherImgTag = elImgGalleryListItemBlock.querySelector('.inc_prd_img_gallery_list_item_img img')
                elOtherImgTag.src = otherImgURL
                elOtherImgTag.setAttribute('alt', productObj.name)
                elOtherImgTag.setAttribute('role', 'img')
                elOtherImgTag.setAttribute('aria-label', 'Image')
                elOtherImgTag.setAttribute('onerror', "this.src='" + INC_COL.config.noimage + "'");

                if (productObj.otherImageList.length > 4) {
                    elImgGalleryListItemImg.classList.add('OthImg4');
                }

                elImgGalleryListItemBlock.setAttribute('index', otimg)
                elImgGalleryListItemBlock.addEventListener("click", function() {
                    Array.prototype.forEach.call(productBlock.querySelectorAll('.inc_prd_img_gallery_list_item_bk'), function(galleryListItemBlock) {
                        galleryListItemBlock.classList.remove("inc_active");
                    });

                    elImgGalleryListItemBlock.classList.add("inc_active");

                    elImgMainImg.querySelector('img').src = otherImgURL;
                    elImgMainImg.querySelector('img').setAttribute('onerror', "this.src='" + INC_COL.config.noimage + "'");
                })

                elImgGalleryListBlock.appendChild(elImgGalleryListItemBlock);
                elImgGalleryListBlock.classList.add('SingleImage')
                if (otimg == 0) {
                    elImgGalleryListItemBlock.classList.add('inc_active')
                }
                otimg++;
                if (productObj.otherImageList.length > 5) {
                    elImgGalleryListItemBlock.parentNode.classList.add("flex-start")
                }
            });
        } else {
            var elImgGalleryListItemBlock = generate_html_tag('div', 'inc_prd_img_gallery_list_item_bk')
            var imglist = '<div class="inc_prd_img_gallery_list_item_img_bk"><div class="inc_prd_img_gallery_list_item_img"><img class="inc_lazy" data-src="' + productObj.otherImageList + '" src="' + productObj.otherImageList + '" role="img" aria-label="Image"  alt="' + productObj.name + '"></div></div><div class="inc_prd_img_gallery_list_item_text_bk"><div class="inc_prd_img_gallery_list_item_text"></div></div>'
            elImgGalleryListItemBlock.innerHTML = imglist

            var elImgGalleryListItemImg = elImgGalleryListItemBlock.querySelector('.inc_prd_img_gallery_list_item_img');

            var elOtherImgTag = elImgGalleryListItemBlock.querySelector('.inc_prd_img_gallery_list_item_img img')
            elOtherImgTag.src = productObj.otherImageList
            elOtherImgTag.setAttribute('alt', productObj.name)
            elOtherImgTag.setAttribute('role', 'img')
            elOtherImgTag.setAttribute('aria-label', 'Image')
            elOtherImgTag.setAttribute('onerror', "this.src='" + INC_COL.config.noimage + "'");

            elImgGalleryListItemBlock.setAttribute('index', 0)
            elImgGalleryListItemBlock.addEventListener("click", function() {
                Array.prototype.forEach.call(productBlock.querySelectorAll('.inc_prd_img_gallery_list_item_bk'), function(galleryListItemBlock) {
                    galleryListItemBlock.classList.remove("inc_active");
                });

                elImgGalleryListItemBlock.classList.add("inc_active");

                elImgMainImg.querySelector('img').src = productObj.otherImageList;
                elImgMainImg.querySelector('img').setAttribute('onerror', "this.src='" + INC_COL.config.noimage + "'");
            })

            elImgGalleryListBlock.appendChild(elImgGalleryListItemBlock);
            elImgGalleryListBlock.classList.add('SingleImage')
            elImgGalleryListItemBlock.classList.add('inc_active')

            if (productObj.otherImageList.length > 5) {
                elImgGalleryListItemBlock.parentNode.classList.add("flex-start")
            }
        }
    } else {
        productBlock.classList.add('inc_other_noimage')
    }
    elTitleBlock.addEventListener("click", function() {
        INC_COL.methods.sendBundleClickTracking(productBlock.getAttribute('data-main_id'));
        getTrackingPixel();
    });
    var pTitleDiv = document.createElement('div');
    pTitleDiv.innerText = productObj.nameMain;
    var pLinkModal = document.createElement('a');
    pLinkModal.setAttribute("title", productObj.nameMain);
    pLinkModal.setAttribute("href", productObj.url);
    pLinkModal.setAttribute("target", "_blank");
    pLinkModal.setAttribute('rel', 'noopener noreferrer')
    pLinkModal.innerText = productObj.nameMain;
    productHeaderMainBlockTitle.appendChild(pLinkModal)
    pLinkModal.addEventListener("click", function() {
        INC_COL.methods.sendBundleClickTracking(productObj.mainId);
        getTrackingPixel()
    });

    var field1 = productObj.ratingsCount
    var field2 = productObj.reviewsCount
    INC_COL.methods.get_product_ratingscol(field1, field2, productHeaderMainBlockRating);
    var pLinkModalSKU = document.createElement('span');
    pLinkModalSKU.classList.add("product_modal_sku");
    pLinkModalSKU.innerText = "#" + productObj.sku
    // productHeaderMainBlockRating.appendChild(pLinkModalSKU)

    var pLink = document.createElement('a');
    pLink.href = productObj.url;
    pLink.setAttribute('style', 'text-transform: unset;')
    pLink.setAttribute('title', productObj.nameMain)
    pLink.appendChild(pTitleDiv);
    elTitleText.appendChild(pLink);

    if (productObj.description != "" && productObj.description != undefined) {
        if (isBase64(productObj.description) && isBase64(productObj.description)) {
            if (productObj.description != "" && productObj.description != undefined && productObj.description != "" && productObj.description != undefined) {
                var dochtm = document.createElement('div')
                dochtm.innerHTML = atob(productObj.description) + atob(productObj.description)
                colcolproductDescriptionMainBlock.innerHTML = dochtm.innerHTML.replace("|", '');
            } else {
                if (productObj.description != "" && productObj.description != undefined) {
                    var dochtm = document.createElement('div')
                    dochtm.innerHTML = atob(productObj.description);
                    colcolproductDescriptionMainBlock.innerHTML = dochtm.innerHTML.replace("|", '');
                }
            }
        } else {
            if (window.innerWidth < 820) {
                colcolproductDescriptionMainBlock.innerHTML = productObj.description;
            } else {
                colcolproductDescriptionMainBlock.innerHTML = productObj.description;
            }
            // colcolproductDescriptionMainBlock.innerHTML =  productObj.description;
        }
    } else {
        colcolproductDescriptionMainBlock.innerHTML = "<div>Description</div>" + productObj.Field1
    }
    if (mainprod == "mainprod" && (window.location.href.indexOf('incgs=2') >= 0 || window.location.href.indexOf('incgs=1') >= 0 || window.location.href.indexOf('incgs=3') >= 0)) {
        pTitleDiv.innerHTML = productObj.combotitle
        //+ " - Pack of " + INC_COL.config.collectioncount;
        elImgTag1.src = productObj.comboimg
    }
    var totalsaveprc = get_discount_price(productObj.regularPriceMain * INC_COL.config.collectioncount, productObj.activePriceMain * INC_COL.config.collectioncount)
    var activePrice = parseFloat(productObj.activePriceMain * INC_COL.config.collectioncount).toFixed(2).toString();
    var regularPrice = parseFloat(productObj.regularPriceMain * INC_COL.config.collectioncount).toFixed(2).toString();
    var totalsaveper = get_discount_price_percentage(productObj.regularPriceMain * INC_COL.config.collectioncount, productObj.activePriceMain * INC_COL.config.collectioncount)

    elPriceRegularText.innerText = "";
    if (activePrice != regularPrice && regularPrice != "" && regularPrice != null && regularPrice != 0) {
        elPriceActiveText.parentNode.parentNode.parentNode.classList.add('is_special_ecirp')
        elPriceActiveText.innerHTML = formatter.format(activePrice)
        elPriceRegularText.innerHTML = INC_COL.clientConfig.regularPricePrefix + formatter.format(regularPrice)
        if (totalsaveper > 0) {
            elworthPrice.innerHTML = "<span>You save</span> " + formatter.format(totalsaveprc);
            ;
        }
    } else {
        elworthPrice.innerHTML = '';
        elPriceActiveText.innerText = formatter.format(activePrice)
    }
    var elQtyInput = generate_html_tag('input');
    elQtyInput.setAttribute('type', "number");
    elQtyInput.setAttribute('aria-label', "quantity");
    elQtyInput.setAttribute('min', 1);
    elQtyInput.setAttribute('max', 999);
    elQtyInput.setAttribute('maxlength', 3);
    elQtyInput.value = 1;
    elQtyInput.setAttribute('old_qty', '1');
    // elQtyInput.setAttribute('readOnly', '');
    elQtyInput.setAttribute('pattern', '/^-?\d+\.?\d*$/');
    elQtyInput.setAttribute("onkeydown", "if(event.key==='.'){event.preventDefault();}");
    elQtyInput.setAttribute('onKeyPress', 'if(this.value.length==3) return false;');
    elQtyInput.setAttribute('oninput', "validity.valid||(value='1')");
    productDescQtyBlock.classList.add('singleqty')

    elQtyInput.addEventListener("keydown", function(event) {
        var old_qty = this.value
        var keyCode = event.which || event.keyCode;
        if (keyCode === 13) {
            event.preventDefault();
        } else if (($.inArray(event.keyCode, incallowedKeys) !== -1) || (keyCode === 65 && (event.ctrlKey || event.metaKey)) || (keyCode >= 35 && keyCode <= 40)) {
            return;
        }
        var charValue = String.fromCharCode(keyCode)
          , valid = /^[0-9]+$/.test(charValue);
        if (!valid) {
            event.preventDefault();
        } else {
            setTimeout(function() {
                if (elQtyInput.value.length == 0)
                    elQtyInput.value = 1;
                if (elQtyInput.value == 0)
                    elQtyInput.value = 1;
                if (elQtyInput.value > 100)
                    elQtyInput.value = 100;
                var productModuleBlock = productBlock.parentNode.parentNode;
                var showcaseProductBlock = productModuleBlock.querySelector('.inc_prd_showcase_bk').querySelector('.inc_prd_bk');
                showcaseProductBlock.querySelector('.inc_prd_desc_qty_bk').querySelector('input').value = parseInt(elQtyInput.value);

                var id = productBlock.getAttribute('data-id');
                var qty = parseInt(elQtyInput.value);
                var main_id = productBlock.getAttribute('data-main_id');
                var bundle_id = productBlock.getAttribute('data-bundle_id');
                var combo_id = productBlock.getAttribute('data-comboid');
                var pname = productBlock.querySelector('.inc_prd_desc_title_txt').textContent;
                var pprice = productBlock.querySelector('.inc_prd_desc_ecirp_active_text').textContent.replace('£', '');
                if (elAddText.textContent == 'Added' || elAddText.textContent == "Update") {
                    INC_COL.methods.updatecolBundleCart({
                        sku: id,
                        qty: qty
                    }, "add", main_id, bundle_id, pname, pprice, combo_id);
                }
                if (elQtyInput.value == 1) {
                    elQtyBlock.classList.add('singleqty')
                } else {
                    elQtyBlock.classList.remove('singleqty')
                }
                if (productBlock.parentNode.parentNode.parentNode.classList.contains('inc_pdp_product-main_bk') == true) {
                    var bundleblock = productBlock.parentNode.parentNode.parentNode.parentNode.parentNode
                    if (bundleblock.classList.contains('inc_pdp_bundle_bk') == true) {
                        INC_COL.methods.updateallbasketprice(bundleblock)
                    }
                } else if (productBlock.parentNode.parentNode.parentNode.classList.contains('inc_pdp_product-main_bk') == false) {
                    var bundleblock = productBlock.parentNode.parentNode.parentNode.parentNode.parentNode.parentNode.parentNode
                    if (bundleblock.classList.contains('inc_pdp_bundle_bk') == true) {
                        INC_COL.methods.updateallbasketprice(bundleblock)
                    }
                }
            }, 50);
        }
    });
    elQtyInput.addEventListener('focusout', function(ev) {
        var old_qty = this.value
        var elm = ev.currentTarget
        if (elm.tagName != "INPUT") {
            elm = elm.querySelector('input')
        }
        var prod_card = elm.parentNode.parentNode.parentNode.parentNode.parentNode.parentNode.parentNode.parentNode.parentNode.parentNode
        if (prod_card.classList.contains('inc_prd_showcase_bk') == true) {
            prod_card = elm.parentNode.parentNode.parentNode.parentNode.parentNode.parentNode.parentNode.parentNode.parentNode.parentNode.parentNode
        }
        if (elm.value.length == 0) {
            setTimeout(function() {
                if (elQtyInput.value.length == 0)
                    elQtyInput.value = 1;
                if (elQtyInput.value == 0)
                    elQtyInput.value = 1;
                if (elQtyInput.value > 100)
                    elQtyInput.value = 100;

                var productModuleBlock = productBlock.parentNode.parentNode;
                var showcaseProductBlock = productModuleBlock.querySelector('.inc_prd_showcase_bk').querySelector('.inc_prd_bk');

                showcaseProductBlock.querySelector('.inc_prd_desc_qty_bk').querySelector('input').value = parseInt(elQtyInput.value);

                var id = productBlock.getAttribute('data-id');
                var qty = parseInt(elQtyInput.value);
                var main_id = productBlock.getAttribute('data-main_id');
                var bundle_id = productBlock.getAttribute('data-bundle_id');
                var combo_id = productBlock.getAttribute('data-comboid');
                var pname = productBlock.querySelector('.inc_prd_desc_title_txt').textContent;
                var pprice = productBlock.querySelector('.inc_prd_desc_ecirp_active_text').textContent.replace('£', '');
                if (elAddText.textContent == 'Added' || elAddText.textContent == "Update") {
                    INC_COL.methods.updatecolBundleCart({
                        sku: id,
                        qty: qty
                    }, "add", main_id, bundle_id, pname, pprice, combo_id);
                }
                if (elQtyInput.value == 1) {
                    elQtyBlock.classList.add('singleqty')
                }
                if (productBlock.parentNode.parentNode.parentNode.classList.contains('inc_pdp_product-main_bk') == true) {
                    var bundleblock = productBlock.parentNode.parentNode.parentNode.parentNode.parentNode
                    if (bundleblock.classList.contains('inc_pdp_bundle_bk') == true) {
                        INC_COL.methods.updateallbasketprice(bundleblock)
                    }
                } else if (productBlock.parentNode.parentNode.parentNode.classList.contains('inc_pdp_product-main_bk') == false) {
                    var bundleblock = productBlock.parentNode.parentNode.parentNode.parentNode.parentNode.parentNode.parentNode
                    if (bundleblock.classList.contains('inc_pdp_bundle_bk') == true) {
                        INC_COL.methods.updateallbasketprice(bundleblock)
                    }
                }
            }, 50);
        }
    });

    productDescQtyInputText.appendChild(elQtyInput);
    elQtyDownBlock.addEventListener('click', function() {
        var prod_card = elQtyInput.parentNode.parentNode.parentNode.parentNode.parentNode.parentNode.parentNode.parentNode.parentNode.parentNode
        elQtyInput.value = (elQtyInput.value - 1 < 1) ? 1 : elQtyInput.value - 1;

        if (elQtyInput.value == 1) {
            productDescQtyBlock.classList.add('singleqty')
        }
        var productModuleBlock = productBlock.parentNode.parentNode;
        var productModuleBlock = productBlock.parentNode.parentNode;
        var showcaseProductBlock = productModuleBlock.querySelector('.inc_prd_showcase_bk').querySelector('.inc_prd_bk');
        var modalProductBlock = productModuleBlock.querySelector('.inc_prd_modal_bk').querySelector('.inc_prd_bk')

        showcaseProductBlock.querySelector('.inc_prd_desc_qty_bk').querySelector('input').value = parseInt(elQtyInput.value);
        modalProductBlock.querySelector('.inc_prd_desc_qty_input_text input').value = parseInt(elQtyInput.value);

        var id = productBlock.getAttribute('data-id');
        var sku = productBlock.getAttribute('data-sku');
        var qty = parseInt(elQtyInput.value);
        var bundle_id = productBlock.getAttribute('data-bundle_id');
        var main_id = productBlock.getAttribute('data-main_id');
        var combo_id = productBlock.getAttribute('data-comboid');
        var pname = productBlock.querySelector('.inc_prd_desc_title_txt').innerText;
        var pprice = productBlock.querySelector('.inc_prd_desc_ecirp_active_text').innerText.replace('£', '');
        if (parseInt(elQtyInput.value) == 1 && productDescQtyBlock.classList.contains('singleqty') == true) {
            if (elAddText.textContent == "Added" || elAddText.textContent == "Update" || elAddText.textContent == INC_COL.config.AddedText || elAddText.textContent == INC_COL.config.UpdateText) {
                var modal_blck = productModuleBlock.querySelector('.inc_prd_modal_bk')
                var showcase_blck = productModuleBlock.querySelector('.inc_prd_showcase_bk')
                var elAddTextshowcase = showcase_blck.querySelector('.inc_prd_desc_add_text')
                var elAddTextmodal = modal_blck.querySelector('.inc_prd_desc_add_text')
                if (INC_COL.config.pageType == "pdpcollection" && blockType == "pdpcollection")
                    INC_COL.methods.updatecolBundleCart({
                        sku: id,
                        qty: qty
                    }, "add", main_id, bundle_id, pname, pprice, combo_id);
            }
        } else {
            if (elAddText.textContent == "Added" || elAddText.textContent == "Update" || elAddText.textContent == INC_COL.config.AddedText || elAddText.textContent == INC_COL.config.UpdateText) {
                INC_COL.methods.updatecolBundleCart({
                    sku: id,
                    qty: qty
                }, "add", main_id, bundle_id, pname, pprice, combo_id);
            }
        }
        if (elQtyInput.value == 1) {
            elQtyBlock.classList.add('singleqty')
            productModuleBlock.querySelector('.inc_prd_showcase_bk .inc_prd_desc_qty_bk').classList.add('singleqty')
            productModuleBlock.querySelector('.inc_prd_showcase_bk .inc_prd_desc_qty_bk').classList.add('singleqty')
        }
        setTimeout(function() {
            if (productBlock.parentNode.parentNode.parentNode.classList.contains('inc_pdp_product-main_bk') == true) {
                var bundleblock = productBlock.parentNode.parentNode.parentNode.parentNode.parentNode
                if (bundleblock.classList.contains('inc_pdp_bundle_bk') == true) {
                    INC_COL.methods.updateallbasketprice(bundleblock)
                }
            } else if (productBlock.parentNode.parentNode.parentNode.classList.contains('inc_pdp_product-main_bk') == false) {
                var bundleblock = productBlock.parentNode.parentNode.parentNode.parentNode.parentNode.parentNode.parentNode
                if (bundleblock.classList.contains('inc_pdp_bundle_bk') == true) {
                    INC_COL.methods.updateallbasketprice(bundleblock)
                }
            }
        }, 200)
    });

    elQtyUpBlock.addEventListener('click', function() {
        var prod_card = elQtyInput.parentNode.parentNode.parentNode.parentNode.parentNode.parentNode.parentNode.parentNode.parentNode
        elQtyInput.value = (parseInt(elQtyInput.value) + 1 > 100) ? 100 : parseInt(elQtyInput.value) + 1;

        var productModuleBlock = productBlock.parentNode.parentNode;

        var showcaseProductBlock = productModuleBlock.querySelector('.inc_prd_showcase_bk').querySelector('.inc_prd_bk');
        var modalProductBlock = productModuleBlock.querySelector('.inc_prd_modal_bk').querySelector('.inc_prd_bk')

        showcaseProductBlock.querySelector('.inc_prd_desc_qty_bk').querySelector('input').value = parseInt(elQtyInput.value);
        modalProductBlock.querySelector('.inc_prd_desc_qty_input_text input').value = parseInt(elQtyInput.value);

        productDescQtyBlock.classList.remove('singleqty')
        productModuleBlock.querySelector('.inc_prd_showcase_bk .inc_prd_desc_qty_bk').classList.remove('singleqty')
        var id = productBlock.getAttribute('data-id');
        var qty = parseInt(elQtyInput.value);
        var bundle_id = productBlock.getAttribute('data-bundle_id');
        var main_id = productBlock.getAttribute('data-main_id');
        var combo_id = productBlock.getAttribute('data-comboid');
        var pname = productBlock.querySelector('.inc_prd_desc_title_txt').innerText;
        var pprice = productBlock.querySelector('.inc_prd_desc_ecirp_active_text').innerText.replace('£', '');
        if (elAddText.textContent == "Added" || elAddText.textContent == "Update" || elAddText.textContent == INC_COL.config.AddedText || elAddText.textContent == INC_COL.config.UpdateText) {
            INC_COL.methods.updatecolBundleCart({
                sku: id,
                qty: qty
            }, "add", main_id, bundle_id, pname, pprice, combo_id);
        }
        setTimeout(function() {
            if (productBlock.parentNode.parentNode.parentNode.classList.contains('inc_pdp_product-main_bk') == true) {
                var bundleblock = productBlock.parentNode.parentNode.parentNode.parentNode.parentNode
                if (bundleblock.classList.contains('inc_pdp_bundle_bk') == true) {
                    INC_COL.methods.updateallbasketprice(bundleblock)
                }
            } else if (productBlock.parentNode.parentNode.parentNode.classList.contains('inc_pdp_product-main_bk') == false) {
                var bundleblock = productBlock.parentNode.parentNode.parentNode.parentNode.parentNode.parentNode.parentNode
                if (bundleblock.classList.contains('inc_pdp_bundle_bk') == true) {
                    INC_COL.methods.updateallbasketprice(bundleblock)
                }
            }
        }, 200)
    });
    var elPackOfArrray = [];
    var qty_c = 8
    if (document.querySelectorAll('select[name="quantity"] option') != null && blockType == "pdp" && productObj.mainId == INC_COL.methods.getProductIdFromWebPage()) {
        qty_c = document.querySelectorAll('select[name="quantity"] option').length
    }
    // for (var i = 0; i < qty_c; i++) elPackOfArrray.push(i);
    // elPackOfArrray.forEach(function(i) {
    //     var elPackOfItemBlock1 = generate_html_tag('div','inc_prd_desc_pack_of_item_bk');
    //     var packtext = generate_html_tag('div','inc_prd_desc_pack_of_item_quantity_text')
    //     elPackOfItemBlock1.appendChild(packtext)
    //     packtext.innerText = i + 1;
    //     elPackOfListBlock.appendChild(elPackOfItemBlock1);
    //     elPackOfItemBlock1.addEventListener("click", function() { 
    //         elQtyInput.value = i + 1;
    //         var sku = productBlock.getAttribute('data-sku');
    //         var qty = parseInt(elQtyInput.value);
    //         var elm = elQtyInput.parentNode.parentNode.parentNode.parentNode.parentNode;
    //         var prod_bk = elm.parentNode.parentNode.parentNode.parentNode.parentNode;
    //         if(prod_bk.querySelector('.inc_prd_showcase_bk .inc_prd_desc_qty_input_text input') != null){
    //             prod_bk.querySelector('.inc_prd_showcase_bk .inc_prd_desc_qty_input_text input').value=qty
    //         }

    //         if (elAddText.innerText == "ADDED" || elAddText.innerText == "UPDATE" || elAddText.innerText == "Update" || elAddText.innerText == "Added") {
    //            // INC_COL.methods.updateBundleCart({ sku: sku, qty: qty }, "add");
    //            if(isIE()){
    //             setTimeout(function(){
    //                 INC_COL.methods.updatecolBundleCart({ sku: sku, qty: qty }, "add");
    //             },10);
    //         }else{
    //             INC_COL.methods.updatecolBundleCart({ sku: sku, qty: qty }, "add");
    //         }
    //         }
    //         setTimeout(function(){
    //             elPackOfListBlock.classList.remove("active");
    //         })

    //     });
    // });
    elQtyBlock.addEventListener('click', function() {
        if (elPackOfListBlock != null) {// elPackOfListBlock.classList.toggle("active");
        }
    })
    findObj = new INC_COL.classes.FindObj({
        mainId: productObj.mainId
    });
    // if (INC_COL.dataStore.methods().getProductColorsObj(findObj).colorArray.length == 0 && INC_COL.dataStore.methods().getProductopt0Obj(findObj).att0Array.length == 0) {
    //     elHeader.querySelector('.inc_prd_hdr_title_txt').innerText = "Overview";
    // } else {
    //     if (INC_COL.dataStore.methods().getProductopt0Obj(findObj).att0Array.length > 0) {
    //         if (INC_COL.dataStore.methods().getProductopt0Obj(findObj).att0Array[0] != undefined) {
    //             elHeader.querySelector('.inc_prd_hdr_title_txt').innerText = "Overview";
    //         } else {
    //             elHeader.querySelector('.inc_prd_hdr_title_txt').innerText = "Overview";
    //         }
    //     } else if (INC_COL.dataStore.methods().getProductColorsObj(findObj).colorArray.length > 0) {
    //         elHeader.querySelector('.inc_prd_hdr_title_txt').innerText = "Overview";
    //     }
    // }
    var inc_product_hdr_title_bk_1 = productBlock.querySelector('.inc_product_hdr_title_bk_1')
    var inc_product_hdr_title_txt_bk_1 = productBlock.querySelector('.inc_product_hdr_title_txt_bk_1')
    var inc_product_hdr_title_txt_1 = productBlock.querySelector('.inc_product_hdr_title_txt_1')
    inc_product_hdr_title_txt_1.innerText = "Product Description";

    var descriptionhtml = generate_html_tag('div', 'inc_descriptionhtml')
    if (productObj.description != "" && productObj.description != undefined) {
        if (isBase64(productObj.description) && isBase64(productObj.description)) {
            if (productObj.description != "" && productObj.description != undefined && productObj.description != "" && productObj.description != undefined) {
                var dochtm = document.createElement('div')
                dochtm.innerHTML = atob(productObj.description) + atob(productObj.description)
                descriptionhtml.innerHTML = dochtm.innerHTML.replace("|", '');
            } else {
                if (productObj.description != "" && productObj.description != undefined) {
                    var dochtm = document.createElement('div')
                    dochtm.innerHTML = atob(productObj.description);
                    descriptionhtml.innerHTML = dochtm.innerHTML.replace("|", '');
                }
            }
        } else {
            if (window.innerWidth < 820) {
                descriptionhtml.innerHTML = "<span>Product Description</span>" + productObj.description;
            } else {
                descriptionhtml.innerHTML = productObj.description;
            }
        }
    } else {
        descriptionhtml.innerHTML = "<div>Description</div>" + productObj.Field1
    }

    var inc_prd_hdr_title_bk = inc_product_hdr_title_bk_1.parentNode.querySelector('.inc_prd_hdr_title_bk');

    var inc_prd_hdr_new_page = productBlock.querySelector('.inc_prd_hdr_new_page')
    var inc_prd_hdr_new_page_text = productBlock.querySelector('.inc_prd_hdr_new_page .inc_prd_hdr_new_page_text')
    inc_prd_hdr_new_page_text.innerText = "Open in a New Tab"
    inc_prd_hdr_new_page_text.setAttribute("href", productObj.url)
    inc_prd_hdr_new_page_text.setAttribute("target", "_blank")
    inc_prd_hdr_new_page_text.setAttribute('rel', 'noopener noreferrer')
    inc_prd_hdr_new_page.addEventListener("click", function() {
        INC_COL.methods.sendBundleClickTracking(productObj.mainId);
        getTrackingPixel()
    });

    inc_product_hdr_title_bk_1.addEventListener('click', function() {
        this.parentNode.parentNode.parentNode.querySelector(".inc_prd_description_main_bk").classList.add("inc_active")
        this.parentNode.parentNode.parentNode.querySelector(".inc_prd_info_main_bk").classList.remove("inc_active")
        this.parentNode.querySelector('.inc_prd_hdr_title_bk').classList.remove("inc_active");
        this.classList.add("inc_active");
        var prod_desc_bk = inc_product_hdr_title_bk_1.parentNode.parentNode.parentNode;

    });

    inc_prd_hdr_title_bk.classList.add('inc_active');

    inc_prd_hdr_title_bk.addEventListener('click', function() {
        this.parentNode.parentNode.parentNode.querySelector(".inc_prd_description_main_bk").classList.remove("inc_active")
        this.parentNode.parentNode.parentNode.querySelector(".inc_prd_info_main_bk").classList.add("inc_active")
        var prod_desc_bk = inc_product_hdr_title_bk_1.parentNode.parentNode.parentNode;
        inc_prd_hdr_title_bk.classList.add('inc_active');
        inc_product_hdr_title_bk_1.classList.remove('inc_active');
    });

    var product0Obj = INC_COL.dataStore.methods().getProductopt0Obj(findObj);

    var productSizesObj = INC_COL.dataStore.methods().getProductSizesObj(findObj);

    var productColorsObj = INC_COL.dataStore.methods().getProductColorsObj(findObj);

    var product3Obj = INC_COL.dataStore.methods().getProductopt3Obj(findObj);

    elAtt0ListBlock.innerHTML = "";
    elAttSizeListBlock.innerHTML = "";
    elAttColorListBlock.innerHTML = "";
    elAtt3ListBlock.innerHTML = "";

    if (product0Obj.att0Array.length > 0) {
        if (product0Obj["att0Array"][0].code != "Color") {
            findObj = new INC_COL.classes.FindObj({
                mainId: productObj.mainId
            });
            elAtt0ListBlock.innerHTML = "";
            var product0Obj = product0Obj;
            var productSizeText = "";
            if (product0Obj["att0Array"].length > 0) {
                elAtt0TitleText.innerText = product0Obj["att0Array"][0].code + ':';
                elAtt0Block.classList.add("inc_active");
                elAtt0Block.classList.add("inc_total_" + product0Obj["att0Array"].length)
                product0Obj["att0Array"].forEach(function(sizeObj) {
                    var attSizeBlock0 = generate_html_tag('div', 'inc_prd_desc_att_size_list_item_bk');
                    var attSizeImgBlock0 = generate_html_tag('div', 'inc_prd_desc_att_size_list_item_img_bk');
                    var attSizeImg0 = generate_html_tag('div', 'inc_prd_desc_att_size_list_item_img');

                    attSizeImgBlock0.setAttribute('onClick', 'INC_COL.methods.mappvariants(this,\'' + blockType + '\',"zero")')
                    if (true) {
                        elAtt0TitleTextSelected.innerText = "Please select the " + product0Obj["att0Array"][0].code;
                        if (elAtt0TitleTextSelected.innerText == "Please select your Size") {// elAtt0TitleTextSelected.setAttribute('style', 'color:#FF0000')
                        }

                    }
                    attSizeImgBlock0.classList.add('avail')
                    if (productSizeText.length == 0) {
                        productSizeText = sizeObj["text"];
                    }
                    var reg = new RegExp('^[A-Z]|XS|S|M|L|XL|XXL|XXXL|XX|XXXXL|2XL|3XL|4XL$');
                    var chckType = sizeObj["text"];

                    reg.test(chckType);
                    if (sizeObj["imgSrc"].length > 0) {
                        if (sizeObj["colorCode"] == "" || sizeObj["colorCode"] == undefined) {
                            var sizeimg = generate_html_tag('img');
                            sizeimg.setAttribute('alt', sizeObj["text"])
                            sizeimg.src = sizeObj["imgSrc"]
                            attSizeImgBlock0.setAttribute('data-optionimge', sizeObj["imgSrc"])
                            attSizeImgBlock0.appendChild(sizeimg);
                            elAtt0TitleText.classList.add('img_tag_avail')
                            elAtt0TitleText.style.display = "flex"
                            attSizeImgBlock0.classList.add('img_avail')
                        }
                    }
                    attSizeImg0.textContent = sizeObj["text"];
                    attSizeImgBlock0.setAttribute('data-size', sizeObj["text"]);
                    attSizeImgBlock0.setAttribute("datasize", sizeObj["text"].toLocaleLowerCase());
                    attSizeImgBlock0.setAttribute('data-option', "1");
                    attSizeImgBlock0.setAttribute('data-cpid', sizeObj["cpid"])
                    if (product0Obj["att0Array"][0].code == "size") {
                        attSizeImgBlock0.setAttribute('title', sizeObj["text"].toUpperCase());
                    } else if (product0Obj["att0Array"][0].code == "letter") {
                        attSizeImgBlock0.setAttribute('title', "Letter" + " " + sizeObj["text"].toUpperCase());
                    } else if (product0Obj["att0Array"][0].code == "choose") {
                        attSizeImgBlock0.setAttribute('title', "Number " + sizeObj["text"].toUpperCase());
                    } else {
                        attSizeImgBlock0.setAttribute('title', sizeObj["text"].toUpperCase());
                    }

                    attSizeImgBlock0.appendChild(attSizeImg0);
                    elAtt0ListBlock.appendChild(attSizeImgBlock0);

                });

            }
        }
    }

    if (productSizesObj.sizeArray.length > 0) {
        // if(window.innerWidth < 820){
        //     elHeaderTitle.innerText = "Select shade"; 
        // }else{
        //     elHeaderTitle.innerText = "Select a shade";
        // }
        if (productSizesObj["sizeArray"][0].code != "Color") {
            findObj = new INC_COL.classes.FindObj({
                mainId: productObj.mainId
            });

            elAttSizeListBlock.innerHTML = "";
            var productSizeText = "";

            if (productSizesObj["sizeArray"].length > 0) {
                elAttSizeTitleText.innerText = productSizesObj["sizeArray"][0].code + " :";
                elAttSizeBlock.classList.add("inc_active");
                productSizesObj["sizeArray"].forEach(function(sizeObj) {
                    var attSizeBlock = generate_html_tag('div', 'inc_prd_desc_att_size_list_item_bk');
                    var attSizeImgBlock = generate_html_tag('div', 'inc_prd_desc_att_size_list_item_img_bk');
                    var attSizeImg = generate_html_tag('div', 'inc_prd_desc_att_size_list_item_img');
                    elAttSizeTitleTextSelected.innerText = "Please select option"
                    if (elAttSizeTitleTextSelected.innerText == "Please select option") {// elAttSizeTitleTextSelected.setAttribute('style', 'color:#FF0000')
                    }
                    attSizeImgBlock.classList.add('avail')
                    attSizeImgBlock.setAttribute('onClick', 'INC_COL.methods.mappvariants(this,\'' + blockType + '\',"size")')
                    if (productSizeText.length == 0) {
                        productSizeText = sizeObj["text"];
                    }
                    var reg = new RegExp('^[A-Z]|XS|S|M|L|XL|XXL|XXXL|XX|XXXXL|2XL|3XL|4XL$');
                    var chckType = sizeObj["text"];

                    reg.test(chckType);

                    attSizeImg.innerText = sizeObj["text"];
                    attSizeImgBlock.setAttribute('data-size', sizeObj["text"]);
                    attSizeImgBlock.setAttribute("datasize", sizeObj["text"].toLocaleLowerCase());
                    attSizeImgBlock.setAttribute('data-option', "2");
                    if (productSizesObj["sizeArray"][0].code == "size") {
                        attSizeImgBlock.setAttribute('title', sizeObj["text"].toUpperCase());
                    } else if (productSizesObj["sizeArray"][0].code == "letter") {
                        attSizeImgBlock.setAttribute('title', "Letter" + " " + sizeObj["text"].toUpperCase());
                    } else if (productSizesObj["sizeArray"][0].code == "choose") {
                        attSizeImgBlock.setAttribute('title', "Number " + sizeObj["text"].toUpperCase());
                    } else {
                        attSizeImgBlock.setAttribute('title', sizeObj["text"].toUpperCase());
                    }

                    attSizeImgBlock.appendChild(attSizeImg);
                    elAttSizeListBlock.appendChild(attSizeImgBlock);

                });

            }
        }
    }

    if (productColorsObj.colorArray.length > 0) {
        // if(window.innerWidth < 820){
        //     elHeaderTitle.innerText = "Select shade"; 
        // }else{
        //     elHeaderTitle.innerText = "Select a shade";
        // }
        elAttColorListBlock.innerHTML = "";
        var one_attr_flag = false
        if (productColorsObj["colorArray"].length == 1) {
            one_attr_flag = true
        }
        if (productColorsObj["colorArray"].length > 0) {
            productColorsObj["colorArray"].forEach(function(colorObj) {
                elAttColorBlock.classList.add("inc_active");
                elAttColorTitleText.innerText = "Colour : ";
                var attColorBlock = generate_html_tag('div', 'inc_prd_desc_att_color_list_item_bk')
                var attColorImgBlock = generate_html_tag('div', 'inc_prd_desc_att_color_list_item_img_bk');
                var attColorImg = generate_html_tag('div', 'inc_prd_desc_att_color_list_item_img');
                var attColorTextBlock = generate_html_tag('div', 'inc_prd_desc_att_color_list_item_text_bk');
                var attColorText = generate_html_tag('div', 'inc_prd_desc_att_color_list_item_text');

                // attColorImg.style.backgroundColor = colorObj["colorCode"];
                attColorImgBlock.setAttribute('onClick', 'INC_COL.methods.mappvariants(this,\'' + blockType + '\',"color")')
                if (true) {
                    elAttColorTitleTextSelected.innerText = "Please select a Color"
                    if (elAttColorTitleTextSelected.innerText == "Please select a Color") {// elAttColorTitleTextSelected.setAttribute('style', 'color:#FF0000')
                    }
                }
                if (colorObj["colorCode"] != "" && colorObj["colorCode"] != undefined) {
                    var spancolorcode = generate_html_tag('span');
                    spancolorcode.setAttribute('alt', colorObj["text"])
                    spancolorcode.style.backgroundColor = colorObj["colorCode"];
                    attColorImg.appendChild(spancolorcode);
                } else if (colorObj["imgSrc"].length > 0) {
                    if (colorObj["colorCode"] == "") {
                        var colorImg = generate_html_tag('img');
                        colorImg.setAttribute('alt', colorObj["text"])
                        colorImg.src = colorObj["imgSrc"]
                        if (productObj.categoryName != "") {
                            colorImg.classList.add(productObj.categoryName.replace(/\s/g, ''))
                        }
                        attColorImg.appendChild(colorImg);
                    }
                }

                var colorTitle = generate_html_tag('a');
                colorTitle.innerText = colorObj["text"]
                colorTitle.title = colorObj["text"].toUpperCase();
                colorTitle.addEventListener('click', function(e) {
                    e.preventDefault();
                })

                // attColorImg.appendChild(colorTitle);
                attColorImgBlock.setAttribute('data-color', colorObj["text"]);
                attColorImgBlock.setAttribute("datacolor", colorObj["text"].toLocaleLowerCase());
                attColorImgBlock.setAttribute('data-option', "0");
                attColorImgBlock.setAttribute('data-cpid', colorObj["cpid"])
                attColorImgBlock.setAttribute('data-colorcode', colorObj["colorCode"])
                attColorImgBlock.setAttribute('data-optionimge', colorObj["imgSrc"])
                attColorImgBlock.appendChild(attColorImg);
                attColorBlock.appendChild(attColorImgBlock);
                elAttColorListBlock.appendChild(attColorBlock);
                var prod_id = productBlock.getAttribute('data-main_id');
                if (one_attr_flag == true) {
                    setTimeout(function() {
                        if (INC_COL.methods.getProductIdFromWebPage() == prod_id) {// attColorImgBlock.click()
                        }
                    }, 0)
                }
            });

        }
    }
    if (product3Obj.att3Array.length > 0) {
        if (product3Obj["att3Array"][0].code != "Color") {
            findObj = new INC_COL.classes.FindObj({
                mainId: productObj.mainId
            });

            elAtt3ListBlock.innerHTML = "";
            var productSizeText = "";
            if (product3Obj["att3Array"].length > 0) {
                product3Obj["att3Array"].forEach(function(sizeObj) {
                    elAtt3TitleTextSelected.innerText = "Please select option"
                    if (elAtt3TitleTextSelected.innerText == "Please select option") {// elAtt3TitleTextSelected.setAttribute('style', 'color:#FF0000')
                    }
                    elAtt3TitleText.innerText = product3Obj["att3Array"][0].code + " " + ":";
                    elAtt3Block.classList.add("inc_active");
                    var attSizeBlock3 = generate_html_tag('div', 'inc_prd_desc_att_third_list_item_bk');
                    var attSizeImgBlock3 = generate_html_tag('div', 'inc_prd_desc_att_third_list_item_img_bk');
                    var attSizeImg3 = generate_html_tag('div', 'inc_prd_desc_att_third_list_item_img');

                    attSizeImgBlock3.setAttribute('onClick', 'INC_COL.methods.mappvariants(this,\'' + blockType + '\',"third")')
                    attSizeImgBlock3.classList.add('avail')

                    if (productSizeText.length == 0) {
                        productSizeText = sizeObj["text"];
                    }
                    var reg = new RegExp('^[A-Z]|XS|S|M|L|XL|XXL|XXXL|XX|XXXXL|2XL|3XL|4XL$');
                    var chckType = sizeObj["text"];

                    reg.test(chckType);

                    attSizeImg3.innerText = sizeObj["text"];
                    attSizeImgBlock3.setAttribute('data-size', sizeObj["text"]);
                    attSizeImgBlock3.setAttribute("datasize", sizeObj["text"].toLocaleLowerCase());
                    attSizeImgBlock3.setAttribute('data-option', "3");

                    attSizeImgBlock3.appendChild(attSizeImg3);
                    elAtt3ListBlock.appendChild(attSizeImgBlock3);

                });
            }
        }
    }
    if (product0Obj["att0Array"].length > 0) {
        productBlock.querySelector('.inc_prd_desc_att_zero_title_bk').addEventListener('click', function() {
            if (document.querySelector('.inc_prd_desc_att_color_bk.show_dropdown') != null) {
                document.querySelector('.inc_prd_desc_att_color_bk.show_dropdown').classList.remove('show_dropdown')
            }
            this.parentNode.classList.toggle('show_dropdown')
        })
    }
    if (productColorsObj["colorArray"].length > 0) {
        productBlock.querySelector('.inc_prd_desc_att_color_title_bk').addEventListener('click', function() {
            if (document.querySelector('.inc_prd_desc_att_zero_bk.show_dropdown') != null) {
                document.querySelector('.inc_prd_desc_att_zero_bk.show_dropdown').classList.remove('show_dropdown')
            }
            this.parentNode.classList.toggle('show_dropdown')
        })
    }
    if (product0Obj.att0Array.length > 0) {
        elAtt0TitleTextSelected.addEventListener('click', function() {
            this.parentNode.parentNode.parentNode.classList.toggle('show_dropdown')
        })
        elAttBlock.classList.add('attributes_avail')
    } else if (productColorsObj["colorArray"].length > 0) {
        elAtt0TitleTextSelected.addEventListener('click', function() {
            this.parentNode.parentNode.parentNode.classList.toggle('show_dropdown')
        })
        elAttBlock.classList.add('attributes_avail')
    } else if (product3Obj["att3Array"].length > 0) {
        elAtt0TitleTextSelected.addEventListener('click', function() {
            this.parentNode.parentNode.parentNode.classList.toggle('show_dropdown')
        })
        elAttBlock.classList.add('attributes_avail')
    } else {
        if (productSizesObj["sizeArray"].length > 0) {
            elAtt0TitleTextSelected.addEventListener('click', function() {
                this.parentNode.parentNode.parentNode.classList.toggle('show_dropdown')
            })
            elAttBlock.classList.add('attributes_avail')
        }
    }
    elGallerylefttArrow.setAttribute('title', 'Scroll left')
    elGalleryRightArrow.setAttribute('title', 'Scroll right')

    var sliderBtnCounter = 0;
    var prod_sl_c = 5
    // if (productObj.otherImageList.length > prod_sl_c) {
    //     productBlock.querySelector('.inc_af_right_btn_block').style.visibility = "visible";
    //     productBlock.querySelector('.inc_af_left_btn_block').style.visibility = "visible";
    //     productBlock.querySelector('.inc_af_left_btn_block').setAttribute("style", "pointer-events: none;opacity:0.5");
    //     productBlock.querySelector('.inc_af_right_btn_img').style.visibility = "visible";
    //     productBlock.querySelector('.inc_af_left_btn_img').style.visibility = "visible";
    //     productBlock.querySelector('.inc_af_left_btn_img').setAttribute("style", "pointer-events: none;opacity:0.5");
    // }
    // var cc_ount = 1;
    if (window.innerWidth > 768) {
        cc_ount = 5
    }
    elGallerylefttArrow.addEventListener("click", function(e) {
        sliderBtnCounter--;
        if (sliderBtnCounter == -1)
            sliderBtnCounter = 0;
        var all_p_length = productBlock.parentNode.parentNode.querySelectorAll('.inc_prd_showcase_bk .inc_prd_img_gallery_list_bk .inc_prd_img_gallery_list_item_bk').length
        if (INC_COL.clientConfig.slidevalue == -1)
            INC_COL.clientConfig.slidevalue = 0;
        var width_slide = ""

        if (window.innerWidth < 1440) {
            width_slide = 67
        } else {
            width_slide = 67
        }

        if (INC_COL.clientConfig.slidevalue > 0) {
            productBlock.parentNode.parentNode.querySelector('.inc_prd_showcase_bk .inc_prd_img_gallery_right_bk').setAttribute("style", "pointer-events: auto;opacity:1");
            productBlock.parentNode.parentNode.querySelector('.inc_prd_showcase_bk .inc_prd_img_gallery_right_btn_img').setAttribute("style", "pointer-events: auto;opacity:1");
            INC_COL.clientConfig.slidevalue--
            INC_COL.clientConfig.offset = (parseInt(INC_COL.clientConfig.offset) + width_slide) + 'px';
            var menu = productBlock.parentNode.parentNode.querySelector('.inc_prd_showcase_bk .inc_prd_img_gallery_list_bk');
            menu.setAttribute('style', 'margin-top:' + INC_COL.clientConfig.offset + ';transition-duration:0.5s;-webkit-transition-duration:0.5s;-moz-transition-duration:0.5s;-ms-transition-duration:0.5s;-o-transition-duration:0.5s;')
            if (document.querySelector('.inc_prd_showcase_bk .inc_prd_img_gallery_list_bk .inc_prd_img_gallery_list_item_bk.inc_active') != null) {
                document.querySelector('.inc_prd_showcase_bk .inc_prd_img_gallery_list_bk .inc_prd_img_gallery_list_item_bk.inc_active').classList.remove('inc_active')
            }
            if (document.querySelectorAll('.inc_af_main_block .inc_af_product-list-dots-main_block .inc_dots')[+INC_COL.clientConfig.slidevalue] != null)
                document.querySelectorAll('.inc_af_main_block .inc_af_product-list-dots-main_block .inc_dots')[+INC_COL.clientConfig.slidevalue].classList.add('inc_active')
        }
        if (INC_COL.clientConfig.slidevalue == 0) {
            productBlock.parentNode.parentNode.querySelector('.inc_prd_showcase_bk .inc_prd_img_gallery_left_bk').setAttribute("style", "pointer-events: none;opacity:0.5");
            productBlock.parentNode.parentNode.querySelector('.inc_prd_showcase_bk .inc_prd_img_gallery_left_btn_img').setAttribute("style", "pointer-events: none;opacity:0.5");
        }
    });

    elGalleryRightArrow.addEventListener("click", function(e) {
        sliderBtnCounter++;
        if (sliderBtnCounter > productObj.otherImageList.length - 1) {
            sliderBtnCounter--;
        }
        var all_p_length = productBlock.parentNode.parentNode.querySelectorAll('.inc_prd_showcase_bk .inc_prd_img_gallery_list_bk .inc_prd_img_gallery_list_item_bk').length
        // var cc_ount = 1;
        if (window.innerWidth > 768) {
            cc_ount = 5
        }
        var width_slide = ""
        if (window.innerWidth < 1440) {
            width_slide = 67
        } else {
            width_slide = 67
        }
        if (+INC_COL.clientConfig.slidevalue + +cc_ount < all_p_length) {
            productBlock.parentNode.parentNode.querySelector('.inc_prd_showcase_bk .inc_prd_img_gallery_left_bk').setAttribute("style", "pointer-events: auto;opacity:1");
            productBlock.parentNode.parentNode.querySelector('.inc_prd_showcase_bk .inc_prd_img_gallery_left_btn_img').setAttribute("style", "pointer-events: auto;opacity:1");
            INC_COL.clientConfig.slidevalue++
            INC_COL.clientConfig.offset = (parseInt(INC_COL.clientConfig.offset) - width_slide) + 'px';
            var menu = productBlock.parentNode.parentNode.querySelector('.inc_prd_showcase_bk .inc_prd_img_gallery_list_bk');
            menu.setAttribute('style', 'margin-top:' + INC_COL.clientConfig.offset + ';transition-duration:0.5s;-webkit-transition-duration:0.5s;-moz-transition-duration:0.5s;-ms-transition-duration:0.5s;-o-transition-duration:0.5s;')
            if (document.querySelector('.inc_prd_showcase_bk .inc_prd_img_gallery_list_bk .inc_prd_img_gallery_list_item_bk.inc_active') != null) {
                document.querySelector('.inc_prd_showcase_bk .inc_prd_img_gallery_list_bk .inc_prd_img_gallery_list_item_bk.inc_active').classList.remove('inc_active')
            }
            if (document.querySelectorAll('.inc_af_main_block .inc_af_product-list-dots-main_block .inc_dots')[+INC_COL.clientConfig.slidevalue] != null)
                document.querySelectorAll('.inc_af_main_block .inc_af_product-list-dots-main_block .inc_dots')[+INC_COL.clientConfig.slidevalue].classList.add('inc_active')
        }

        if (+INC_COL.clientConfig.slidevalue + +cc_ount == all_p_length) {
            productBlock.parentNode.parentNode.querySelector('.inc_prd_showcase_bk .inc_prd_img_gallery_right_bk').setAttribute("style", "pointer-events: none;opacity:0.5");
            productBlock.parentNode.parentNode.querySelector('.inc_prd_showcase_bk .inc_prd_img_gallery_right_btn_img').setAttribute("style", "pointer-events: none;opacity:0.5");
        }
    });

    if ((productObj.otherImageList == null) || productObj.otherImageList.length <= 5) {
        elGalleryRightArrow.style.display = "none"
        elGallerylefttArrow.style.display = "none"
    }
    if ((productObj.otherImageList == null) || productObj.otherImageList.length <= 5) {
        elGalleryRightArrow.style.display = "none"
        elGallerylefttArrow.style.display = "none"
    }
    switch (blockType) {
    case "pdpcollection":
        eladdvarianttext.textContent = "Add";
        break;
    }
    elAddBlock.addEventListener("click", function() {
        productBlock.parentNode.querySelector('.inc_prd_hdr_title_bk').classList.add('inc_active');
        productBlock.parentNode.querySelector('.inc_product_hdr_title_bk_1').classList.remove('inc_active');

        var productModuleBlock = productBlock.parentNode.parentNode;
        var flag_check = INC_COL.methods.checkVariantSelection(productModuleBlock)
        if (document.querySelector('.sidebar_outer.sidebar_outer_active') == null) {
            document.querySelector('body').classList.remove('inc_popup_open')
            document.querySelector('html').classList.remove('inc_overlay')
        }
        var showcaseProductBlock = productModuleBlock.querySelector('.inc_prd_showcase_bk').querySelector('.inc_prd_bk');

        if (INC_COL.config.pageType != "cartPage" && INC_COL.config.pageType != "ticket" && productModuleBlock.parentNode.className.indexOf('inc_af_product-list_bk') == -1) {
            showcaseProductBlock.querySelector('.inc_prd_desc_add_bk').click();
        }

        if (productModuleBlock.classList.contains('configurable') == true) {
            if (flag_check == 1) {
                setTimeout(function() {
                    if (document.querySelector('.sidebar_outer.sidebar_outer_active .inc_prd_modal_bk.inc_active') != null) {
                        document.querySelector('.sidebar_outer.sidebar_outer_active .inc_prd_modal_bk.inc_active').classList.remove('inc_active')
                        document.querySelector('body').classList.remove('inc_popup_open');
                        if (inc_col_scroll_height > 100) {
                            window.scrollTo(0, inc_col_scroll_height);
                        }
                        document.querySelector('.sidebar_outer.sidebar_outer_active .inc_sidebar_modal_bk').classList.remove('overflow_visible')
                    }
                }, 200)
            } else {
                if (productModuleBlock.querySelector('.inc_prd_desc_att_bk').getAttribute('data-zero') == null && productModuleBlock.querySelector('.inc_prd_desc_att_bk').getAttribute('data-color') == null) {} else if (productModuleBlock.querySelector('.inc_prd_desc_att_bk').getAttribute('data-zero') != null || productModuleBlock.querySelector('.inc_prd_desc_att_bk').getAttribute('data-size') != null) {}
                productModuleBlock.querySelector('.inc_prd_desc_add_title_txt_bk').setAttribute('style', 'color:#E52B45')
                var element = document.querySelector('.inc_prd_modal_bk.inc_active .inc_prd_bk .inc_prd_desc_att_color_bk')
                if (element != null) {
                    document.querySelector('html').classList.add('inc_popup_open')
                    document.querySelector('html').classList.add('inc_overlay')
                }
            }
        } else {
            setTimeout(function() {
                if (document.querySelector('.inc_sidebar_modal_bk.inc_active .inc_prd_modal_bk.inc_active') != null) {
                    document.querySelector('.inc_sidebar_modal_bk.inc_active .inc_prd_modal_bk.inc_active').classList.remove('inc_active')
                    document.querySelector('body').classList.remove('inc_popup_open')
                    if (inc_col_scroll_height > 100) {
                        window.scrollTo(0, inc_col_scroll_height);
                    }
                }
                if (document.querySelector('.inc_sidebar_modal_bk.inc_active .inc_prd_modal_bk.inc_active') == null && document.querySelector('.inc_sidebar_modal_bk') != null) {
                    document.querySelector('.inc_sidebar_modal_bk').classList.remove('overflow_visible')
                }
            }, 100)
        }
        setTimeout(function() {
            if (document.querySelector('.sidebar_outer.sidebar_outer_active') != null && document.querySelector('.inc_prd_modal_bk.inc_active') == null) {
                document.querySelector('.inc_sidebar_modal_bk.inc_active').classList.remove('overflow_visible')
            }
        }, 200)
    });
    return productBlock;
}
INC_COL.methods.mappvariants = function(obj, blocktype, type_of_variant) {
    var size_flag = false;
    var colorflag = false;
    var thirdflag = false;
    if (type_of_variant == "zero") {
        size_flag = true;
        colorflag = true;
        thirdflag = true;
    } else if (type_of_variant == "color") {
        size_flag = true;
        thirdflag = true;
    } else if (type_of_variant == "size") {
        colorflag = true;
        thirdflag = true;
    } else if (type_of_variant == "third") {
        colorflag = true;
        size_flag = true;
    }
    if (obj.parentNode != undefined) {
        // if (window.innerWidth < 820){
        var productModuleBlck = obj.parentNode.parentNode.parentNode.parentNode.parentNode.parentNode.parentNode.parentNode.parentNode.parentNode.parentNode
        // } else {
        //     var productModuleBlck = obj.parentNode.parentNode.parentNode.parentNode.parentNode.parentNode.parentNode.parentNode.parentNode;
        // }
        if (productModuleBlck.classList.contains('inc_prd_showcase_bk') == true || productModuleBlck.classList.contains('inc_prd_modal_bk') == true) {
            productModuleBlck = productModuleBlck.parentNode
        }

        var productblockshow = productModuleBlck.querySelector('.inc_prd_showcase_bk .inc_prd_bk')
        var productblockmod = productModuleBlck.querySelector('.inc_prd_modal_bk .inc_prd_bk')

        var mainprdid = productblockshow.getAttribute('data-main_id')

        if (type_of_variant == "zero") {
            var sel_variant = obj.getAttribute('data-size')
            productblockmod.querySelector('.inc_prd_desc_att_bk').setAttribute('data-zero', sel_variant)
            productblockshow.querySelector('.inc_prd_desc_att_bk').setAttribute('data-zero', sel_variant)
            if (obj.parentNode.parentNode.parentNode.parentNode.parentNode.classList.contains('inc_col_desc_main_product_details_bk') == true) {
                obj.parentNode.parentNode.parentNode.parentNode.parentNode.querySelector('.inc_prd_desc_att_bk').setAttribute('data-zero', sel_variant)
            }
        } else if (type_of_variant == "color") {
            var sel_variant = obj.getAttribute('data-color')
            productblockmod.querySelector('.inc_prd_desc_att_bk').setAttribute('data-color', sel_variant)
            productblockshow.querySelector('.inc_prd_desc_att_bk').setAttribute('data-color', sel_variant)
            if (obj.parentNode.parentNode.parentNode.parentNode.parentNode.classList.contains('inc_col_desc_main_product_details_bk') == true) {
                obj.parentNode.parentNode.parentNode.parentNode.parentNode.querySelector('.inc_prd_desc_att_bk').setAttribute('data-color', sel_variant)
            }
        } else if (type_of_variant == "size") {
            var sel_variant = obj.getAttribute('data-size')
            productblockmod.querySelector('.inc_prd_desc_att_bk').setAttribute('data-size', sel_variant)
            productblockshow.querySelector('.inc_prd_desc_att_bk').setAttribute('data-size', sel_variant)
            if (obj.parentNode.parentNode.parentNode.parentNode.parentNode.classList.contains('inc_col_desc_main_product_details_bk') == true) {
                obj.parentNode.parentNode.parentNode.parentNode.parentNode.querySelector('.inc_prd_desc_att_bk').setAttribute('data-size', sel_variant)
            }
        } else if (type_of_variant == "third") {
            var sel_variant = obj.getAttribute('data-size')
            productblockmod.querySelector('.inc_prd_desc_att_bk').setAttribute('data-third', sel_variant)
            productblockshow.querySelector('.inc_prd_desc_att_bk').setAttribute('data-third', sel_variant)
            if (obj.parentNode.parentNode.parentNode.parentNode.parentNode.classList.contains('inc_col_desc_main_product_details_bk') == true) {
                obj.parentNode.parentNode.parentNode.parentNode.parentNode.querySelector('.inc_prd_desc_att_bk').setAttribute('data-third', sel_variant)
            }
        }

        var main_p_id = INC_COL.dataStore.methods().getFirstProductObjByMainId({
            mainId: mainprdid
        }).id;
        var findobj = new INC_COL.classes.FindObj({
            id: main_p_id
        });
        var productObjs = INC_COL.dataStore.methods().getProductById(findobj);
        var zero_text = productblockmod.querySelector('.inc_prd_desc_att_bk').getAttribute('data-zero');
        var size_text = productblockmod.querySelector('.inc_prd_desc_att_bk').getAttribute('data-size');
        var color_text = productblockmod.querySelector('.inc_prd_desc_att_bk').getAttribute('data-color');
        var third_text = productblockmod.querySelector('.inc_prd_desc_att_bk').getAttribute('data-third');

        findobj.mainId = mainprdid
        findobj.colorText = ""
        var sel_attr_text = ""
        if (color_text != undefined) {
            findobj.colorText = color_text
            productblockmod.querySelector('.inc_prd_desc_att_color_title_txt_selected').setAttribute('style', 'color:"#4D4D4F";')
            productblockmod.querySelector('.inc_prd_desc_att_color_title_txt_selected').innerText = color_text
            productblockshow.querySelector('.inc_prd_desc_att_color_title_txt_selected').setAttribute('style', 'color:"#4D4D4F";')
            productblockshow.querySelector('.inc_prd_desc_att_color_title_txt_selected').innerText = color_text
        }
        if (zero_text != undefined) {
            findobj.zeroText = zero_text
            productblockshow.querySelector('.inc_prd_desc_att_zero_title_txt_selected').innerText = zero_text
            productblockshow.querySelector('.inc_prd_desc_att_zero_title_txt_selected').setAttribute('style', 'color:"#4D4D4F";')
            productblockmod.querySelector('.inc_prd_desc_att_zero_title_txt_selected').classList.add('inc_col_change_color');
            productblockmod.querySelector('.inc_prd_desc_att_zero_title_txt_selected').innerText = zero_text
        }
        if (size_text != undefined) {
            findobj.sizeText = size_text
            productblockshow.querySelector('.inc_prd_desc_att_size_title_txt_selected').innerText = size_text
            productblockmod.querySelector('.inc_prd_desc_att_size_title_txt_selected').innerText = size_text
            productblockshow.querySelector('.inc_prd_desc_att_size_title_txt_selected').setAttribute('style', 'color:"#4D4D4F";')
            productblockmod.querySelector('.inc_prd_desc_att_size_title_txt_selected').setAttribute('style', 'color:"#4D4D4F";')
        }

        if (third_text != undefined) {
            findobj.thirdText = third_text
            productblockmod.querySelector('.inc_prd_desc_att_third_title_txt_selected').innerText = third_text
            productblockshow.querySelector('.inc_prd_desc_att_third_title_txt_selected').innerText = third_text
        }
        productblockmod.querySelector('.inc_prd_desc_add_err_text_bk').innerHTML = ""
        // productblockshow.querySelector('.inc_col_variant_error_text').innerHTML = ""
        productblockshow.querySelector('.inc_prd_variant_simple_text').setAttribute('style', '')
        productblockshow.querySelector('.inc_prd_desc_add_title_txt_bk').setAttribute('style', '')

        var productSizesObj = INC_COL.dataStore.methods().getProductSizesObj(findobj, obj);
        var productColorsObj = INC_COL.dataStore.methods().getProductColorsObj(findobj, obj);
        var product3rdObj = INC_COL.dataStore.methods().getProductopt3Obj(findobj, obj);

        var elAttSizeBlock = productblockmod.querySelector('.inc_prd_desc_att_size_bk')
        var elAttColorBlock = productblockmod.querySelector('.inc_prd_desc_att_color_bk')
        var elAtt3rdBlock = productblockmod.querySelector('.inc_prd_desc_att_third_bk')
        var elAttSizeListBlock = productblockmod.querySelector('.inc_prd_desc_att_size_list_bk')
        var elAttColorListBlock = productblockmod.querySelector('.inc_prd_desc_att_color_list_bk')
        var elAtt3ListBlock = productblockmod.querySelector('.inc_prd_desc_att_third_list_bk')
        var elselcolortextmodal = productblockmod.querySelector('.inc_prd_desc_att_color_title_txt_selected')
        var elcolortextmodal = productblockmod.querySelector('.inc_prd_desc_att_color_title_txt')
        var elAttSizeBlockshow = productblockshow.querySelector('.inc_prd_desc_att_size_bk')
        var elAttColorBlockshow = productblockshow.querySelector('.inc_prd_desc_att_color_bk')
        var elAtt3rdBlockshow = productblockshow.querySelector('.inc_prd_desc_att_third_bk')
        var elAttSizeListBlockshow = productblockshow.querySelector('.inc_prd_desc_att_size_list_bk')
        var elAttColorListBlockshow = productblockshow.querySelector('.inc_prd_desc_att_color_list_bk')
        var elAtt3ListBlockshow = productblockshow.querySelector('.inc_prd_desc_att_third_list_bk')
        var elselcolortextshow = productblockshow.querySelector('.inc_prd_desc_att_color_title_txt_selected')
        var elcolortextshow = productblockmod.querySelector('.inc_prd_desc_att_color_title_txt')

        if (type_of_variant == "zero" || type_of_variant == "third" || type_of_variant == "color") {
            elAttSizeListBlock.innerHTML = "";
            elAttSizeListBlockshow.innerHTML = "";
            if (productSizesObj["sizeArray"].length > 0) {
                elAttSizeBlock.classList.add("inc_active");
                productSizesObj["sizeArray"].forEach(function(sizeObj) {
                    var attSizeBlock = generate_html_tag('div', 'inc_prd_desc_att_size_list_item_bk');
                    var attSizeImgBlock = generate_html_tag('div', 'inc_prd_desc_att_size_list_item_img_bk');
                    var attSizeImg = generate_html_tag('div', 'inc_prd_desc_att_size_list_item_img');
                    attSizeImgBlock.setAttribute('onClick', 'INC_COL.methods.mappvariants(this,\'' + blocktype + '\',"size")')

                    attSizeImgBlock.classList.add('avail')
                    attSizeImg.innerText = sizeObj["text"];
                    attSizeImgBlock.setAttribute('data-size', sizeObj["text"]);
                    attSizeImgBlock.setAttribute("datasize", sizeObj["text"].toLocaleLowerCase());
                    attSizeImgBlock.setAttribute('data-option', "2");
                    attSizeImgBlock.appendChild(attSizeImg);
                    var attSizeImgBlockclone = attSizeImgBlock.cloneNode(attSizeImgBlock);
                    elAttSizeListBlock.appendChild(attSizeImgBlock);
                    elAttSizeListBlockshow.appendChild(attSizeImgBlockclone);
                    if (size_text != undefined) {
                        if (size_text.toLocaleLowerCase() == sizeObj["text"].toLocaleLowerCase()) {
                            attSizeImgBlock.classList.add('inc_active')
                            attSizeImgBlockclone.classList.add('inc_active')
                        }
                    }
                });
            }
        } else {
            var sizelowertext = size_text.toLocaleLowerCase()
            if (productblockmod.querySelector('.inc_prd_desc_att_size_list_bk .inc_prd_desc_att_size_list_item_img_bk.inc_active') != null) {
                productblockmod.querySelector('.inc_prd_desc_att_size_list_bk .inc_prd_desc_att_size_list_item_img_bk.inc_active').classList.remove('inc_active')
            }
            if (productblockshow.querySelector('.inc_prd_desc_att_size_list_bk .inc_prd_desc_att_size_list_item_img_bk.inc_active') != null) {
                productblockshow.querySelector('.inc_prd_desc_att_size_list_bk .inc_prd_desc_att_size_list_item_img_bk.inc_active').classList.remove('inc_active')
            }
            productblockmod.querySelector('.inc_prd_desc_att_size_list_bk .inc_prd_desc_att_size_list_item_img_bk[datasize="' + sizelowertext + '"]').classList.add('inc_active')
            productblockshow.querySelector('.inc_prd_desc_att_size_list_bk .inc_prd_desc_att_size_list_item_img_bk[datasize="' + sizelowertext + '"]').classList.add('inc_active')
        }
        //color block
        if (type_of_variant == "zero" || type_of_variant == "size" || type_of_variant == "third") {
            elAttColorListBlock.innerHTML = "";
            elAttColorListBlockshow.innerHTML = "";
            var productColorText = "";
            if (productModuleBlck.querySelector('.inc_prd_modal_bk .inc_prd_desc_att_color_title_txt_selected').innerText == "" && productModuleBlck.querySelector('.inc_prd_desc_att_color_title_txt_selected').innerText == "") {
                productModuleBlck.querySelector('.inc_prd_modal_bk .inc_prd_desc_att_color_title_txt_selected').innerText = ""
                productModuleBlck.querySelector('.inc_prd_desc_att_color_title_txt_selected').innerText = ""
            }
            var selcol = findobj.colorText
            if (productColorsObj["colorArray"].length > 0) {
                elAttColorBlock.classList.add("inc_active");
                var clrselflag = false;
                productColorsObj["colorArray"].forEach(function(colorObj) {
                    if (selcol == colorObj["text"]) {
                        findobj.colorText = colorObj["text"]
                        findobj.color_text = colorObj["text"]
                    } else {
                        findobj.colorText = ""
                        findobj.color_text = ""
                    }
                    var attColorBlock = generate_html_tag('div', 'inc_prd_desc_att_color_list_item_bk')
                    var attColorImgBlock = generate_html_tag('div', 'inc_prd_desc_att_color_list_item_img_bk');
                    var attColorImg = generate_html_tag('div', 'inc_prd_desc_att_color_list_item_img');
                    var attColorTextBlock = generate_html_tag('div', 'inc_prd_desc_att_color_list_item_text_bk');
                    var attColorText = generate_html_tag('div', 'inc_prd_desc_att_color_list_item_text');

                    attColorImgBlock.setAttribute('onClick', 'INC_COL.methods.mappvariants(this,\'' + blocktype + '\',"color")')
                    if (colorObj["colorCode"] != "" && colorObj["colorCode"] != undefined) {
                        var spancolorcode = generate_html_tag('span');
                        spancolorcode.setAttribute('alt', colorObj["text"])
                        spancolorcode.style.backgroundColor = colorObj["colorCode"];
                        attColorImg.appendChild(spancolorcode);
                    } else if (colorObj["imgSrc"].length > 0) {
                        if (colorObj["colorCode"] == "") {
                            var colorImg = generate_html_tag('img');
                            colorImg.setAttribute('alt', colorObj["text"])
                            colorImg.src = colorObj["imgSrc"]

                            attColorImg.appendChild(colorImg);
                        }
                    }

                    var colorTitle = generate_html_tag('a');
                    colorTitle.innerText = colorObj["text"]
                    colorTitle.title = colorObj["text"];
                    colorTitle.addEventListener('click', function(e) {
                        e.preventDefault();
                    })
                    attColorImg.appendChild(colorTitle);

                    attColorImgBlock.setAttribute('data-color', colorObj["text"]);
                    attColorImgBlock.setAttribute("datacolor", colorObj["text"].toLocaleLowerCase());
                    attColorImgBlock.setAttribute('data-option', "0");
                    attColorImgBlock.setAttribute('data-cpid', colorObj["cpid"])
                    attColorImgBlock.setAttribute('data-colorcode', colorObj["colorCode"])
                    attColorImgBlock.setAttribute('data-optionimge', colorObj["imgSrc"])
                    attColorImgBlock.appendChild(attColorImg);
                    attColorBlock.appendChild(attColorImgBlock);
                    var attColorBlockclone = attColorBlock.cloneNode(attColorBlock);
                    elAttColorListBlock.appendChild(attColorBlock);
                    elAttColorListBlockshow.appendChild(attColorBlockclone);

                    if (color_text != null) {
                        if (color_text.toLocaleLowerCase() == colorObj.text.toLocaleLowerCase()) {
                            clrselflag = true
                            attColorBlock.classList.add('inc_active');
                            attColorBlockclone.classList.add('inc_active');
                            color_text_edt = colorObj.text
                            elselcolortextshow.innerText = colorObj.text
                            elselcolortextmodal.innerText = colorObj.text
                            elcolortextmodal.style.backgroundColor = colorObj["colorCode"];
                            elcolortextshow.style.backgroundColor = colorObj["colorCode"];
                        } else if (productColorsObj["colorArray"].length == 1) {
                            clrselflag = true
                            attColorBlock.classList.add('inc_active');
                            attColorBlockclone.classList.add('inc_active');
                            color_text_edt = colorObj.text
                            productblockmod.querySelector('.inc_prd_desc_att_bk').setAttribute('data-color', colorObj.text)
                            productblockshow.querySelector('.inc_prd_desc_att_bk').setAttribute('data-color', colorObj.text)
                            elselcolortextshow.innerText = colorObj.text
                            elselcolortextmodal.innerText = colorObj.text
                            elcolortextmodal.style.backgroundColor = colorObj["colorCode"];
                            elcolortextshow.style.backgroundColor = colorObj["colorCode"];
                        }
                    }
                });
                if (clrselflag == false) {
                    var ctext = productblockmod.querySelector('.inc_prd_desc_att_color_list_item_bk .inc_prd_desc_att_color_list_item_img_bk').getAttribute('data-color')
                    var color_colorcodesel = productblockmod.querySelector('.inc_prd_desc_att_color_list_item_bk .inc_prd_desc_att_color_list_item_img_bk').getAttribute('data-colorcode');
                    productblockmod.querySelector('.inc_prd_desc_att_bk').setAttribute('data-color', ctext)
                    productblockshow.querySelector('.inc_prd_desc_att_bk').setAttribute('data-color', ctext)
                    elAttColorListBlock.querySelector('.inc_prd_desc_att_color_list_item_bk .inc_prd_desc_att_color_list_item_img_bk').parentNode.classList.add('inc_active')
                    elAttColorListBlockshow.querySelector('.inc_prd_desc_att_color_list_item_bk .inc_prd_desc_att_color_list_item_img_bk').parentNode.classList.add('inc_active')
                    elselcolortextshow.innerText = ctext
                    elselcolortextmodal.innerText = ctext
                    elcolortextmodal.style.backgroundColor = color_colorcodesel;
                    elcolortextshow.style.backgroundColor = color_colorcodesel;
                }
            }
        } else {
            var colorlowertext = color_text.toLocaleLowerCase()
            if (productblockmod.querySelector('.inc_prd_desc_att_color_list_item_bk.inc_active') != null) {
                productblockmod.querySelector('.inc_prd_desc_att_color_list_item_bk.inc_active').classList.remove('inc_active')
            }
            if (productblockshow.querySelector('.inc_prd_desc_att_color_list_item_bk.inc_active') != null) {
                productblockshow.querySelector('.inc_prd_desc_att_color_list_item_bk.inc_active').classList.remove('inc_active')
            }
            productblockmod.querySelector('.inc_prd_desc_att_color_list_item_bk .inc_prd_desc_att_color_list_item_img_bk[datacolor="' + colorlowertext + '"]').parentNode.classList.add('inc_active')
            productblockshow.querySelector('.inc_prd_desc_att_color_list_item_bk .inc_prd_desc_att_color_list_item_img_bk[datacolor="' + colorlowertext + '"]').parentNode.classList.add('inc_active')
            elselcolortextshow.innerText = colorlowertext
            elselcolortextmodal.innerText = colorlowertext
            if (productblockmod.querySelector('.inc_prd_desc_att_color_list_item_bk.inc_active div') != null) {
                var color_optimg = productblockmod.querySelector('.inc_prd_desc_att_color_list_item_bk.inc_active div').getAttribute('data-optionimge');
                var color_colorcode = productblockmod.querySelector('.inc_prd_desc_att_color_list_item_bk.inc_active div').getAttribute('data-colorcode');
                elcolortextmodal.style.backgroundColor = color_colorcode;
                elcolortextshow.style.backgroundColor = color_colorcode;
            }
        }
        if (type_of_variant == "zero" || type_of_variant == "size" || type_of_variant == "color") {
            elAtt3ListBlock.innerHTML = "";
            elAtt3ListBlockshow.innerHTML = "";
            if (product3rdObj["att3Array"].length > 0) {
                elAtt3rdBlock.classList.add("inc_active");

                product3rdObj["att3Array"].forEach(function(sizeObj) {
                    var attSizeBlock3 = generate_html_tag('div', 'inc_prd_desc_att_third_list_item_bk');
                    var attSizeImgBlock3 = generate_html_tag('div', 'inc_prd_desc_att_third_list_item_img_bk');
                    var attSizeImg3 = generate_html_tag('div', 'inc_prd_desc_att_third_list_item_img');
                    attSizeImgBlock3.setAttribute('onClick', 'INC_COL.methods.mappvariants(this,\'' + blocktype + '\',"third")')
                    attSizeImg3.innerText = sizeObj["text"];
                    attSizeImgBlock3.setAttribute('data-size', sizeObj["text"]);
                    attSizeImgBlock3.setAttribute("datasize", sizeObj["text"].toLocaleLowerCase());
                    attSizeImgBlock3.setAttribute('data-option', "3");
                    attSizeImgBlock3.appendChild(attSizeImg3);
                    var attSizeImgBlock3clone = attSizeImgBlock3.cloneNode(attSizeImgBlock3);
                    elAtt3ListBlock.appendChild(attSizeImgBlock3);
                    elAtt3ListBlockshow.appendChild(attSizeImgBlock3clone);
                    if (third_text != undefined) {
                        if (third_text.toLocaleLowerCase() == sizeObj["text"].toLocaleLowerCase()) {
                            attSizeImgBlock3.classList.add('inc_active')
                            attSizeImgBlock3clone.classList.add('inc_active')
                        }
                    }
                });
            }
        } else {
            var thirdlowertext = third_text.toLocaleLowerCase()
            if (productblockmod.querySelector('.inc_prd_desc_att_third_list_bk .inc_prd_desc_att_third_list_item_img_bk.inc_active') != null) {
                productblockmod.querySelector('.inc_prd_desc_att_third_list_bk .inc_prd_desc_att_third_list_item_img_bk.inc_active').classList.remove('inc_active')
            }
            if (productblockshow.querySelector('.inc_prd_desc_att_third_list_bk .inc_prd_desc_att_third_list_item_img_bk.inc_active') != null) {
                productblockshow.querySelector('.inc_prd_desc_att_third_list_bk .inc_prd_desc_att_third_list_item_img_bk.inc_active').classList.remove('inc_active')
            }
            productblockmod.querySelector('.inc_prd_desc_att_third_list_bk .inc_prd_desc_att_third_list_item_img_bk[datasize="' + thirdlowertext + '"]').classList.add('inc_active')
            productblockshow.querySelector('.inc_prd_desc_att_third_list_bk .inc_prd_desc_att_third_list_item_img_bk[datasize="' + thirdlowertext + '"]').classList.add('inc_active')
        }
        var checkzeroselflag = false
        if (productblockmod.querySelector('.inc_prd_desc_att_zero_list_bk .inc_prd_desc_att_size_list_item_img_bk.inc_active') == null) {
            checkzeroselflag = true
        }
        if (type_of_variant == "zero" || checkzeroselflag == true && type_of_variant != "color" && type_of_variant != "third") {
            if (checkzeroselflag == true) {
                if (obj != null) {
                    var zero_text = obj.getAttribute('data-size')
                    var zerolowertext = zero_text.toLocaleLowerCase()
                } else {
                    if (productblockmod.querySelector('.inc_prd_desc_att_zero_list_bk .inc_prd_desc_att_size_list_item_img_bk') != null) {
                        var zero_text = productblockmod.querySelector('.inc_prd_desc_att_zero_list_bk .inc_prd_desc_att_size_list_item_img_bk').getAttribute('data-size')
                        var zerolowertext = zero_text.toLocaleLowerCase()
                    }
                }
            } else {
                var zerolowertext = zero_text.toLocaleLowerCase()
            }
            if (productblockmod.querySelector('.inc_prd_desc_att_zero_list_bk .inc_prd_desc_att_size_list_item_img_bk.inc_active') != null) {
                productblockmod.querySelector('.inc_prd_desc_att_zero_list_bk .inc_prd_desc_att_size_list_item_img_bk.inc_active').classList.remove('inc_active')
            }
            if (productblockshow.querySelector('.inc_prd_desc_att_zero_list_bk .inc_prd_desc_att_size_list_item_img_bk.inc_active') != null) {
                productblockshow.querySelector('.inc_prd_desc_att_zero_list_bk .inc_prd_desc_att_size_list_item_img_bk.inc_active').classList.remove('inc_active')
            }
            if (productblockshow.querySelector('.inc_prd_desc_att_zero_bk').classList.contains('show_dropdown')) {
                productblockshow.querySelector('.inc_prd_desc_att_zero_bk').classList.remove('show_dropdown')
            }
            if (type_of_variant == "size") {
                productblockmod.querySelector('.inc_prd_desc_att_size_list_bk .inc_prd_desc_att_size_list_item_img_bk[datasize="' + zerolowertext + '"]').classList.add('inc_active')
                productblockshow.querySelector('.inc_prd_desc_att_size_list_bk .inc_prd_desc_att_size_list_item_img_bk[datasize="' + zerolowertext + '"]').classList.add('inc_active')
                if (productblockmod.querySelector('.inc_prd_desc_att_size_title_txt_selected') != null) {
                    productblockmod.querySelector('.inc_prd_desc_att_size_title_txt_selected').innerText = zero_text
                }
                if (productblockshow.querySelector('.inc_prd_desc_att_size_title_txt_selected') != null) {
                    productblockshow.querySelector('.inc_prd_desc_att_size_title_txt_selected').innerText = zero_text
                }
            } else {
                productblockmod.querySelector('.inc_prd_desc_att_zero_list_bk .inc_prd_desc_att_size_list_item_img_bk[datasize="' + zerolowertext + '"]').classList.add('inc_active')
                productblockshow.querySelector('.inc_prd_desc_att_zero_list_bk .inc_prd_desc_att_size_list_item_img_bk[datasize="' + zerolowertext + '"]').classList.add('inc_active')
                if (productblockmod.querySelector('.inc_prd_desc_att_zero_title_txt_selected') != null) {
                    productblockmod.querySelector('.inc_prd_desc_att_zero_title_txt_selected').innerText = zero_text
                }
                if (productblockshow.querySelector('.inc_prd_desc_att_zero_title_txt_selected') != null) {
                    productblockshow.querySelector('.inc_prd_desc_att_zero_title_txt_selected').innerText = zero_text
                }
            }

        }

        INC_COL.methods.updatecolProductBlock(productblockshow, findobj, blocktype);
        INC_COL.methods.updatecolProductBlock(productblockmod, findobj, blocktype);
    }
}
INC_COL.methods.checkVariantSelection = function(prod_module_bk) {
    var attr_flag_color = false;
    var attr_flag_size = false;
    var attr__flag_zero = false;
    var attr__flag_third = false;

    var elSize = prod_module_bk.querySelector('.inc_prd_desc_att_size_bk.inc_active')
    var elColor = prod_module_bk.querySelector('.inc_prd_desc_att_color_bk.inc_active')
    var elattr0 = prod_module_bk.querySelector('.inc_prd_desc_att_zero_bk.inc_active')
    var elthird3 = prod_module_bk.querySelector('.inc_prd_desc_att_third_bk.inc_active')

    if (elColor != null && elattr0 != null && elthird3 != null && elSize != null) {
        if (elColor.querySelector('.inc_prd_desc_att_color_list_item_bk.inc_active') != null && elattr0.querySelector('.inc_prd_desc_att_size_list_item_img_bk.inc_active') != null && elthird3.querySelector('.inc_prd_desc_att_size_list_item_img_bk.inc_active') != null && elSize.querySelector('.inc_prd_desc_att_size_list_item_img_bk.inc_active') != null) {
            attr_flag_color = true
            attr__flag_zero = true
            attr__flag_third = true;
            attr_flag_size = true
        } else {
            attr_flag_color = false
            attr__flag_zero = false
            attr__flag_third = false;
            attr_flag_size = false
        }
    } else if (elColor != null && elattr0 != null && elSize != null) {
        if (elColor.querySelector('.inc_prd_desc_att_color_list_item_bk.inc_active') != null && elattr0.querySelector('.inc_prd_desc_att_size_list_item_img_bk.inc_active') != null && elSize.querySelector('.inc_prd_desc_att_size_list_item_img_bk.inc_active') != null) {
            attr_flag_color = true
            attr__flag_zero = true
            attr__flag_third = true;
            attr_flag_size = true
        } else {
            attr_flag_color = false
            attr__flag_zero = false
            attr__flag_third = false;
            attr_flag_size = false
        }
    } else if (elColor != null && elattr0 != null) {
        if (elColor.querySelector('.inc_prd_desc_att_color_list_item_bk.inc_active') != null && elattr0.querySelector('.inc_prd_desc_att_size_list_item_img_bk.inc_active') != null) {
            attr_flag_color = true
            attr__flag_zero = true
            attr_flag_size = true;
            attr__flag_third = true;
        } else {
            attr_flag_color = false
            attr__flag_zero = false
            attr__flag_third = false;
            attr_flag_size = false;
        }
    } else {
        if (elColor != null) {
            if (elColor.querySelector('.inc_prd_desc_att_color_list_item_bk.inc_active') != null) {
                attr_flag_color = true
            }
        } else {
            attr_flag_color = true
        }
        if (elattr0 != null) {
            if (elattr0.querySelector('.inc_prd_desc_att_size_list_item_img_bk.inc_active') != null) {
                attr__flag_zero = true
            }
        } else {
            attr__flag_zero = true
        }
        if (elSize != null) {
            if (elSize.querySelector('.inc_prd_desc_att_size_list_item_img_bk.inc_active') != null) {
                attr_flag_size = true
            }
        } else {
            attr_flag_size = true
        }
        if (elthird3 != null) {
            if (elthird3.querySelector('.inc_prd_desc_att_size_list_item_img_bk.inc_active') != null) {
                attr__flag_third = true
            }
            if (elthird3.querySelector('.inc_prd_desc_att_third_list_item_img_bk.inc_active') != null) {
                attr__flag_third = true
            }
        } else {
            attr__flag_third = true
        }
    }

    // if(attr_flag_color == true && attr__flag_zero == true){
    //     return 1
    // }else{
    //     return 0
    // }
    if (attr_flag_color == true && attr__flag_zero == true && attr__flag_third == true) {
        return 1
    } else {
        if (attr_flag_size == false) {
            return 2
        } else if (attr__flag_third == false) {
            return 3
        } else if (attr_flag_color == false) {
            return 0
        } else {
            return 0
        }
    }
}
INC_COL.methods.updatecolProductBlock = function(productBlock, findObj, blockType, bundleProductListCheck) {
    var dataStore = INC_COL.dataStore;
    var productBlock = productBlock;
    var productModuleBlock = productBlock.parentNode.parentNode;
    var modal_attr_bk = productModuleBlock.querySelector('.inc_prd_modal_bk')
    var zero_text = modal_attr_bk.querySelector('.inc_prd_desc_att_bk').getAttribute('data-zero');
    var size_text = modal_attr_bk.querySelector('.inc_prd_desc_att_bk').getAttribute('data-size');
    var color_text = modal_attr_bk.querySelector('.inc_prd_desc_att_bk').getAttribute('data-color');
    var third_text = modal_attr_bk.querySelector('.inc_prd_desc_att_bk').getAttribute('data-third');
    var sel_attr_text = ""
    if (zero_text != undefined) {
        findObj.zero_text = zero_text
        sel_attr_text = zero_text
    } else {
        findObj.zeroText = ""
        findObj.zero_text = ""
    }
    if (color_text != undefined) {
        findObj.color_text = color_text
        if (sel_attr_text == "") {
            sel_attr_text = color_text
        } else {
            sel_attr_text = sel_attr_text + " / " + color_text
        }
    } else {
        findObj.color_text = ""
    }
    if (size_text != undefined) {
        findObj.sizeText = size_text
        sel_attr_text = size_text
    } else {
        findObj.sizeText = ""
    }

    if (third_text != undefined) {
        findObj.thirdText = third_text
        sel_attr_text = third_text
    } else {
        findObj.thirdText = ""
    }
    if (productBlock.querySelector('.inc_prd_variant_simple_text') != null) {
        if (blockType == "sidebar" || blockType == "am") {
            productBlock.querySelector('.inc_prd_variant_simple_text').innerText = "Select Option"
        } else {
            productBlock.querySelector('.inc_prd_variant_simple_text').setAttribute('title', sel_attr_text)
            if (productModuleBlock.querySelector('.inc_prd_bk .inc_prd_add_bk.added_inc') != null) {
                productBlock.querySelector('.inc_prd_variant_simple_text').innerText = sel_attr_text
            }
        }
        if (color_text != null) {
            var PrdVarSimTxt = productBlock.querySelector('.inc_prd_variant_simple_text')
            var colorTitle = generate_html_tag('div');

            colorTitle.addEventListener('click', function(e) {
                e.preventDefault();
            })
            PrdVarSimTxt.appendChild(colorTitle);
            colorTitle.classList.add("colorCircle")
            if (blockType == "pdpcollection") {// PrdVarSimTxt.parentNode.classList.add('added_inc');
            }
        }
    }
    var productObj = INC_COL.dataStore.methods().getProductByAtt(findObj);
    if (Object.keys(productObj).length != 0) {
        var previousSKU = "";
        previousSKU = productBlock.getAttribute('data-sku');
        productBlock.setAttribute('data-id', productObj.id);
        productBlock.setAttribute('data-sku', productObj.sku);
        productBlock.setAttribute('data-main_id', productObj.mainId);
        productBlock.setAttribute('data-bundle_id', productObj.bundleId);
        productBlock.setAttribute('data-comboId', productObj.comboId);
        productModuleBlock.setAttribute('data-id', productObj.id);
        productModuleBlock.setAttribute('data-sku', productObj.sku);
        productModuleBlock.setAttribute('data-main_id', productObj.mainId);
        productModuleBlock.setAttribute('data-bundle_id', productObj.bundleId);
        productModuleBlock.setAttribute('data-comboId', productObj.comboId);

        if (document.querySelector('.inc_bd_cart_added_product_bk[data-main_id="' + productObj.mainId + '"]') != null && sel_attr_text != "") {
            var added_sum_prod = document.querySelector('.inc_bd_cart_added_product_bk[data-main_id="' + productObj.mainId + '"]')
            added_sum_prod.querySelector('.inc_bd_cart_added_product_att_color_text_bk').textContent = sel_attr_text
            added_sum_prod.querySelector('.inc_bd_cart_added_product_att_color_text_bk').setAttribute('style', '')
            added_sum_prod.querySelector('.inc_bd_cart_added_product_att_bk').setAttribute('title', sel_attr_text)
        }
        if (productModuleBlock.querySelector('.inc_prd_desc_att_size_title_txt') != null && sel_attr_text != "") {
            // productModuleBlock.querySelector('.inc_prd_desc_att_size_title_txt').textContent = sel_attr_text
            // productModuleBlock.querySelector('.inc_prd_desc_att_size_title_txt').setAttribute('title', sel_attr_text)
            if (modal_attr_bk.querySelector('.inc_prd_desc_att_size_list_item_img_bk.inc_active') != null) {
                var optionimage = modal_attr_bk.querySelector('.inc_prd_desc_att_size_list_item_img_bk.inc_active').getAttribute('data-optionimge');
                if (optionimage != undefined && optionimage != "") {
                    productModuleBlock.querySelector('.inc_prd_showcase_bk .inc_prd_desc_att_zero_title_txt').innerHTML = ""
                    productModuleBlock.querySelector('.inc_prd_modal_bk .inc_prd_desc_att_zero_title_txt').innerHTML = ""
                    var optimg = generate_html_tag('img')
                    optimg.src = optionimage
                    productModuleBlock.querySelector('.inc_prd_showcase_bk .inc_prd_desc_att_zero_title_txt').appendChild(optimg)
                    productModuleBlock.querySelector('.inc_prd_modal_bk .inc_prd_desc_att_zero_title_txt').appendChild(optimg)
                }
            }
        }
        if (color_text != undefined) {
            var ccode = modal_attr_bk.querySelector('.inc_prd_desc_att_color_list_item_bk.inc_active div').getAttribute('data-colorcode');
            productModuleBlock.querySelector('.inc_prd_showcase_bk .inc_prd_desc_att_color_title_txt').style.backgroundColor = ccode
            productModuleBlock.querySelector('.inc_prd_modal_bk .inc_prd_desc_att_color_title_txt').style.backgroundColor = ccode
        }

        var elImgBlock = productBlock.querySelector('.inc_prd_img_bk');
        var elImgGalleryListBlock = productBlock.querySelector('.inc_prd_img_gallery_list_bk');
        var elTitleBlock = productBlock.querySelector('.inc_prd_desc_title_bk');
        var elTitleText = productBlock.querySelector('.inc_prd_desc_title_txt');
        var elMobTitleText = productBlock.querySelector('.inc_prd_hdr_main_title_bk');
        var elPriceActiveText = productBlock.querySelector('.inc_prd_desc_ecirp_active_text');
        var elPriceActiveMsg = productBlock.querySelector('.inc_prd_desc_ecirp_active_text_msg');
        var elPriceRegularText = productBlock.querySelector('.inc_prd_desc_ecirp_regular_text');
        var elAttBlock = productBlock.querySelector('.inc_prd_desc_att_bk');
        var elAttColorTitleText = productBlock.querySelector('.inc_prd_desc_att_color_title_txt');
        var elAttColorTitleTextSelected = productBlock.querySelector('.inc_prd_desc_att_color_title_txt_selected');
        var elAttColorListBlock = productBlock.querySelector('.inc_prd_desc_att_color_list_bk');
        var elAttSizeTitleText = productBlock.querySelector('.inc_prd_desc_att_size_title_txt');
        var elAttSizeTitleTextSelected = productBlock.querySelector('.inc_prd_desc_att_size_title_txt_selected');
        var elQtyInputText = productBlock.querySelector('.inc_prd_desc_qty_input_text');
        var elPrdHrdActivePrc = productBlock.querySelector('.inc_prd_hrd_desc_ecirp_active_text');
        var elPrdHrdRegPrc = productBlock.querySelector('.inc_prd_hrd_desc_ecirp_regular_text');
        var elQtyDownBlock = productBlock.querySelector('.inc_prd_desc_qty_down_bk');
        var elQtyUpBlock = productBlock.querySelector('.inc_prd_desc_qty_up_bk');
        var elAddBlock = productBlock.querySelector('.inc_prd_desc_add_bk');
        var elAddText = productBlock.querySelector('.inc_prd_desc_add_text');
        var elAddImg = productBlock.querySelector('.inc_prd_desc_add_img');
        var elworthPrice = productBlock.querySelector('.inc_prd_desc_ecirp_worth_text');
        var elGalleryRightArrow = productBlock.querySelector('.inc_prd_img_gallery_right_bk');
        var elGallerylefttArrow = productBlock.querySelector('.inc_prd_img_gallery_left_bk');
        var eladdbtnqtyblock = productBlock.querySelector('.inc_prd_desc_qty_add_btn_bk');
        if (productBlock.parentNode.className.indexOf('inc_prd_showcase_bk') >= 0) {
            if (blockType != "pdpcollection") {
                eladdbtnqtyblock.classList.add('inc_active')
            }
        }
        if (productBlock.querySelector('.inc_col_prod_finish_text') != null) {
            if (productObj.finish != null && productObj.finish != "") {
                productBlock.querySelector('.inc_col_prod_finish_text').innerText = productObj.finish
            } else {
                productBlock.querySelector('.inc_col_prod_finish_text').innerText = ""
            }
        }
        if (productBlock.querySelector('.inc_col_prod_coverage_text') != null) {
            if (productObj.coverage != null && productObj.coverage != "") {
                productBlock.querySelector('.inc_col_prod_coverage_text').innerText = productObj.coverage
            } else {
                productBlock.querySelector('.inc_col_prod_coverage_text').innerText = ""
            }
        }
        if (productBlock.querySelector('.inc_col_prod_undertone_text') != null) {
            if (productObj.underTone != null && productObj.underTone != "") {
                productBlock.querySelector('.inc_col_prod_undertone_text').innerText = productObj.underTone
            } else {
                productBlock.querySelector('.inc_col_prod_undertone_text').innerText = ""
            }
        }
        if (productBlock.querySelector('.inc_col_prod_skinType_text') != null) {
            if (productObj.skinType != null && productObj.skinType != "") {
                productBlock.querySelector('.inc_col_prod_skinType_text').innerText = productObj.skinType
            } else {
                productBlock.querySelector('.inc_col_prod_skinType_text').innerText = ""
            }
        }
        //inc_col_prod_finish_text
        //inc_col_prod_coverage_text
        //inc_col_prod_undertone_text
        var prod_modal = productModuleBlock.querySelector('.inc_prd_modal_bk')
        var elImgMainImg = elImgBlock.querySelector('.inc_prd_img_main_img');

        elImgMainImg.querySelectorAll('img')[0].setAttribute('src', productObj.comboimg);
        if (productBlock.parentNode.className.indexOf('inc_prd_showcase_bk') == -1) {
            elImgMainImg.querySelector('a').setAttribute('href', productObj["url"]);
        }
        elImgMainImg.querySelector('a').setAttribute('otherImageList', productObj["otherImageList"])
        elImgMainImg.querySelector('a').setAttribute('imageURL', productObj.comboimg)
        elImgMainImg.querySelectorAll('img')[0].setAttribute('data-mouseover', productObj["otherImageList"])
        elImgMainImg.querySelectorAll('img')[0].setAttribute('data-imageURL', productObj.comboimg)

        elImgMainImg.querySelector('a').setAttribute('otherImageList', productObj["otherImageList"])
        elImgMainImg.querySelector('a').setAttribute('imageURL', productObj.comboimg)

        elImgMainImg.querySelectorAll('img')[0].setAttribute('data-mouseover', productObj["otherImageList"])
        elImgMainImg.querySelectorAll('img')[0].setAttribute('data-imageURL', productObj.comboimg)

        var prod_ids = productModuleBlock.getAttribute('data-main_id')
        if (document.querySelector('.inc_bd_prd_list_items_bk .inc_bd_prd_list_item_bk[data-main_id="' + prod_ids + '"]') != null) {
            var tab_img = document.querySelector('.inc_bd_prd_list_items_bk .inc_bd_prd_list_item_bk[data-main_id="' + prod_ids + '"]');
            if (tab_img.querySelector('img') != null) {
                tab_img.querySelector('img').src = productObj.comboimg
            }
        }
        elImgGalleryListBlock.innerHTML = "";
        if ((productObj.otherImageList != null) && productObj.otherImageList.length >= 1) {
            // productBlock.classList.add('inc_col_other_'+productObj.otherImageList.length)
            var otimg = 0
            productObj.otherImageList.forEach(function(otherImgURL) {
                otherImgURL = otherImgURL;
                var elImgGalleryListItemBlock = generate_html_tag('div', 'inc_prd_img_gallery_list_item_bk')
                var imglist = '<div class="inc_prd_img_gallery_list_item_img_bk"><div class="inc_prd_img_gallery_list_item_img"><img class="inc_col_lazy" data-src="' + otherImgURL + '" src="' + otherImgURL + '" role="img" aria-label="Image" alt="' + productObj.name + '"></div></div><div class="inc_prd_img_gallery_list_item_text_bk"><div class="inc_prd_img_gallery_list_item_text"></div></div>'
                elImgGalleryListItemBlock.innerHTML = imglist

                var elImgGalleryListItemImg = elImgGalleryListItemBlock.querySelector('.inc_prd_img_gallery_list_item_img');

                var elOtherImgTag = elImgGalleryListItemBlock.querySelector('.inc_prd_img_gallery_list_item_img img')
                elOtherImgTag.src = otherImgURL
                elOtherImgTag.setAttribute('alt', productObj.name)
                elOtherImgTag.setAttribute('role', 'img')
                elOtherImgTag.setAttribute('aria-label', 'Image')
                elOtherImgTag.setAttribute('onerror', "this.src='" + INC_COL.config.noimage + "'");

                if (productObj.otherImageList.length > 4) {
                    elImgGalleryListItemImg.classList.add('OthImg4');
                }

                elImgGalleryListItemBlock.setAttribute('index', otimg)
                elImgGalleryListItemBlock.addEventListener("click", function() {
                    Array.prototype.forEach.call(productBlock.querySelectorAll('.inc_prd_img_gallery_list_item_bk'), function(galleryListItemBlock) {
                        galleryListItemBlock.classList.remove("inc_active");
                    });

                    elImgGalleryListItemBlock.classList.add("inc_active");

                    elImgMainImg.querySelector('img').src = otherImgURL;
                    elImgMainImg.querySelector('img').setAttribute('onerror', "this.src='" + INC_COL.config.noimage + "'");
                })

                elImgGalleryListBlock.appendChild(elImgGalleryListItemBlock);
                if (otimg == 0) {
                    elImgGalleryListItemBlock.classList.add('inc_active')
                }
                otimg++;
                if (productObj.otherImageList.length > 5) {
                    elImgGalleryListItemBlock.parentNode.classList.add("flex-start")
                }
            });
        } else {
            productBlock.classList.add('inc_col_other_noimage')
        }
        if (window.innerWidth > 820) {
            if ((productObj.otherImageList == null) || productObj.otherImageList.length < 5 || productObj.otherImageList == "") {
                elGalleryRightArrow.style.display = "none"
                elGallerylefttArrow.style.display = "none"
            }
        } else {
            if (productObj.otherImageList == null || productObj.otherImageList.length < 5 || productObj.otherImageList == "") {
                elGalleryRightArrow.style.display = "none"
                elGallerylefttArrow.style.display = "none"
            }
        }

        // if (window.innerWidth < 821 && INC_COL.config.pageType == "pdpcollection") {
        //     elMobTitleText.innerHTML = productObj.name
        // }else{
        elTitleText.querySelector('div').textContent = productObj.name
        // }
        elTitleText.querySelector('a').setAttribute('title', productObj.name)
        // + " - Pack of "
        // + " - Pack of "

        elTitleText.querySelector('div').innerHTML = productObj.combotitle;
        elTitleText.querySelector('a').setAttribute('title', productObj.combotitle)

        var activePrice = parseFloat(productObj.activePrice * INC_COL.config.collectioncount).toFixed(2).toString();
        var regularPrice = parseFloat(productObj.regularPrice * INC_COL.config.collectioncount).toFixed(2).toString();

        var totalsaveprc = get_discount_ecirp(productObj.regularPrice * INC_COL.config.collectioncount, productObj.activePrice * INC_COL.config.collectioncount)
        var totalsaveper = get_discount_ecirp_percentage(productObj.regularPrice * INC_COL.config.collectioncount, productObj.activePrice * INC_COL.config.collectioncount)

        elPriceActiveText.parentNode.parentNode.parentNode.classList.remove('is_special_ecirp')
        // elPriceActiveMsg.textContent = " + VAT"
        elPriceRegularText.textContent = "";
        if (activePrice != regularPrice && regularPrice != "" && regularPrice != null && regularPrice != 0) {
            elPriceActiveText.parentNode.parentNode.parentNode.classList.add('is_special_ecirp')
            elPriceActiveText.innerHTML = formatter.format(activePrice);
            elPrdHrdActivePrc.innerHTML = formatter.format(activePrice);
            elPriceRegularText.innerHTML = INC_COL.clientConfig.regularPricePrefix + formatter.format(regularPrice)
            elPrdHrdActivePrc.innerHTML = INC_COL.clientConfig.regularPricePrefix + formatter.format(regularPrice)
            elworthPrice.innerHTML = "<span>You save</span> " + formatter.format(totalsaveprc);
            //"You save: " + formatter.format(totalsaveprc) + " (" + (totalsaveper) + "%)";
        } else {
            elworthPrice.innerHTML = "";
            elPriceActiveText.innerHTML = formatter.format(activePrice);
            elPrdHrdActivePrc.innerHTML = formatter.format(activePrice);
        }
        if (productBlock.querySelector('.inc_prd_desc_add_text').textContent == "Added" || productBlock.querySelector('.inc_prd_desc_add_text').textContent == INC_COL.config.AddedText || productBlock.parentNode.parentNode.querySelector('.inc_prd_desc_add_text').textContent == INC_COL.config.AddedText) {
            if (!dataStore.hasOwnProperty('bundleCartProducts')) {
                dataStore['bundleCartProducts'] = {};
                INC_COL.config.pdpaddedProductList = []
                INC_COL.config.bundle_tracking = []
                INC_COL.config.bundle_skuPushed = []
                INC_COL.config.dupBasket = []
            }
            dataStore["bundleCartProducts"][productObj["sku"]] = dataStore["bundleCartProducts"][previousSKU];
            if (productObj["sku"] != previousSKU) {
                delete dataStore["bundleCartProducts"][previousSKU];
            }
        }
        var elQtyInput = productBlock.parentNode.parentNode.querySelector('.inc_prd_modal_bk .inc_prd_desc_qty_input_text input');
        var sku = productBlock.getAttribute('data-sku');
        var bundle_id = productBlock.getAttribute('data-bundle_id');
        var main_id = productBlock.getAttribute('data-main_id');
        var qty = parseInt(elQtyInput.value);
        var pname = productBlock.querySelector('.inc_prd_desc_title_txt').textContent;
        var pprice = productBlock.querySelector('.inc_prd_desc_ecirp_active_text').textContent.replace('£', '');

        if (elAddText.parentNode.parentNode.querySelector('.inc_prd_desc_add_img.checked') != null) {
            INC_COL.methods.updatecolBundleCart({
                sku: sku,
                qty: qty
            }, "add", main_id, bundle_id, pname, pprice);
        }
        setTimeout(function() {
            if (elImgMainImg.querySelectorAll('img')[0].naturalWidth == 360) {
                elImgMainImg.querySelectorAll('img')[0].setAttribute('src', productObj["imageURLMain"]);
            }
        }, 200);
    }
    if (blockType == "pdpcollection" && productModuleBlock.querySelector('.inc_prd_add_bk.added_inc') != null) {
        productModuleBlock.querySelector('.inc_prd_variant_simple_bk').classList.add('added_inc')
    }
    if (productBlock.parentNode.classList.contains('inc_prd_showcase_bk') == true && productBlock.parentNode.parentNode.classList.contains('main_product') == true) {
        var updtmainprod_html = productBlock.querySelector('.inc_prd_desc_bk').innerHTML
        INC_COL.methods.getMainProductDetails(updtmainprod_html)
    }
}

INC_COL.methods.createcolProductListItemBlock = function(productObj, blockType) {
    var productListItemBlock = generate_html_tag('div', 'inc_bd_prd_list_item_bk');
    var findObj = new INC_COL.classes.FindObj({
        id: productObj.id,
        mainId: productObj.mainId
    });
    var productObj = INC_COL.dataStore.methods().getProductById(findObj);
    productListItemBlock.style.userSelect = "none";
    productListItemBlock.setAttribute('data-id', productObj.id);
    productListItemBlock.setAttribute('data-sku', productObj.sku);
    productListItemBlock.setAttribute('data-main_id', productObj.mainId);
    productListItemBlock.setAttribute('data-bundle_id', productObj.bundleId);

    var seemoreprodhtml = '<div class="inc_bd_prd_list_item_added_bk"><div class="inc_bd_prd_list_item_added_btn_bk"><div class="inc_bd_prd_list_item_added_btn_img_bk"><div class="inc_bd_prd_list_item_added_btn_img"></div></div><div class="inc_bd_prd_list_item_added_btn_text_bk"><div class="inc_bd_prd_list_item_added_btn_text"></div></div></div></div><div class="inc_bd_prd_list_item_img_bk"><div class="inc_bd_prd_list_item_img"><img class="inc_col_lazy" data-src="' + productObj.imageURL + '" src="' + productObj.imageURL + '"></div></div><div class="inc_bd_prd_list_item_title_bk"><div class="inc_bd_prd_list_item_title_txt_bk"><div class="inc_bd_prd_list_item_title_txt"></div></div></div><div class="inc_bd_prd_list_item_ecirp_bk"><div class="inc_bd_prd_list_item_ecirp_active_bk"><div class="inc_bd_prd_list_item_ecirp_active_text_bk"><div class="inc_bd_prd_list_item_ecirp_active_text"></div></div></div></div>'

    productListItemBlock.innerHTML = seemoreprodhtml
    productListItemBlock.querySelector('.inc_bd_prd_list_item_img img').setAttribute('onerror', "this.src='" + INC_COL.config.noimage + "'");
    productListItemBlock.addEventListener("click", function() {
        Array.prototype.forEach.call(document.querySelectorAll('.inc_prd_desc_att_size_list_bk'), function(attSizeListBlock) {
            attSizeListBlock.classList.remove("inc_active");
        });

        var elListMainBlock = document.querySelector('.inc_bd_prd_list_main_bk');
        Array.prototype.forEach.call(elListMainBlock.querySelectorAll('.inc_prd_module_bk'), function(productBlock) {
            productBlock.setAttribute('style', 'display: none!important');
        });
        elListMainBlock.querySelector('.inc_prd_module_bk' + "[data-main_id=\"" + productObj.mainId + "\"]").style.display = "block";

        Array.prototype.forEach.call(productListItemBlock.parentNode.querySelectorAll('.inc_bd_prd_list_item_bk'), function(pListItemBlock) {
            pListItemBlock.classList.remove("inc_active");
        });

        productListItemBlock.classList.add("inc_active");
    });

    return productListItemBlock;
}
INC_COL.methods.updatecolBundleCart = function(bundleCartObj, type, main_id, bundle_id, pname, pprice, comboid) {
    var dataStore = INC_COL.dataStore;
    var listToDelete = []
    if (!dataStore.hasOwnProperty('bundleCartProducts')) {
        dataStore['bundleCartProducts'] = {};
        INC_COL.config.pdpaddedProductList = []
        INC_COL.config.bundle_tracking = []
        INC_COL.config.bundle_skuPushed = []
        INC_COL.config.dupBasket = []
    }

    switch (type) {
    case "add":
        dataStore["bundleCartProducts"][bundleCartObj["sku"]] = bundleCartObj["qty"];
        if (INC_COL.config.bundle_skuPushed.indexOf(bundleCartObj["sku"]) == -1) {
            INC_COL.config.bundle_skuPushed.push(bundleCartObj["sku"])
        }
        if (INC_COL.config.pdpaddedProductList.indexOf(main_id) == -1) {
            INC_COL.config.pdpaddedProductList.push(main_id)
            INC_COL.config.bundle_tracking.push({
                id: main_id,
                bid: bundle_id,
                combo_id: comboid,
                pname: pname,
                prc: pprice,
                qty: bundleCartObj["qty"]

            });
        }
        break;
    case "sub":
        delete dataStore["bundleCartProducts"][bundleCartObj["sku"]];
        INC_COL.config.pdpaddedProductList.remove_prod_list = function() {
            var what, a = arguments, L = a.length, ax;
            while (L && this.length) {
                what = a[--L];
                while ((ax = this.indexOf(what)) !== -1) {
                    this.splice(ax, 1);
                }
            }
            return this;
        }
        ;
        listToDelete[0] = main_id
        for (var i = 0; i < INC_COL.config.bundle_tracking.length; i++) {
            var obj = INC_COL.config.bundle_tracking[i];
            if (obj != undefined) {
                if (listToDelete.indexOf(obj.id) !== -1) {
                    INC_COL.config.bundle_tracking.splice(i, 1);
                }
            }
        }
        INC_COL.config.bundle_skuPushed.remove_prod_list = function() {
            var what, a = arguments, L = a.length, ax;
            while (L && this.length) {
                what = a[--L];
                while ((ax = this.indexOf(what)) !== -1) {
                    this.splice(ax, 1);
                }
            }
            return this;
        }
        ;

        INC_COL.config.bundle_tracking = INC_COL.config.bundle_tracking
        INC_COL.config.pdpaddedProductList.remove_prod_list(main_id);
        INC_COL.config.bundle_skuPushed.remove_prod_list(bundleCartObj["sku"]);
        break;
    }

    if (INC_COL.config.pageType == "pdpcollection")
        this.calculateBundleTotalcol();
}

INC_COL.methods.calculateBundleTotalcol = function() {
    var dataStore = INC_COL.dataStore;
    var bundleCartProducts = dataStore["bundleCartProducts"];
    var productListObj = dataStore.dataStoreObj;
    var duplicate_check_produ = []
    var totalRegularPrice = 0;
    var totalActivePrice = 0;
    var totalMainProduct = 0;
    var totalAddonProducts = 0;
    var totalAddonProductsCount = 0;
    var totalProductCount = 0;
    var total_qty = 0
    var total_collect_point = 0
    var mainId = INC_COL.methods.getProductIdFromWebPage();
    if (bundleCartProducts != null && bundleCartProducts != undefined) {
        Object.keys(bundleCartProducts).forEach(function(sku) {
            for (mainProductId in productListObj) {
                for (childProductId in productListObj[mainProductId]) {
                    if (sku == productListObj[mainProductId][childProductId]["sku"]) {
                        if (duplicate_check_produ.indexOf(productListObj[mainProductId][childProductId]["sku"]) == -1) {
                            duplicate_check_produ.push(productListObj[mainProductId][childProductId]["sku"])
                            var regularPrice = productListObj[mainProductId][childProductId]["regularPrice"];
                            var activePrice = productListObj[mainProductId][childProductId]["activePrice"];
                            totalRegularPrice = totalRegularPrice + (parseFloat(bundleCartProducts[sku]) * regularPrice);
                            totalActivePrice = totalActivePrice + (parseFloat(bundleCartProducts[sku])) * activePrice;

                            total_qty = total_qty + parseInt(bundleCartProducts[sku])

                            if (productListObj[mainProductId][childProductId]["worthPrice"] != "" && productListObj[mainProductId][childProductId]["worthPrice"] != null) {
                                total_collect_point = total_collect_point + +(productListObj[mainProductId][childProductId]["worthPrice"] * parseInt(bundleCartProducts[sku]))
                            }
                            if (productListObj[mainProductId][childProductId].mainId == mainId) {
                                totalProductCount++;
                                totalMainProduct = totalMainProduct + (parseInt(bundleCartProducts[sku]) * activePrice);
                            }

                            // if (getProductBySKU(findObj).mainId != mainId) {
                            if (productListObj[mainProductId][childProductId].mainId != mainId) {
                                totalProductCount++;
                                totalAddonProductsCount++;
                                totalAddonProducts = totalAddonProducts + (parseInt(bundleCartProducts[sku]) * activePrice);
                            }
                        }
                    }
                }
            }
        });
    }
    var priceObj = {
        totalActivePrice: parseFloat(totalActivePrice * INC_COL.config.collectioncount).toFixed(2),
        totalRegularPrice: parseFloat(totalRegularPrice * INC_COL.config.collectioncount).toFixed(2),
        totalMainProduct: totalMainProduct,
        totalAddonProducts: totalAddonProducts,
        totalAddonProductsCount: totalAddonProductsCount,
        totalProductCount: totalProductCount,
        total_qty: total_qty,
        total_collect_point: total_collect_point
    }
    this.updateBundleCartBlockcol(priceObj);
}

INC_COL.methods.updateBundleCartBlockcol = function(priceObj) {
    var dataStore = INC_COL.dataStore;
    var bundleCartProducts = dataStore["bundleCartProducts"];
    var totalRegularPrice = priceObj.totalRegularPrice;
    var totalActivePrice = priceObj.totalActivePrice;
    var totalMainProduct = priceObj.totalMainProduct;
    var totalAddonProducts = priceObj.totalAddonProducts;
    var totalAddonProductsCount = priceObj.totalAddonProductsCount;
    var totalProductCount = priceObj.totalProductCount;
    var total_qty_item = priceObj.total_qty
    var total_col_point = priceObj.total_collect_point
    var elPdpBundleCartBlock = document.querySelector('.inc_bd_cart_bk');
    if (elPdpBundleCartBlock != null) {
        var elBundleCartAddedBlock = document.querySelector('.inc_bd_cart_added_bk')
        var elBundleCartSummaryViewBtnCount = document.querySelector('.inc_bd_cart_smry_view_btn_count')
        var elBundleCartPriceRegularText = document.querySelector('.inc_bd_cart_smry_ecirp_regular_text')
        var elBundleCartPriceActiveText = document.querySelector('.inc_bd_cart_smry_ecirp_active_text')
        var elBundleCartTitleTextcount = document.querySelector('.inc_bd_cart_title_txt')
        var elBundleCartTitleTextblock = document.querySelector('.inc_bd_cart_title_txt_bk')
        var elbundlesavetext = document.querySelector('.inc_bd_cart_smry_ecirp_save_text')
        var elCartsummaryMainPrdtxtBlock = document.querySelector('.inc_bd_cart_smry_main_prd_txt')
        var elCartsummaryMainPrdPrcBlock = document.querySelector('.inc_bd_cart_smry_main_prd_prc')
        var elCartsummaryAddonPrdtxtBlock = document.querySelector('.inc_bd_cart_smry_addon_prd_txt')
        var elCartsummaryAddonPrdPrcBlock = document.querySelector('.inc_bd_cart_smry_addon_prd_prc')

        elBundleCartAddedBlock.innerHTML = "";
        var countcollect = 0;
        var totol_qty_item = 0;
        var bundleCartProductsArray = Object.keys(bundleCartProducts);
        elBundleCartSummaryViewBtnCount.textContent = bundleCartProductsArray.length;
        if (window.innerWidth < 821) {
            elBundleCartTitleTextcount.textContent = "Items you've added"
            //total_qty_item + 
        }
        var onloadprod = []
        if (document.querySelector('.inc_product-main_bk .inc_prd_module_bk') != null) {
            var idmain = document.querySelector('.inc_product-main_bk .inc_prd_module_bk').getAttribute('data-id')
            if (document.querySelector('.inc_bd_prd_list_main_bk .inc_prd_module_bk') != null) {
                var bprod = document.querySelector('.inc_bd_prd_list_main_bk .inc_prd_module_bk').getAttribute('data-id')
                onloadprod.push(idmain)
                onloadprod.push(bprod)
            }
        }
        for (var m = 0; m < INC_COL.config.bundle_skuPushed.length; m++) {
            var elcont = INC_COL.config.bundle_skuPushed[m]
            for (var i = 0; i < bundleCartProductsArray.length; i++) {
                var findObj = new INC_COL.classes.FindObj({
                    sku: bundleCartProductsArray[i]
                });
                var productObj = INC_COL.dataStore.methods().getProductBySKU(findObj);
                if (elcont == productObj.id) {
                    var productId = productObj.id;
                    var prepen_elm = this.createBundleCartAddedProductBlockcol(productId, bundleCartProducts[bundleCartProductsArray[i]], "pdpcollection")
                    if (elBundleCartAddedBlock != null || elBundleCartAddedBlock != undefined) {
                        elBundleCartAddedBlock.insertBefore(prepen_elm, elBundleCartAddedBlock.childNodes[0]);
                    }
                }
                if (i == 0) {
                    var mainPrdPrc = productObj.regularPrice;
                }
            }
        }
        elBundleCartPriceRegularText.style.display = "none";
        if (totalActivePrice != totalRegularPrice) {
            elBundleCartPriceRegularText.style.display = "flex";
        }

        if (bundleCartProductsArray.length == 0) {
            setTimeout(function() {
                onloadpdp_delete = false;
                document.querySelectorAll('.inc_bk .inc_prd_desc_add_bk')[1].click();
                onloadpdp_delete = true;
            }, 5);
        }
        elBundleCartPriceActiveText.innerHTML = formatter.format(totalActivePrice)
        elBundleCartPriceRegularText.parentNode.parentNode.parentNode.classList.remove('simple_ecirp')
        elBundleCartPriceRegularText.parentNode.parentNode.parentNode.classList.remove('is_special_ecirp')
        elBundleCartPriceRegularText.parentNode.parentNode.parentNode.parentNode.classList.remove('simple_ecirp')
        elBundleCartPriceRegularText.parentNode.parentNode.parentNode.parentNode.classList.remove('is_special_ecirp')
        var totalsaveprcs = get_discount_ecirp(totalRegularPrice, totalActivePrice)
        var totalsavepers = get_discount_ecirp_percentage(totalRegularPrice, totalActivePrice)
        if (totalRegularPrice != "0.00" && totalRegularPrice != totalActivePrice && totalRegularPrice != null && totalRegularPrice != "") {
            elBundleCartPriceRegularText.innerHTML = "Was " + formatter.format(totalRegularPrice)
            elBundleCartPriceRegularText.parentNode.parentNode.parentNode.parentNode.classList.add('is_special_ecirp')
            elBundleCartPriceRegularText.parentNode.parentNode.parentNode.classList.add('is_special_ecirp')
            elbundlesavetext.innerHTML = "<span>You save </span>" + formatter.format(totalsaveprcs);
            //"You save: " + formatter.format(totalsaveprcs) + " (" + (totalsavepers) + "%)";
        } else {
            elbundlesavetext.innerHTML = ""
            elBundleCartPriceRegularText.parentNode.parentNode.parentNode.classList.add('simple_ecirp')
        }
        if (window.innerWidth < 821) {
            elCartsummaryMainPrdtxtBlock.innerHTML = "Main product ";
            elCartsummaryMainPrdPrcBlock.innerText = ""
            if (totalMainProduct != undefined) {
                elCartsummaryMainPrdPrcBlock.innerText = formatter.format(totalMainProduct)
            }
            if (bundleCartProductsArray.length == 1) {

                if (totalAddonProducts == 0 || totalAddonProducts == 0.00) {
                    elCartsummaryAddonPrdtxtBlock.innerText = "No addon product selected ";
                    elCartsummaryAddonPrdPrcBlock.innerHTML = ""
                } else {
                    elCartsummaryAddonPrdtxtBlock.innerText = "1 addon product selected ";
                    elCartsummaryAddonPrdPrcBlock.innerHTML = elCartsummaryAddonPrdPrcBlock.innerText = "+ " + formatter.format(totalAddonProducts)
                }
            } else if (bundleCartProductsArray.length > 1) {
                if (totalMainProduct == 0 || totalMainProduct == 0.00) {
                    elCartsummaryAddonPrdtxtBlock.innerText = bundleCartProductsArray.length + " " + "addon products selected ";
                } else {
                    if (bundleCartProductsArray.length == 2) {
                        elCartsummaryAddonPrdtxtBlock.innerText = bundleCartProductsArray.length - 1 + " " + "addon product selected ";
                    } else {
                        elCartsummaryAddonPrdtxtBlock.innerText = bundleCartProductsArray.length - 1 + " " + "addon products selected ";
                    }

                }

                elCartsummaryAddonPrdPrcBlock.innerText = "+ " + formatter.format(totalAddonProducts)
            } else {
                elCartsummaryAddonPrdtxtBlock.innerText = "No addon product selected ";
                elCartsummaryAddonPrdPrcBlock.innerHTML = "$0.00"
            }
        }

        if (elPdpBundleCartBlock != null && elPdpBundleCartBlock != undefined) {
            var bundleCartProductsLength = Object.keys(bundleCartProducts).length;
            var elBundleCartTitleText = document.querySelector('.inc_bd_cart_title_txt')
            var elBundleCartAddBtnText = document.querySelector('.inc_bd_cart_smry_add_btn_text')
            elBundleCartAddBtnText.style.textTransform = "none"
            elBundleCartTitleText.textContent = "Price Summary";

            elBundleCartAddBtnText.textContent = "Add to Basket"
            // "ADD " +bundleCartProductsArray.length +" ITEM(S) TO BAG";

            if (!(totalProductCount > 1)) {
                elBundleCartAddBtnText.textContent = "Add to Basket"
                // "ADD 1 ITEM TO BAG";
            }
        }

        var elPriceMainTitleText = elPdpBundleCartBlock.querySelector('.inc_bd-cart_ecirp_main_title_txt');
        var elPriceMainFigureText = elPdpBundleCartBlock.querySelector('.inc_bd-cart_ecirp_main_figure_text');
        var elPriceAddonTitleText = elPdpBundleCartBlock.querySelector('.inc_bd-cart_ecirp_addon_title_txt');
        var elPriceAddonFigureText = elPdpBundleCartBlock.querySelector('.inc_bd-cart_ecirp_addon_figure_text');
        var elPriceRegularText = elPdpBundleCartBlock.querySelector('.inc_bd_cart_smry_ecirp_regular_text');
        var elPriceActiveText = elPdpBundleCartBlock.querySelector('.inc_bd_cart_smry_ecirp_active_text');

        elPriceMainTitleText.textContent = "Main Product Price ";
        elPriceAddonTitleText.textContent = "Add-on(s) Selected  " + ((totalAddonProductsCount > 0) ? totalAddonProductsCount : "");

        elPriceMainFigureText.innerHTML = formatter.format(totalMainProduct)
        elPriceAddonFigureText.innerHTML = formatter.format(totalAddonProducts)
        elPriceActiveText.innerHTML = formatter.format(totalActivePrice)

        setTimeout(function() {
            if (INC_COL.dataStore.bundleCartProducts != null) {
                if (Object.keys(INC_COL.dataStore.bundleCartProducts).length == 0) {
                    elBundleCartAddBtnText.textContent = "ADD BUNDLE TO BASKET";
                    elBundleCartAddBtnText.parentNode.parentNode.setAttribute('style', 'pointer-events: none;opacity: 0.5;')
                } else {
                    elBundleCartAddBtnText.parentNode.parentNode.setAttribute('style', 'pointer-events: auto;opacity: 1;')
                }
            }
        }, 100);
    }

}

INC_COL.methods.createBundleCartAddedProductBlockcol = function(productId, qty, blockType) {
    var addedProductBlock = generate_html_tag('div', 'inc_bd_cart_added_product_bk')
    var findObj = new INC_COL.classes.FindObj({
        id: productId
    });
    var productObj = INC_COL.dataStore.methods().getProductById(findObj);
    addedProductBlock.setAttribute('data-id', productObj.id);
    addedProductBlock.setAttribute('data-sku', productObj.sku);
    addedProductBlock.setAttribute('data-main_id', productObj.mainId);
    addedProductBlock.setAttribute('data-bundle_id', productObj.bundleId);

    var color = "";
    var size = "";
    var just_check_prod_bk = document.querySelector('.inc_prd_module_bk[data-main_id="' + productObj.mainId + '"]')
    if (just_check_prod_bk != null) {
        if (just_check_prod_bk.querySelector('.inc_prd_desc_att_size_list_item_img_bk.inc_active div') != null) {
            size = just_check_prod_bk.querySelector('.inc_prd_desc_att_size_list_item_img_bk.inc_active div').innerText
        }
        if (just_check_prod_bk.querySelector('.inc_prd_desc_att_color_list_item_bk.inc_active .inc_prd_desc_att_color_list_item_img_bk') != null) {
            color = just_check_prod_bk.querySelector('.inc_prd_desc_att_color_list_item_bk.inc_active .inc_prd_desc_att_color_list_item_img_bk').getAttribute('data-color')
        }
    }
    var prod_module_elm = document.querySelector('.inc_bk .inc_prd_module_bk[data-main_id="' + productObj.mainId + '"]')
    var modal_attr_bk = prod_module_elm.querySelector('.inc_prd_modal_bk')
    var zero_text = modal_attr_bk.querySelector('.inc_prd_desc_att_bk').getAttribute('data-zero');
    var size_text = modal_attr_bk.querySelector('.inc_prd_desc_att_bk').getAttribute('data-size');
    var color_text = modal_attr_bk.querySelector('.inc_prd_desc_att_bk').getAttribute('data-color');
    var third_text = modal_attr_bk.querySelector('.inc_prd_desc_att_bk').getAttribute('data-third');

    var sel_attr_text = ""
    if (color_text != undefined) {
        sel_attr_text = color_text
    }
    if (zero_text != undefined) {
        if (sel_attr_text == "") {
            sel_attr_text = zero_text
        } else {
            sel_attr_text = sel_attr_text + " / " + zero_text
        }
    }
    if (size_text != undefined) {
        sel_attr_text = sel_attr_text + " / " + size_text
    }
    if (third_text != undefined) {
        sel_attr_text = sel_attr_text + " / " + third_text
    }
    var addedsumprodhtml = '<div class="inc_bd_cart_added_product_img_bk"><div class="inc_bd_cart_added_product_img"><img src="' + productObj.imageURL + '" data-src="' + productObj.imageURL + '"></div></div><div class="inc_bd_cart_added_product_title_bk"><div class="inc_bd_cart_added_product_title_txt_bk"><div class="inc_bd_cart_added_product_title_txt"><a title="' + productObj.name + '"><div style="text-transform: unset;"><span>' + qty + " " + ' <small> x </small> </span>' + productObj.name + '</div></a></div></div></div><div class="inc_bd_cart_added_product_desc_qty_bk"><div class="inc_bd_cart_added_product_desc_qty_text_bk"><div class="inc_bd_cart_addeed_product_desc_qty_text">' + qty + '</div></div></div><div class="inc_bd_cart_added_product_ecirp_bk"><div class="inc_bd_cart_added_product_ecirp_text_bk"><div class="inc_bd_cart_added_product_ecirp_text">' + formatter.format(productObj.activePrice * qty) + '</div></div></div><div class="inc_bd_cart_added_product_att_bk" title="' + sel_attr_text + '"><div class="inc_bd_cart_added_product_att_color_bk"><div class="inc_bd_cart_added_product_att_color_text_bk" style="text-transform: none;">' + sel_attr_text + '</div></div><div class="inc_bd_cart_added_product_att_size_bk"><div class="inc_bd_cart_added_product_att_size_text_bk"><div class="inc_bd_cart_added_product_att_size_text"></div></div></div></div><div class="inc_bd_cart_added_product_edit_bk"><div class="inc_bd_cart_added_product_edit_text_bk"><div class="inc_bd_cart_added_product_edit_text"></div></div><div class="inc_bd_cart_added_product_edit_img_bk"><div class="inc_bd_cart_added_product_edit_img"></div></div></div>'

    addedProductBlock.innerHTML = addedsumprodhtml

    addedProductBlock.querySelector('.inc_bd_cart_added_product_img img').setAttribute('onerror', "this.src='" + INC_COL.config.noimage + "'")

    var elEditTextBlock = addedProductBlock.querySelector(".inc_bd_cart_added_product_edit_text_bk")
    var elEditImgBlock = addedProductBlock.querySelector(".inc_bd_cart_added_product_edit_img_bk");

    elEditTextBlock.addEventListener("click", function() {
        if (INC_COL.config.deviceType == "mobile") {
            if (document.querySelector('.inc_bd_prd_list_item_bk' + '[data-main_id="' + productObj.mainId + '"]') != null)
                document.querySelector('.inc_bd_prd_list_item_bk' + '[data-main_id="' + productObj.mainId + '"]').click();
        }
        setTimeout(function() {
            document.querySelector('.inc_prd_bk' + '[data-id="' + productObj.id + '"]').parentNode.parentNode.querySelector('.inc_prd_modal_bk').classList.add('inc_active');
            document.querySelector('html').classList.add('inc_overlay');
        }, 50);
    });
    elEditImgBlock.addEventListener("click", function() {
        document.querySelector('.inc_prd_bk' + '[data-id="' + productObj.id + '"]').querySelector('.inc_prd_desc_add_bk').click();
    });
    return addedProductBlock;
}

INC_COL.methods.clear = function() {
    if (document.querySelector('.inc_bk') != null) {
        Array.prototype.forEach.call(document.querySelectorAll('.inc_bk'), function(el) {
            el.parentNode.removeChild(el);
        });
    }
}
INC_COL.methods.addBundleToCartcol = function(btn_cart) {
    if (document.querySelector('.dth-add-to-basket.-js-add-to-basket') != null) {
        document.querySelector('.dth-add-to-basket.-js-add-to-basket').style.opacity = "0"
    }
    INC_COL.clientConfig.OOS = []
    item_inc = []
    var storeId = WCParamJS.storeId;
    var catalogId = WCParamJS.catalogId;
    var langId = -1;
    // var partNumberWR;
    var inventoryValidation = true;
    var pahDoInventory = 'N';
    //var catEntryId = document.querySelector('.dth-mini-basket__items__qty-remove').getAttribute('data-orderitemci');
    var quantity = 1;
    var isAddToDelivery = true;
    var requesttype = 'ajax';

    var addProductURL = INC_COL.config.addToBasketURL;
    if (document.querySelector('input[name="form_key"]') != null) {
        formKey = document.querySelector('input[name="form_key"]').value;
    }
    var dataStore = INC_COL.dataStore;
    var mainProductId = document.querySelector('.inc_prd_info_main_bk').getAttribute('data-main_id');
    var searchParamsObjArray = [];
    var formData = []
    formData = new FormData();
    var t = 0;
    var data0 = {};
    var data1 = {};
    var data2 = {};
    var data3 = {};
    var data4 = {};
    var data5 = {};
    var data6 = {};
    var url0 = null;
    var url1 = null;
    var url2 = null;
    var url3 = null;
    var url4 = null;
    var url5 = null;
    var url6 = null;
    var pid0 = null;
    var pid1 = null;
    var pid2 = null;
    var pid3 = null;
    var pid4 = null;
    var pid5 = null;
    var pid6 = null;
    var formData = []
    var form_data_json = []
    var count_pr_to_add = 0
    var addedproducdetails = []
    var total_length = Object.keys(dataStore.bundleCartProducts);
    Object.keys(dataStore.bundleCartProducts).forEach(function(bundleCartProduct) {
        var findObj = new INC_COL.classes.FindObj({
            id: bundleCartProduct
        });
        var productObj = INC_COL.dataStore.methods().getProductById(findObj);

        if (count_pr_to_add == 0) {
            data0["storeId"] = storeId;
            data0["catalogId"] = catalogId;
            data0["langId"] = langId;
            data0["orderId"] = '.';
            data0["partNumberWR"] = productObj.mainsku;
            data0["calculationUsage"] = "-1,-2,-5,-6,-7";
            data0["inventoryValidation"] = inventoryValidation;
            data0["pahDoInventory"] = pahDoInventory;
            data0["catEntryId"] = productObj.internalCategoryId;
            data0["quantity"] = dataStore.bundleCartProducts[bundleCartProduct] * INC_COL.config.collectioncount;
            data0["isAddToDelivery"] = isAddToDelivery;
            data0["requesttype"] = requesttype;
            url0 = addProductURL;
            pid0 = productObj.mainId
            formData.push(data0)
        } else if (count_pr_to_add == 1) {
            data1["storeId"] = storeId;
            data1["catalogId"] = catalogId;
            data1["langId"] = langId;
            data1["partNumberWR"] = productObj.mainsku;
            data1["inventoryValidation"] = inventoryValidation;
            data1["pahDoInventory"] = pahDoInventory;
            data1["catEntryId"] = productObj.internalCategoryId;
            data1["quantity"] = dataStore.bundleCartProducts[bundleCartProduct] * INC_COL.config.collectioncount;
            data1["isAddToDelivery"] = isAddToDelivery;
            data1["requesttype"] = requesttype;
            url1 = addProductURL;
            pid1 = productObj.mainId
            formData.push(data1)
        } else if (count_pr_to_add == 2) {
            data2["storeId"] = storeId;
            data2["catalogId"] = catalogId;
            data2["langId"] = langId;
            data2["partNumberWR"] = productObj.mainsku;
            data2["inventoryValidation"] = inventoryValidation;
            data2["pahDoInventory"] = pahDoInventory;
            data2["catEntryId"] = productObj.internalCategoryId;
            data2["quantity"] = dataStore.bundleCartProducts[bundleCartProduct] * INC_COL.config.collectioncount;
            data2["isAddToDelivery"] = isAddToDelivery;
            data2["requesttype"] = requesttype;
            url2 = addProductURL;
            pid2 = productObj.mainId
            formData.push(data2)
        } else if (count_pr_to_add == 3) {
            data3["storeId"] = storeId;
            data3["catalogId"] = catalogId;
            data3["langId"] = langId;
            data3["partNumberWR"] = productObj.mainsku;
            data3["inventoryValidation"] = inventoryValidation;
            data3["pahDoInventory"] = pahDoInventory;
            data3["catEntryId"] = productObj.internalCategoryId;
            data3["quantity"] = dataStore.bundleCartProducts[bundleCartProduct] * INC_COL.config.collectioncount;
            data3["isAddToDelivery"] = isAddToDelivery;
            data3["requesttype"] = requesttype;
            url3 = addProductURL;
            pid3 = productObj.mainId
            formData.push(data3)
        } else if (count_pr_to_add == 4) {
            data4["storeId"] = storeId;
            data4["catalogId"] = catalogId;
            data4["langId"] = langId;
            data4["partNumberWR"] = productObj.mainsku;
            data4["inventoryValidation"] = inventoryValidation;
            data4["pahDoInventory"] = pahDoInventory;
            data4["catEntryId"] = productObj.internalCategoryId;
            data4["quantity"] = dataStore.bundleCartProducts[bundleCartProduct] * INC_COL.config.collectioncount;
            data4["isAddToDelivery"] = isAddToDelivery;
            data4["requesttype"] = requesttype;
            url4 = addProductURL;
            pid4 = productObj.mainId
            formData.push(data4)
        } else if (count_pr_to_add == 5) {
            data5["storeId"] = storeId;
            data5["catalogId"] = catalogId;
            data5["langId"] = langId;
            data5["partNumberWR"] = productObj.mainsku;
            data5["inventoryValidation"] = inventoryValidation;
            data5["pahDoInventory"] = pahDoInventory;
            data5["catEntryId"] = productObj.internalCategoryId;
            data5["quantity"] = dataStore.bundleCartProducts[bundleCartProduct] * INC_COL.config.collectioncount;
            data5["isAddToDelivery"] = isAddToDelivery;
            data5["requesttype"] = requesttype;
            url5 = addProductURL;
            pid5 = productObj.mainId
            formData.push(data5)
        }
        var sizeText = ""
        var weightText = ""
        if (productObj.option[0] != undefined || productObj.option[1] != undefined || productObj.option[2] != undefined) {
            if (productObj.option[1] != undefined) {
                if (productObj.option[1].code == "Size") {
                    sizeText = productObj.option[1].text
                } else if (productObj.option[1].code == "Weight") {
                    weightText = productObj.option[1].text
                } else if (productObj.option[1].code == "Volume") {
                    sizeText = productObj.option[1].text
                }
            }
        }
        addedproducdetails.push({
            'name': productObj.name,
            'id': productObj.mainId,
            'price': productObj.activePrice,
            'brand': productObj.manufacturer,
            'category': productObj.categoryName,
            'variant': productObj.id,
            'quantity': dataStore.bundleCartProducts[bundleCartProduct],
            'weight': weightText,
            'size': sizeText,
            //track if available,
        })
        count_pr_to_add++
        if (total_length.length == count_pr_to_add) {
            ajax_add_to_cart_col(formData, btn_cart, mainProductId, url0, url1, url2, url3, url4, url5, pid0, pid1, pid2, pid3, pid4, pid5)
            setJsonDatatoCookie(addedproducdetails)
            // dataLayer.push({ ecommerce: null });  // Clear the previous ecommerce object.
            // dataLayer.push({
            //     'event': 'addToCart',
            //     'product_type' : 'Bundle', //track if this was added as a bundle if true. If false 'No Bundle'
            //     'ecommerce': {
            //     'currencyCode': 'GBP',
            //     'add': {                                // 'add' actionFieldObject measures.
            //         'products':addedproducdetails
            //         }
            //     }
            // });
        }
    });
    var timeoutOffset = 0;

    add_to_cart_tracking_multiple_col(mainProductId)

    // Object.keys(dataStore.bundleCartProducts).forEach(function (bundleCartProduct) {
    //     var findObj = new INC_COL.classes.FindObj({ id: bundleCartProduct });
    //     var productObj = INC_COL.dataStore.methods().getProductById(findObj);

    //     var eventDataObj = {};
    //     var pageType = "100";

    //     eventDataObj["bundle_data"] = {
    //         "id": productObj.bundleId,
    //         "product_ids": [mainProductId, productObj.mainId],
    //         "product_id": mainProductId
    //     }
    //     INC_COL.methods.trackingEvents("bundleAddToCart", eventDataObj, pageType);
    // });
}
function ajax_add_to_cart_col(formData, btn_cart, mainProductId, url0, url1, url2, url3, url4, url5, p0, p1, p2, p3, p4, p5) {
    INC_COL.clientConfig.OOS = []
    INC_COL.clientConfig.OOS_MESG = []

    callprodA()

    function callprodA() {
        dojo.xhrPost({
            url: url0,
            handleAs: "json-comment-filtered",
            form: null,
            content: formData[0],
            service: wc.service.services.AddOrderItem,
            load: function(_255, _256) {
                if (_255.errorMessage != undefined && _255.errorMessage != "") {
                    oosproduct(p0, formData[0].quantity)
                    INC_COL.clientConfig.OOS.push(p0)
                    INC_COL.clientConfig.OOS_MESG.push(_255.errorMessage)
                }

                if (url1 == undefined) {
                    if (document.querySelector('.dth-add-to-basket.-js-add-to-basket.active') != null) {
                        document.querySelector('.dth-add-to-basket.-js-add-to-basket.active').style.opacity = ""
                    }
                    INC_COL.config.disablebtn = true
                    getTrackingPixel()
                    if (btn_cart != undefined) {
                        btn_cart.parentNode.parentNode.classList.remove('inc_loading')
                    }
                    if (document.querySelector('.inc_pdp_bundle_cart_summary_add_btn_bk.inc_loading') != null) {
                        document.querySelector('.inc_pdp_bundle_cart_summary_add_btn_bk.inc_loading').classList.remove('inc_loading')
                    }
                    if (document.querySelector('.inc_recommended_tabs_list_item_block') == null) {
                        // window.location.href = INC_COL.clientConfig.checkoutLink;     
                        jQuery("html, body").animate({
                            scrollTop: 0
                        }, "slow");
                    }

                    if (document.querySelector('.inc_recommended_tabs_list_item_block') != null) {
                        document.querySelector('html').classList.add('inc_overlay');
                        if (_255.errorMessage != undefined && _255.errorMessage != "") {
                        } else {
                            INC.methods.showSidebar();
                            INC.methods.updateSidebarColBlock(INC_COL.dataStore);
                        }
                        if (document.querySelector('.sidebar_outer.sidebar_outer_active') == null) {
                            document.querySelector('html').classList.remove('inc_overlay')
                        }
                    }
                }

                if (url1 != undefined) {
                    callprodB()
                }
                callbacksuccessinc(_255, _256)
                if (document.querySelector('.inc_product_desc_add_bk.Inc_checked') != null) {
                    var imgscrc = document.querySelector('.inc_product_desc_add_bk.Inc_checked').parentNode.parentNode.parentNode.querySelector('.inc_product_img_main_img img').src
                    if (imgscrc != undefined) {
                        if (document.querySelector('.dth-add-to-basket.-js-add-to-basket .dth-add-to-basket__image') != null) {
                            document.querySelector('.dth-add-to-basket.-js-add-to-basket .dth-add-to-basket__image').src = imgscrc
                        }
                    }
                }
            },
            error: function(_25c, _25d) {
                var _25e = dojo.i18n.getLocalization("wc", "common");
                dojo.publish("ajaxRequestCompleted");
                if (url1 == undefined) {
                    INC_COL.config.disablebtn = true
                    getTrackingPixel()
                    if (btn_cart != undefined) {
                        btn_cart.parentNode.parentNode.classList.remove('inc_loading')
                    }
                    if (document.querySelector('.inc_pdp_bundle_cart_summary_add_btn_bk.inc_loading') != null) {
                        document.querySelector('.inc_pdp_bundle_cart_summary_add_btn_bk.inc_loading').classList.remove('inc_loading')
                    }
                    if (document.querySelector('.inc_recommended_tabs_list_item_block') == null) {
                        // window.location.href = INC_COL.clientConfig.checkoutLink; 
                        jQuery("html, body").animate({
                            scrollTop: 0
                        }, "slow");
                    }

                    if (document.querySelector('.inc_recommended_tabs_list_item_block') != null) {
                        document.querySelector('html').classList.add('inc_overlay');
                        INC.methods.showSidebar();
                        INC.methods.updateSidebarColBlock(INC_COL.dataStore);
                        if (document.querySelector('.sidebar_outer.sidebar_outer_active') == null) {
                            document.querySelector('html').classList.remove('inc_overlay')
                        }
                    }
                    if (document.querySelector('.inc_product_desc_add_bk.Inc_checked') != null) {
                        var imgscrc = document.querySelector('.inc_product_desc_add_bk.Inc_checked').parentNode.parentNode.parentNode.querySelector('.inc_product_img_main_img img').src
                        if (imgscrc != undefined) {
                            if (document.querySelector('.dth-add-to-basket.-js-add-to-basket .dth-add-to-basket__image') != null) {
                                document.querySelector('.dth-add-to-basket.-js-add-to-basket .dth-add-to-basket__image').src = imgscrc
                            }
                        }
                    }
                }

                if (url1 != undefined) {
                    callprodB()
                }

            }
        });
    }
    function callprodB() {
        dojo.xhrPost({
            url: url1,
            handleAs: "json-comment-filtered",
            form: null,
            content: formData[1],
            service: wc.service.services.AddOrderItem,
            load: function(_255, _256) {
                if (_255.errorMessage != undefined && _255.errorMessage != "") {
                    oosproduct(p1, formData[1].quantity)
                    INC_COL.clientConfig.OOS.push(p1)
                    INC_COL.clientConfig.OOS_MESG.push(_255.errorMessage)
                }

                if (url2 == undefined) {
                    if (document.querySelector('.dth-add-to-basket.-js-add-to-basket.active') != null) {
                        document.querySelector('.dth-add-to-basket.-js-add-to-basket.active').style.opacity = ""
                    }
                    INC_COL.config.disablebtn = true
                    getTrackingPixel()
                    if (btn_cart != undefined) {
                        btn_cart.parentNode.parentNode.classList.remove('inc_loading')
                    }
                    if (document.querySelector('.inc_pdp_bundle_cart_summary_add_btn_bk.inc_loading') != null) {
                        document.querySelector('.inc_pdp_bundle_cart_summary_add_btn_bk.inc_loading').classList.remove('inc_loading')
                    }
                    if (document.querySelector('.inc_recommended_tabs_list_item_block') == null) {
                        // window.location.href = INC_COL.clientConfig.checkoutLink;   
                        jQuery("html, body").animate({
                            scrollTop: 0
                        }, "slow");
                    }

                    if (document.querySelector('.inc_recommended_tabs_list_item_block') != null) {
                        document.querySelector('html').classList.add('inc_overlay');
                        if (_255.errorMessage != undefined && _255.errorMessage != "") {
                        } else {
                            INC.methods.showSidebar();
                            INC.methods.updateSidebarColBlock(INC_COL.dataStore);
                        }
                        if (document.querySelector('.sidebar_outer.sidebar_outer_active') == null) {
                            document.querySelector('html').classList.remove('inc_overlay')
                        }
                    }
                }

                if (url2 != undefined) {
                    callprodC()
                }
                callbacksuccessinc(_255, _256)
                if (document.querySelector('.inc_product_desc_add_bk.Inc_checked') != null) {
                    var imgscrc = document.querySelector('.inc_product_desc_add_bk.Inc_checked').parentNode.parentNode.parentNode.querySelector('.inc_product_img_main_img img').src
                    if (imgscrc != undefined) {
                        if (document.querySelector('.dth-add-to-basket.-js-add-to-basket .dth-add-to-basket__image') != null) {
                            document.querySelector('.dth-add-to-basket.-js-add-to-basket .dth-add-to-basket__image').src = imgscrc
                        }
                    }
                }
            },
            error: function(_25c, _25d) {
                var _25e = dojo.i18n.getLocalization("wc", "common");
                dojo.publish("ajaxRequestCompleted");
                if (url2 == undefined) {
                    INC_COL.config.disablebtn = true
                    getTrackingPixel()
                    if (btn_cart != undefined) {
                        btn_cart.parentNode.parentNode.classList.remove('inc_loading')
                    }
                    if (document.querySelector('.inc_pdp_bundle_cart_summary_add_btn_bk.inc_loading') != null) {
                        document.querySelector('.inc_pdp_bundle_cart_summary_add_btn_bk.inc_loading').classList.remove('inc_loading')
                    }
                    if (document.querySelector('.inc_recommended_tabs_list_item_block') == null) {
                        // window.location.href = INC_COL.clientConfig.checkoutLink;  
                        jQuery("html, body").animate({
                            scrollTop: 0
                        }, "slow");
                    }

                    if (document.querySelector('.inc_recommended_tabs_list_item_block') != null) {
                        document.querySelector('html').classList.add('inc_overlay');
                        INC.methods.showSidebar();
                        INC.methods.updateSidebarColBlock(INC_COL.dataStore);
                        if (document.querySelector('.sidebar_outer.sidebar_outer_active') == null) {
                            document.querySelector('html').classList.remove('inc_overlay')
                        }
                    }
                    if (document.querySelector('.inc_product_desc_add_bk.Inc_checked') != null) {
                        var imgscrc = document.querySelector('.inc_product_desc_add_bk.Inc_checked').parentNode.parentNode.parentNode.querySelector('.inc_product_img_main_img img').src
                        if (imgscrc != undefined) {
                            if (document.querySelector('.dth-add-to-basket.-js-add-to-basket .dth-add-to-basket__image') != null) {
                                document.querySelector('.dth-add-to-basket.-js-add-to-basket .dth-add-to-basket__image').src = imgscrc
                            }
                        }
                    }
                }

                if (url2 != undefined) {
                    callprodC()
                }
            }
        });
    }
    function callprodC() {
        dojo.xhrPost({
            url: url2,
            handleAs: "json-comment-filtered",
            form: null,
            content: formData[2],
            service: wc.service.services.AddOrderItem,
            load: function(_255, _256) {
                if (_255.errorMessage != undefined && _255.errorMessage != "") {
                    oosproduct(p2, formData[2].quantity)
                    INC_COL.clientConfig.OOS.push(p2)
                    INC_COL.clientConfig.OOS_MESG.push(_255.errorMessage)
                }

                if (url3 == undefined) {
                    if (document.querySelector('.dth-add-to-basket.-js-add-to-basket.active') != null) {
                        document.querySelector('.dth-add-to-basket.-js-add-to-basket.active').style.opacity = ""
                    }
                    INC_COL.config.disablebtn = true
                    getTrackingPixel()
                    if (btn_cart != undefined) {
                        btn_cart.parentNode.parentNode.classList.remove('inc_loading')
                    }
                    if (document.querySelector('.inc_pdp_bundle_cart_summary_add_btn_bk.inc_loading') != null) {
                        document.querySelector('.inc_pdp_bundle_cart_summary_add_btn_bk.inc_loading').classList.remove('inc_loading')
                    }
                    if (document.querySelector('.inc_recommended_tabs_list_item_block') == null) {
                        // window.location.href = INC_COL.clientConfig.checkoutLink;
                        jQuery("html, body").animate({
                            scrollTop: 0
                        }, "slow");
                    }

                    if (document.querySelector('.inc_recommended_tabs_list_item_block') != null) {
                        document.querySelector('html').classList.add('inc_overlay');
                        if (_255.errorMessage != undefined && _255.errorMessage != "") {
                        } else {
                            INC.methods.showSidebar();
                            INC.methods.updateSidebarColBlock(INC_COL.dataStore);

                        }
                        if (document.querySelector('.sidebar_outer.sidebar_outer_active') == null) {
                            document.querySelector('html').classList.remove('inc_overlay')
                        }
                    }
                }

                if (url3 != undefined) {
                    callprodD()
                }
                callbacksuccessinc(_255, _256)
                if (document.querySelector('.inc_product_desc_add_bk.Inc_checked') != null) {
                    var imgscrc = document.querySelector('.inc_product_desc_add_bk.Inc_checked').parentNode.parentNode.parentNode.querySelector('.inc_product_img_main_img img').src
                    if (imgscrc != undefined) {
                        if (document.querySelector('.dth-add-to-basket.-js-add-to-basket .dth-add-to-basket__image') != null) {
                            document.querySelector('.dth-add-to-basket.-js-add-to-basket .dth-add-to-basket__image').src = imgscrc
                        }
                    }
                }
            },
            error: function(_25c, _25d) {
                var _25e = dojo.i18n.getLocalization("wc", "common");
                dojo.publish("ajaxRequestCompleted");
                if (url3 == undefined) {
                    INC_COL.config.disablebtn = true
                    getTrackingPixel()
                    if (btn_cart != undefined) {
                        btn_cart.parentNode.parentNode.classList.remove('inc_loading')
                    }
                    if (document.querySelector('.inc_recommended_tabs_list_item_block') == null) {
                        // window.location.href = INC_COL.clientConfig.checkoutLink;                  
                        jQuery("html, body").animate({
                            scrollTop: 0
                        }, "slow");
                    }

                    if (document.querySelector('.inc_recommended_tabs_list_item_block') != null) {
                        document.querySelector('html').classList.add('inc_overlay');
                        INC.methods.showSidebar();
                        INC.methods.updateSidebarColBlock(INC_COL.dataStore);
                        if (document.querySelector('.sidebar_outer.sidebar_outer_active') == null) {
                            document.querySelector('html').classList.remove('inc_overlay')
                        }
                    }
                    if (document.querySelector('.inc_product_desc_add_bk.Inc_checked') != null) {
                        var imgscrc = document.querySelector('.inc_product_desc_add_bk.Inc_checked').parentNode.parentNode.parentNode.querySelector('.inc_product_img_main_img img').src
                        if (imgscrc != undefined) {
                            if (document.querySelector('.dth-add-to-basket.-js-add-to-basket .dth-add-to-basket__image') != null) {
                                document.querySelector('.dth-add-to-basket.-js-add-to-basket .dth-add-to-basket__image').src = imgscrc
                            }
                        }
                    }
                }

                if (url3 != undefined) {
                    callprodD()
                }
            }
        });
    }
    function callprodD() {
        dojo.xhrPost({
            url: url3,
            handleAs: "json-comment-filtered",
            form: null,
            content: formData[3],
            service: wc.service.services.AddOrderItem,
            load: function(_255, _256) {
                if (_255.errorMessage != undefined && _255.errorMessage != "") {
                    oosproduct(p3, formData[3].quantity)
                    INC_COL.clientConfig.OOS.push(p3)
                    INC_COL.clientConfig.OOS_MESG.push(_255.errorMessage)
                }

                if (url4 == undefined) {
                    if (document.querySelector('.dth-add-to-basket.-js-add-to-basket.active') != null) {
                        document.querySelector('.dth-add-to-basket.-js-add-to-basket.active').style.opacity = ""
                    }
                    INC_COL.config.disablebtn = true
                    getTrackingPixel()
                    if (btn_cart != undefined) {
                        btn_cart.parentNode.parentNode.classList.remove('inc_loading')
                    }
                    if (document.querySelector('.inc_pdp_bundle_cart_summary_add_btn_bk.inc_loading') != null) {
                        document.querySelector('.inc_pdp_bundle_cart_summary_add_btn_bk.inc_loading').classList.remove('inc_loading')
                    }
                    if (document.querySelector('.inc_recommended_tabs_list_item_block') == null) {
                        // window.location.href = INC_COL.clientConfig.checkoutLink; 
                        jQuery("html, body").animate({
                            scrollTop: 0
                        }, "slow");
                    }

                    if (document.querySelector('.inc_recommended_tabs_list_item_block') != null) {
                        document.querySelector('html').classList.add('inc_overlay');
                        if (_255.errorMessage != undefined && _255.errorMessage != "") {
                        } else {
                            INC.methods.showSidebar();
                            INC.methods.updateSidebarColBlock(INC_COL.dataStore);
                        }
                        if (document.querySelector('.sidebar_outer.sidebar_outer_active') == null) {
                            document.querySelector('html').classList.remove('inc_overlay')
                        }
                    }
                }

                if (url4 != undefined) {
                    callprodE()
                }
                callbacksuccessinc(_255, _256)
                if (document.querySelector('.inc_product_desc_add_bk.Inc_checked') != null) {
                    var imgscrc = document.querySelector('.inc_product_desc_add_bk.Inc_checked').parentNode.parentNode.parentNode.querySelector('.inc_product_img_main_img img').src
                    if (imgscrc != undefined) {
                        if (document.querySelector('.dth-add-to-basket.-js-add-to-basket .dth-add-to-basket__image') != null) {
                            document.querySelector('.dth-add-to-basket.-js-add-to-basket .dth-add-to-basket__image').src = imgscrc
                        }
                    }
                }
            },
            error: function(_25c, _25d) {
                var _25e = dojo.i18n.getLocalization("wc", "common");
                dojo.publish("ajaxRequestCompleted");
                if (url4 == undefined) {
                    INC_COL.config.disablebtn = true
                    getTrackingPixel()
                    if (btn_cart != undefined) {
                        btn_cart.parentNode.parentNode.classList.remove('inc_loading')
                    }
                    if (document.querySelector('.inc_pdp_bundle_cart_summary_add_btn_bk.inc_loading') != null) {
                        document.querySelector('.inc_pdp_bundle_cart_summary_add_btn_bk.inc_loading').classList.remove('inc_loading')
                    }
                    if (document.querySelector('.inc_recommended_tabs_list_item_block') == null) {
                        // window.location.href = INC_COL.clientConfig.checkoutLink; 
                        jQuery("html, body").animate({
                            scrollTop: 0
                        }, "slow");
                    }

                    if (document.querySelector('.inc_recommended_tabs_list_item_block') != null) {
                        document.querySelector('html').classList.add('inc_overlay');
                        INC.methods.showSidebar();
                        INC.methods.updateSidebarColBlock(INC_COL.dataStore);
                        if (document.querySelector('.sidebar_outer.sidebar_outer_active') == null) {
                            document.querySelector('html').classList.remove('inc_overlay')
                        }
                    }
                    if (document.querySelector('.inc_product_desc_add_bk.Inc_checked') != null) {
                        var imgscrc = document.querySelector('.inc_product_desc_add_bk.Inc_checked').parentNode.parentNode.parentNode.querySelector('.inc_product_img_main_img img').src
                        if (imgscrc != undefined) {
                            if (document.querySelector('.dth-add-to-basket.-js-add-to-basket .dth-add-to-basket__image') != null) {
                                document.querySelector('.dth-add-to-basket.-js-add-to-basket .dth-add-to-basket__image').src = imgscrc
                            }
                        }
                    }
                }

                if (url4 != undefined) {
                    callprodE()
                }
            }
        });
    }
    function callprodE() {
        dojo.xhrPost({
            url: url4,
            handleAs: "json-comment-filtered",
            form: null,
            content: formData[4],
            service: wc.service.services.AddOrderItem,
            load: function(_255, _256) {
                if (_255.errorMessage != undefined && _255.errorMessage != "") {
                    oosproduct(p4, formData[4].quantity)
                    INC_COL.clientConfig.OOS.push(p4)
                    INC_COL.clientConfig.OOS_MESG.push(_255.errorMessage)
                }

                if (url5 == undefined) {
                    if (document.querySelector('.dth-add-to-basket.-js-add-to-basket.active') != null) {
                        document.querySelector('.dth-add-to-basket.-js-add-to-basket.active').style.opacity = ""
                    }
                    INC_COL.config.disablebtn = true
                    getTrackingPixel()
                    if (btn_cart != undefined) {
                        btn_cart.parentNode.parentNode.classList.remove('inc_loading')
                    }
                    if (document.querySelector('.inc_pdp_bundle_cart_summary_add_btn_bk.inc_loading') != null) {
                        document.querySelector('.inc_pdp_bundle_cart_summary_add_btn_bk.inc_loading').classList.remove('inc_loading')
                    }
                    if (document.querySelector('.inc_recommended_tabs_list_item_block') == null) {
                        // window.location.href = INC_COL.clientConfig.checkoutLink; 
                        jQuery("html, body").animate({
                            scrollTop: 0
                        }, "slow");
                    }

                    if (document.querySelector('.inc_recommended_tabs_list_item_block') != null) {
                        document.querySelector('html').classList.add('inc_overlay');
                        if (_255.errorMessage != undefined && _255.errorMessage != "") {
                        } else {
                            INC.methods.showSidebar();
                            INC.methods.updateSidebarColBlock(INC_COL.dataStore);
                        }
                        if (document.querySelector('.sidebar_outer.sidebar_outer_active') == null) {
                            document.querySelector('html').classList.remove('inc_overlay')
                        }
                    }
                }

                if (url5 != undefined) {
                    callprodF()
                }
                callbacksuccessinc(_255, _256)
                if (document.querySelector('.inc_product_desc_add_bk.Inc_checked') != null) {
                    var imgscrc = document.querySelector('.inc_product_desc_add_bk.Inc_checked').parentNode.parentNode.parentNode.querySelector('.inc_product_img_main_img img').src
                    if (imgscrc != undefined) {
                        if (document.querySelector('.dth-add-to-basket.-js-add-to-basket .dth-add-to-basket__image') != null) {
                            document.querySelector('.dth-add-to-basket.-js-add-to-basket .dth-add-to-basket__image').src = imgscrc
                        }
                    }
                }
            },
            error: function(_25c, _25d) {
                var _25e = dojo.i18n.getLocalization("wc", "common");
                dojo.publish("ajaxRequestCompleted");
                if (url5 == undefined) {
                    INC_COL.config.disablebtn = true
                    getTrackingPixel()
                    if (btn_cart != undefined) {
                        btn_cart.parentNode.parentNode.classList.remove('inc_loading')
                    }
                    if (document.querySelector('.inc_pdp_bundle_cart_summary_add_btn_bk.inc_loading') != null) {
                        document.querySelector('.inc_pdp_bundle_cart_summary_add_btn_bk.inc_loading').classList.remove('inc_loading')
                    }
                    if (document.querySelector('.inc_recommended_tabs_list_item_block') == null) {
                        // window.location.href = INC_COL.clientConfig.checkoutLink; 
                        jQuery("html, body").animate({
                            scrollTop: 0
                        }, "slow");
                    }

                    if (document.querySelector('.inc_recommended_tabs_list_item_block') != null) {
                        document.querySelector('html').classList.add('inc_overlay');
                        INC.methods.showSidebar();
                        INC.methods.updateSidebarColBlock(INC_COL.dataStore);
                        if (document.querySelector('.sidebar_outer.sidebar_outer_active') == null) {
                            document.querySelector('html').classList.remove('inc_overlay')
                        }
                    }
                    if (document.querySelector('.inc_product_desc_add_bk.Inc_checked') != null) {
                        var imgscrc = document.querySelector('.inc_product_desc_add_bk.Inc_checked').parentNode.parentNode.parentNode.querySelector('.inc_product_img_main_img img').src
                        if (imgscrc != undefined) {
                            if (document.querySelector('.dth-add-to-basket.-js-add-to-basket .dth-add-to-basket__image') != null) {
                                document.querySelector('.dth-add-to-basket.-js-add-to-basket .dth-add-to-basket__image').src = imgscrc
                            }
                        }
                    }
                }

                if (url5 != undefined) {
                    callprodF()
                }
            }
        });
    }
    function callprodF() {
        dojo.xhrPost({
            url: url5,
            handleAs: "json-comment-filtered",
            form: null,
            content: formData[5],
            service: wc.service.services.AddOrderItem,
            load: function(_255, _256) {
                if (_255.errorMessage != undefined && _255.errorMessage != "") {
                    oosproduct(p5, formData[5].quantity)
                    INC_COL.clientConfig.OOS.push(p5)
                    INC_COL.clientConfig.OOS_MESG.push(_255.errorMessage)
                }
                if (document.querySelector('.dth-add-to-basket.-js-add-to-basket.active') != null) {
                    document.querySelector('.dth-add-to-basket.-js-add-to-basket.active').style.opacity = ""
                }
                INC_COL.config.disablebtn = true
                getTrackingPixel()
                if (btn_cart != undefined) {
                    btn_cart.parentNode.parentNode.classList.remove('inc_loading')
                }
                if (document.querySelector('.inc_pdp_bundle_cart_summary_add_btn_bk.inc_loading') != null) {
                    document.querySelector('.inc_pdp_bundle_cart_summary_add_btn_bk.inc_loading').classList.remove('inc_loading')
                }
                if (document.querySelector('.inc_recommended_tabs_list_item_block') == null) {
                    // window.location.href = INC_COL.clientConfig.checkoutLink;    
                    jQuery("html, body").animate({
                        scrollTop: 0
                    }, "slow");
                }

                if (document.querySelector('.inc_recommended_tabs_list_item_block') != null) {
                    document.querySelector('html').classList.add('inc_overlay');

                    if (_255.errorMessage != undefined && _255.errorMessage != "") {
                    } else {
                        INC.methods.showSidebar();
                        INC.methods.updateSidebarColBlock(INC_COL.dataStore);
                    }
                    if (document.querySelector('.sidebar_outer.sidebar_outer_active') == null) {
                        document.querySelector('html').classList.remove('inc_overlay')
                    }
                }
                callbacksuccessinc(_255, _256)
                if (document.querySelector('.inc_product_desc_add_bk.Inc_checked') != null) {
                    var imgscrc = document.querySelector('.inc_product_desc_add_bk.Inc_checked').parentNode.parentNode.parentNode.querySelector('.inc_product_img_main_img img').src
                    if (imgscrc != undefined) {
                        if (document.querySelector('.dth-add-to-basket.-js-add-to-basket .dth-add-to-basket__image') != null) {
                            document.querySelector('.dth-add-to-basket.-js-add-to-basket .dth-add-to-basket__image').src = imgscrc
                        }
                    }
                }
            },
            error: function(_25c, _25d) {
                var _25e = dojo.i18n.getLocalization("wc", "common");
                dojo.publish("ajaxRequestCompleted");
                INC_COL.config.disablebtn = true
                getTrackingPixel()
                if (btn_cart != undefined) {
                    btn_cart.parentNode.parentNode.classList.remove('inc_loading')
                }
                if (document.querySelector('.inc_pdp_bundle_cart_summary_add_btn_bk.inc_loading') != null) {
                    document.querySelector('.inc_pdp_bundle_cart_summary_add_btn_bk.inc_loading').classList.remove('inc_loading')
                }
                if (document.querySelector('.inc_recommended_tabs_list_item_block') == null) {
                    // window.location.href = INC_COL.clientConfig.checkoutLink;
                    jQuery("html, body").animate({
                        scrollTop: 0
                    }, "slow");
                }

                if (document.querySelector('.inc_recommended_tabs_list_item_block') != null) {
                    document.querySelector('html').classList.add('inc_overlay');
                    INC.methods.showSidebar();
                    INC.methods.updateSidebarColBlock(INC_COL.dataStore);
                    if (document.querySelector('.sidebar_outer.sidebar_outer_active') == null) {
                        document.querySelector('html').classList.remove('inc_overlay')
                    }
                }
                if (document.querySelector('.inc_product_desc_add_bk.Inc_checked') != null) {
                    var imgscrc = document.querySelector('.inc_product_desc_add_bk.Inc_checked').parentNode.parentNode.parentNode.querySelector('.inc_product_img_main_img img').src
                    if (imgscrc != undefined) {
                        if (document.querySelector('.dth-add-to-basket.-js-add-to-basket .dth-add-to-basket__image') != null) {
                            document.querySelector('.dth-add-to-basket.-js-add-to-basket .dth-add-to-basket__image').src = imgscrc
                        }
                    }
                }
            }
        });
    }
}
function callbacksuccessinc(_255, _256) {
    var _257 = _256.args.service;
    _255.serviceId = _257.id;
    _255.actionId = _257.actionId;
    for (var prop in _255) {}
    if (_257.successTest(_255)) {
        _257.successHandler(_255);
        dojo.publish("modelChanged", [_255]);
        if (_257.actionId) {
            dojo.publish("modelChanged/" + _257.actionId, [_255]);
        }
    } else {
        var _258 = _24e("storeId", this.url);
        var _259 = _24e("catalogId", this.url);
        var _25a = _24e("langId", this.url);
        if (_255.errorCode == "2500") {
            var _25b = _255.originatingCommand;
            _25b = _25b.replace("?", "%3F");
            _25b = _25b.replace(/&amp;/g, "%26");
            _25b = _25b.replace(/&/g, "%26");
            _25b = _25b.replace(/=/g, "%3D");
            _25b = "LogonForm?nextUrl=" + _25b + "&storeId=" + _258 + "&catalogId=" + _259 + "&langId=" + _25a + "&myAcctMain=1";
            document.location.href = _25b;
        } else {
            if (_255.errorCode == "2550") {
                var _25b = _255.originatingCommand;
                _25b = _25b.replace("?", "%3F");
                _25b = _25b.replace(/&amp;/g, "%26");
                _25b = _25b.replace(/&/g, "%26");
                _25b = _25b.replace(/=/g, "%3D");
                _25b = "AjaxLogonForm?nextUrl=" + _25b + "&storeId=" + _258 + "&catalogId=" + _259 + "&langId=" + _25a + "&myAcctMain=1";
                document.location.href = _25b;
            } else {
                if (_255.errorCode == "2530") {
                    var _25b = _255.originatingCommand;
                    _25b = _25b.replace("?", "%3F");
                    _25b = _25b.replace(/&amp;/g, "%26");
                    _25b = _25b.replace(/&/g, "%26");
                    _25b = _25b.replace(/=/g, "%3D");
                    _25b = "PasswordReEnterErrorView?nextUrl=" + _25b + "&storeId=" + _258 + "&catalogId=" + _259 + "&langId=" + _25a;
                    document.location.href = _25b;
                } else {
                    if (_255.errorCode == "2510") {
                        document.location.href = "Logoff?URL=ReLogonFormView&storeId=" + _258;
                    } else {
                        if (_255.errorCode == "2520") {
                            document.location.href = "ProhibitedCharacterErrorView?storeId=" + _258 + "&catalogId=" + _259 + "&langId=" + _25a;
                        } else {
                            if (_255.errorCode == "2540") {
                                document.location.href = "CrossSiteRequestForgeryErrorView?storeId=" + _258 + "&catalogId=" + _259 + "&langId=" + _25a;
                            } else {
                                if (_255.errorCode == "CMN1039E") {
                                    document.location.href = "CookieErrorView?storeId=" + _258 + "&catalogId=" + _259 + "&langId=" + _25a;
                                } else {
                                    _257.failureHandler(_255);
                                }
                            }
                        }
                    }
                }
            }
        }
    }
    dojo.publish("ajaxRequestCompleted");
}
function add_to_cart_tracking_multiple_col(source) {
    var eevent_type = "collection_add_to_cart";
    var productIdsforTracking = []

    pageType = "102";

    for (var k = 0; k < INC_COL.config.bundle_tracking.length; k++) {
        if (INC_COL.config.bundle_tracking[k].id != null) {
            productIdsforTracking.push(INC_COL.config.bundle_tracking[k].id)
        }
    }
    var sh_type = "1"
    if (window.location.href.indexOf('incgs=1') >= 0) {
        sh_type = "1"
    } else if (window.location.href.indexOf('incgs=1') >= 0) {
        sh_type = "2"
    } else if (window.location.href.indexOf('incgs=3') >= 0) {
        sh_type = "3"
    }
    if (INC_COL.config.pageType == "plpcollection") {
        sh_type = "2"
    }
    var all_data = [{
        "id": INC_COL.config.bundle_tracking[0].combo_id,
        "product_ids": productIdsforTracking,
        "incgs": sh_type
    }];
    data = {
        "eventData": btoa((JSON.stringify({
            "event_data": {
                "combo_data": all_data
            },
            "page_type": pageType.toString(),
            "event_type": eevent_type,
            "method": "track",
            "platform": "",
            "token": INC_COL.config.clientToken
        }))),
        "vid": INC_COL.config.ivid,
        "time": getCurrentFormattedTimecol(),
        "uri": document.location.href
    };
    makeTrackingApiCall(JSON.stringify(data));
}
function loadsidebarajaxcol(btn_cart) {
    INC_COL.config.disablebtn = true
    if (btn_cart != undefined) {
        btn_cart.parentNode.parentNode.classList.remove('inc_loading')
    }
    if (document.querySelector('.inc_bd_cart_smry_add_btn_bk.inc_loading') != null) {
        document.querySelector('.inc_bd_cart_smry_add_btn_bk.inc_loading').classList.remove('inc_loading')
    }
    if (document.querySelector('.inc_col_recommended_tabs_list_item_bk') == null) {
        jQuery("html, body").animate({
            scrollTop: 0
        }, "slow");
    }
    if (window.innerWidth > 767 || document.querySelector('.device-mobile') == null) {
        var checkcartpopup = setInterval(function() {
            if (document.querySelector('body.active-gnav') != null && document.querySelector('.header-gnav-cart__overlay') != null && document.querySelector('.js-header-gnav-cart__overlay.visible') != null) {
                clearInterval(checkcartpopup)
                setTimeout(function() {
                    INC_COL.methods.createSidebarBlock();
                    checkAddedProductInJustAddedcol()
                    INC_COL.methods.showSidebar();
                    document.querySelector('html').classList.remove('inc_overlay')
                }, 700)
            }
        }, 200)
    } else {
        if (document.querySelector('.sidebar_outer.sidebar_outer_active') == null && document.querySelector('.device-mobile') != null) {
            checkAddedProductInJustAddedcol()
            INC_COL.methods.showSidebar();
            INC_COL.methods.updateSidebarBlock()
        }
    }
}
function checkAddedProductInJustAddedcol() {
    var addCheckCategory = INC_COL.config.pdpaddedProductList;
    var productListArrayprod = INC.dataStore.bundleProductsArray;
    var categoryList = INC.dataStore.methods().getUniqueCatergories();
    for (ct = 0; ct < categoryList.length; ct++) {
        var count = 0;
        for (var ij = 0; ij < productListArrayprod.length; ij++) {
            var firstProductObjByMainId = INC.dataStore.methods().getFirstProductObjByMainId({
                mainId: productListArrayprod[ij]
            });
            if (firstProductObjByMainId["categoryName"] == categoryList[ct]) {
                if (addCheckCategory.indexOf(productListArrayprod[ij]) == -1) {
                    count++
                }
            }
        }
        if (count == 0) {
            if (document.querySelector('.inc_recommended_tabs_list_item_block[title="' + categoryList[ct] + '"]') != null) {
                var categrem = document.querySelector('.inc_recommended_tabs_list_item_block[title="' + categoryList[ct] + '"]')
                if (categrem != null) {
                    categrem.parentNode.removeChild(categrem)
                }
            }
        }
    }
    var varient_selected_flag = true
    INC.clientConfig.offset = 0;
    INC.clientConfig.slidevalue = 0;
    if (document.querySelector('.inc_recommended_tabs_list_item_block') != null) {
        INC_COL.clientConfig.cateClick = true;
        document.querySelector('.inc_recommended_tabs_list_item_block').click()
        INC_COL.clientConfig.cateClick = false;
        if (document.querySelector('.inc_recommended_products_list_block .inc_product_module_block') == null) {
            var remcateg = document.querySelector('.inc_recommended_tabs_list_item_block.inc_active')
            if (remcateg != null) {
                remcateg.parentNode.removeChild(remcateg)
            }
        }
    }
}

function makeTrackingApiCall(eventdata) {
    p_url = '//optimizedby.increasingly.co/ImportData';
    var xhr = new XMLHttpRequest();
    xhr.onreadystatechange = function() {
        if (xhr.readyState == XMLHttpRequest.DONE) {
            if (xhr.status == 200) {
                if (xhr.responseText != "" && xhr.responseText != null) {} else {}
            }
        }
    }
    ;
    xhr.open("POST", p_url, true);
    xhr.setRequestHeader('Content-Type', 'application/json');
    xhr.send(eventdata);
}
function getCurrentFormattedTimecol() {
    var d = new Date();
    var currentTime = (d.getFullYear() + "-" + (d.getMonth() + 1) + "-" + d.getDate() + " " + d.getHours() + ":" + d.getMinutes() + ":" + d.getSeconds() + "." + d.getMilliseconds());
    return currentTime;
}
INC_COL.methods.trackingEventscol = function(eventType, eventDataObj, pageType) {

    pageType = "102";
    var importEventDataObj = {};
    var importDataObj = {};

    importEventDataObj["event_data"] = eventDataObj;
    var rt_type = "5"
    if (window.location.href.indexOf('incgs=1') >= 0) {
        rt_type = "4"
    } else if (window.location.href.indexOf('incgs=1') >= 0) {
        rt_type = "5"
    } else if (window.location.href.indexOf('incgs=3') >= 0) {
        rt_type = "6"
    }
    switch (eventType) {
    case "productPageVisit":
        importEventDataObj["event_type"] = "product_page_visit";
        importEventDataObj["method"] = "track";
        break;
    case "catalogProductView":
        importEventDataObj["event_type"] = "catalog_product_view";
        importEventDataObj["page_type"] = "catalog_product_view";
        importEventDataObj["method"] = "track";
        break;
    case "bundleProductClickTracking":
        importEventDataObj["event_type"] = "bundle_product_click_tracking";
        importEventDataObj["page_type"] = pageType;
        importEventDataObj["rt"] = rt_type;
        importEventDataObj["is_logged"] = "0";
        importEventDataObj["method"] = "track";
        INC_COL.methods.sendAffiliateRequest();
        break;
    case "bundleAddToCart":
        importEventDataObj["event_type"] = "bundle_add_to_cart";
        importEventDataObj["page_type"] = pageType;
        importEventDataObj["is_logged"] = (INC_COL.clientConfig.statusLoggedIn == true) ? "1" : "0";
        importEventDataObj["method"] = "track";
        INC_COL.methods.sendAffiliateRequest();
        break;
    }

    importEventDataObj["platform"] = "";
    importEventDataObj["token"] = INC_COL.config.clientToken;
    importEventDataObj["collection"] = '1';
    importDataObj["eventData"] = btoa(JSON.stringify(importEventDataObj));
    importDataObj["uri"] = window.location.href;
    importDataObj["vid"] = INC_COL.config.ivid;
    INC_COL.methods.sendTrackingEventscol(importDataObj);
}

INC_COL.methods.sendTrackingEventscol = function(importDataObj) {

    var xhr = new XMLHttpRequest();
    var method = "POST";
    var url = INC_COL.config.trackingURL;
    xhr.onreadystatechange = handleStateChange;

    xhr.open(method, url, true);
    xhr.setRequestHeader('Content-Type', 'application/json');
    function handleStateChange() {
        if (xhr.readyState === 4 && xhr.status === 200) {// logger(xhr.responseText);
        }
    }

    xhr.send(JSON.stringify(importDataObj));
}

INC_COL.methods.sendAffiliateRequest = function() {
    var url = INC_COL.config.affiliateURL;
    var oImg = document.createElement("img");
    oImg.setAttribute('id', 'cstracking')
    oImg.setAttribute('src', url);
    oImg.setAttribute('height', '1px');
    oImg.setAttribute('width', '1px');
    oImg.setAttribute('style', 'display:none')
    document.body.appendChild(oImg);
}

INC_COL.methods.addVisitorID = function() {
    function generateUniqueINCVisitorId(len, bits) {
        var bits = bits || 36;
        var outStr = "";
        var newStr;
        while (outStr.length < len) {
            newStr = Math.random().toString(bits).slice(2);
            outStr += newStr.slice(0, Math.min(newStr.length, (len - outStr.length)));
        }
        return outStr;
    }
    var ivid = "";
    if (readCookie('ivid') != undefined) {
        ivid = readCookie('ivid')
    }
    if (ivid.length == 0) {
        ivid = generateUniqueINCVisitorId(42, 16);
        var d = new Date();
        var clientdomain = window.location.host;
        arr = clientdomain.split(".");
        arr.shift();
        clientdomain = arr.join(".");
        d.setTime(d.getTime() + (365 * 24 * 60 * 60 * 1000));
        var expires = "expires=" + d.toUTCString();
        document.cookie = 'ivid=' + ivid + '; expires=' + expires + '; domain=' + clientdomain + '; path=/' + '; secure;'
    } else {
        ivid = ivid;
        var clientdomain = window.location.host;
        arr = clientdomain.split(".");
        arr.shift();
        clientdomain = arr.join(".");
        var d = new Date();
        d.setTime(d.getTime() + (365 * 24 * 60 * 60 * 1000));
        var expires = "expires=" + d.toUTCString();
        document.cookie = 'ivid=' + ivid + '; expires=' + expires + '; domain=' + clientdomain + '; path=/' + '; secure;'
    }
    console.log("ivid: " + ivid);
    INC_COL.config.ivid = ivid;
    return ivid;
}

document.onclick = clickListenercol;

function clickListenercol(e) {
    var clickedElement = e.target;
    if (clickedElement != null) {
        tags = document.getElementsByTagName(clickedElement.tagName);
        try {
            if (clickedElement.className == "inc_prd_modal_bk inc_active") {
                document.querySelector('body').classList.remove('inc_popup_open');
                if (document.querySelector('.inc_col_sidebar_modal_bk.inc_active') == null) {
                    document.querySelector('html').classList.remove('inc_overlay');
                    document.querySelector('html').classList.remove('inc_popup_open');
                }
                if (clickedElement.querySelector('.inc_prd_hdr_title_bk') != null) {
                    clickedElement.querySelector('.inc_prd_hdr_title_bk').classList.add('inc_active');
                }
                if (clickedElement.querySelector('.inc_product_hdr_title_bk_1') != null) {
                    clickedElement.querySelector('.inc_product_hdr_title_bk_1').classList.remove('inc_active');
                }

                clickedElement.classList.remove('inc_active')
            }
            if (clickedElement.classList.contains('quick_view_open') == true) {
                if (document.querySelector('.inc_col_details_mobile_quick_view.quick_view_active') != null) {
                    document.querySelector('.inc_col_details_mobile_quick_view.quick_view_active .prod_quick_view_close').click()
                }
            }
            if (clickedElement.className == "inc_col_empty_popup") {
                if (document.querySelector('.inc_prd_modal_bk.inc_active') == null && document.querySelector('.inc_col_sidebar_modal_bk.inc_active') == null) {
                    document.querySelector('html').classList.remove('inc_overlay')
                    document.querySelector('html').classList.remove('inc_popup_open');
                    if (document.querySelector('body.active-gnav, body.product-shades-sidebar-active') == null) {// document.querySelector('body').setAttribute('style', 'overflow:auto')
                    }
                }
                if (clickedElement.parentNode.querySelector('.inc_prd_desc_att_bk').classList.contains('inc_active')) {
                    clickedElement.parentNode.querySelector('.inc_prd_desc_att_bk').classList.remove('inc_active')
                }
                productBlock.classList.remove('show_overlay')
            }
            if (document.querySelector('.inc_prd_modal_bk.inc_active') != null) {
                if (clickedElement.parentNode.classList == "inc_prd_desc_att_color_list_item_img" || clickedElement.classList == "inc_prd_desc_att_color_list_item_img" || clickedElement.parentNode.classList == "inc_prd_desc_att_zero_list_bk" || clickedElement.classList == "inc_prd_desc_att_zero_list_bk") {
                    document.querySelector('.inc_prd_desc_att_bk .show_dropdown').classList.remove('show_dropdown')
                }
            }
            if (clickedElement != null) {
                if (clickedElement.classList == "inc_prd_desc_add_img" && document.querySelector('.inc_prd_modal_bk .inc_prd_desc_att_bk .show_dropdown') != null) {
                    if (window.innerWidth > 1300) {
                        document.querySelector('.inc_prd_modal_bk .inc_prd_desc_att_bk .show_dropdown').classList.remove('show_dropdown');
                    }
                }
                if (clickedElement.className == "inc_prd_hdr_img") {
                    document.querySelector('.inc_prd_hdr_title_bk').classList.add('inc_active');
                    document.querySelector('.inc_product_hdr_title_bk_1').classList.remove('inc_active');
                    document.querySelector('body').classList.remove('inc_popup_open');
                }
                if (clickedElement.className == "sidebar_outer sidebar_outer_active" || clickedElement.classList.contains('js-gnav-header-formatter__bg-full-width') == true || clickedElement.classList.contains('gnav-header-formatter__close-icon') == true || clickedElement.classList.contains('js-header-gnav-cart__close') == true) {
                    if (document.querySelector('.inc_col_hdr_continue_img') != null) {
                        document.querySelector('.inc_col_hdr_continue_img').click()
                    }
                }
                if (clickedElement.className == "inc_bd_cart_overlay_bk active") {
                    document.querySelector('.inc_bd_cart_title_img_bk').click()
                }
                //document.querySelector('.prod_quick_view_close').click()
                if (clickedElement.className == "inc_col_promo_popup inc_active") {
                    document.querySelector('html').classList.remove('inc_overlay_promo');
                    clickedElement.classList.remove('inc_active')
                    if (document.querySelector('.inc_col_sidebar_modal_bk.inc_active') != null) {
                        document.querySelector('.inc_col_sidebar_modal_bk.inc_active').classList.remove('overflow_visible')
                    }
                }
                if (clickedElement.parentNode != null) {
                    if (clickedElement.className != "inc_prd_desc_att_color_title_txt_bk" && clickedElement.className != "inc_prd_desc_att_color_title_txt_selected" && clickedElement.parentNode.className != "inc_prd_desc_att_color_title_txt_bk" && clickedElement.className != "inc_prd_desc_att_zero_title_txt" && clickedElement.className != "inc_prd_desc_att_zero_title_txt_bk" && clickedElement.className != "inc_prd_desc_add_bk" && clickedElement.className != "inc_prd_desc_add_text" && clickedElement.className != "img_color_swatch" && clickedElement.className != "inc_prd_desc_att_zero_title_txt_selected" && clickedElement.classList.contains('inc_prd_desc_att_color_list_item_img') != true && clickedElement.classList.contains('inc_prd_desc_att_zero_title_txt_selected') != true) {
                        if (document.querySelector('.inc_prd_desc_att_bk .show_dropdown') != null) {
                            document.querySelector('.inc_prd_desc_att_bk .show_dropdown').classList.remove('show_dropdown')
                        }
                    }

                    if (clickedElement.className == "inc_prd_desc_color_list_mobile_overlay_bk" || clickedElement.className == "inc_prd_desc_color_list_hdr_img" || clickedElement.className == "inc_prd_desc_colour_list_add_btn" || clickedElement.className == "inc_prd_desc_att_zero_list_mobile_overlay_bk" || clickedElement.className == "inc_prd_desc_att_zero_list_hdr_img" || clickedElement.className == "inc_prd_desc_att_zero_list_add_btn") {
                        if (window.innerWidth < 821) {
                            document.querySelector('.inc_prd_desc_att_bk .show_dropdown').classList.remove('show_dropdown')
                            document.querySelector('html').classList.remove('inc_overlay');
                            document.querySelector('body').classList.remove('inc_popup_open');
                        }

                    }
                }
                if (document.querySelector('.sidebar_outer.sidebar_outer_active .inc_prd_modal_bk.inc_active') == null) {
                    if (document.querySelector('.inc_col_sidebar_modal_bk.inc_active') != null) {
                        if (document.querySelector('.inc_colcart_added_product_bk.remove_product_conf_modal') == null) {
                            if (document.querySelector('.inc_col_promo_popup.inc_active') == null) {
                                document.querySelector('.inc_col_sidebar_modal_bk.inc_active').classList.remove('overflow_visible')
                            }
                        }
                    }
                } else if (document.querySelector('.sidebar_outer.sidebar_outer_active .inc_col_sidebar_modal_bk .inc_prd_modal_bk.inc_active') != null) {
                    document.querySelector('.sidebar_outer.sidebar_outer_active .inc_col_sidebar_modal_bk').classList.add('overflow_visible')
                    document.querySelector('body').classList.add('inc_popup_open');
                }
                if (clickedElement.className != "inc_prd_details_prod_bk" && clickedElement.className != "inc_prd_variant_simple_bk" && clickedElement.className != "inc_prd_variant_simple_text config" && clickedElement.className != "inc_prd_desc_variant_popup_close_bk" && clickedElement.className != "inc_prd_desc_add_title_txt_bk" && clickedElement.tagName != "SELECT" && clickedElement.className != "inc_col_hdr_bk active" && clickedElement.className != "inc_prd_desc_att_color_list_item_img_bk active" && clickedElement.className != "inc_prd_desc_att_bk attributes_avail active" && clickedElement.className != "inc_prd_desc_qty_bk active" && clickedElement.tagName != "LABEL" && clickedElement.tagName != "INPUT" && clickedElement.className != "inc_prd_desc_qty_bk" && clickedElement.className != "inc_prd_desc_att_color_list_item_img_bk" && clickedElement.className != "inc_col_hdr_bk" && clickedElement.className != "select_option_inc_col_title" && clickedElement.className != "inc_prd_desc_att_color_list_item_img" && clickedElement.className != "inc_prd_desc_att_color_title_txt" && clickedElement.className != "inc_prd_desc_att_color_list_bk" && clickedElement.classList.contains('inc_prd_desc_att_bk') == false && clickedElement.className != "select_option_bk" && clickedElement.className != "inc_prd_desc_att_color_title_txt_bk" && clickedElement.className != "inc_prd_desc_att_variant_text" && clickedElement.className != "inc_prd_desc_add_img" && clickedElement.className != "inc_prd_desc_qty_up_btn" && clickedElement.className != "inc_prd_desc_qty_down_btn") {
                    if (clickedElement.classList != undefined) {
                        if (clickedElement.classList.contains('variantoption') == false && clickedElement.classList.contains('inc_prd_desc_att_size_list_item_img_bk') == false && clickedElement.classList.contains('inc_prd_desc_att_color_list_bk') == false && clickedElement.className != "inc_prd_desc_add_img checked" && clickedElement.classList.contains('inc_prd_desc_add_bk') == false && clickedElement.classList.contains('inc_bd_cart_added_product_edit_img') == false && clickedElement.className != "inc_prd_desc_att_color_title_bk" && clickedElement.className != "inc_prd_desc_qty_up_btn" && clickedElement.className != "inc_prd_desc_qty_down_btn" && clickedElement.classList.contains('inc_prd_desc_att_color_bk') == false && clickedElement.classList.contains('inc_prd_desc_att_color_list_item_bk') == false && clickedElement.classList.contains('inc_prd_desc_att_zero_title_txt_selected') == false && clickedElement.classList.contains('inc_prd_desc_att_zero_title_txt') == false && clickedElement.classList.contains('inc_prd_desc_att_size_list_item_img') == false && clickedElement.classList.contains('inc_prd_desc_att_color_list_item_img') != true) {
                            var allact = document.querySelectorAll('.inc_prd_desc_att_bk.inc_active')

                            if (document.querySelector('.inc_prd_modal_bk.inc_active') == null && document.querySelector('.inc_col_sidebar_modal_bk.inc_active') == null) {
                                document.querySelector('html').classList.remove('inc_overlay');
                                document.querySelector('body').classList.remove('inc_popup_open');
                            } else if (document.querySelector('.iinc_prd_modal_bk.inc_active') == null) {// document.querySelector('html').classList.add('inc_overlay');
                            }
                            for (q = 0; q < allact.length; q++) {
                                allact[q].classList.remove('inc_active')
                            }

                            if (document.querySelector('.inc_prd_bk.show_overlay') != null) {
                                document.querySelector('.inc_prd_bk.show_overlay').classList.remove('show_overlay')
                            }
                        }
                    }
                }
                if (INC_COL.config.pageType == "pdpcollection") {
                    if (clickedElement.classList.contains('js-add-to-bag-button') == true && clickedElement.getAttribute('data-test-id') == "add_to_bag_btn" || clickedElement.classList.contains('js-btn-add-to-bag') == true && clickedElement.getAttribute('data-test-id') == "add-to-cart") {
                        if (window.innerWidth > 767) {
                            var checkpdpcartopen = setInterval(function() {
                                if (document.querySelector('body.active-gnav') != null && document.querySelector('.header-gnav-cart__overlay') != null && document.querySelector('.js-header-gnav-cart__overlay.visible') != null) {
                                    clearInterval(checkpdpcartopen)
                                    if (INC_COL.dataStore.bundleProductsArray != undefined) {
                                        pdp_listeners()
                                    }
                                }
                            }, 100)
                        } else {
                            var findObj = new INC_COL.classes.FindObj();
                            var p_ids = INC_COL.methods.getProductIdFromWebPage()
                            findObj["id"] = INC_COL.dataStore.methods().getFirstProductObjByMainId({
                                mainId: p_ids
                            }).id;
                            var qty = document.querySelector('p[data-test-id="cart_product_quantity"]').innerText.trim()
                            var orgprice = 0
                            var activeprice = 0
                            if (document.querySelector('.elc-product-prices-wrapper .js-product-original-price') != null) {
                                orgprice = document.querySelector('.elc-product-prices-wrapper .js-product-original-price').innerText.replace('£', '')
                            }
                            if (document.querySelector('.elc-product-prices-wrapper .js-product-price') != null) {
                                activeprice = document.querySelector('.elc-product-prices-wrapper .js-product-price').innerText.replace('£', '')
                            }
                            INC_COL.methods.addProductToSidebarCart(findObj, qty, null, "client_add_btn", null, activeprice, orgprice);
                            INC_COL.methods.showSidebar("clientBtn");
                        }
                    }
                    if (clickedElement.parentNode != null) {
                        if (clickedElement.classList.contains('js-shade-picker-item-name') == true || clickedElement.classList.contains('js-shade-swatch--image-wrapper') == true || clickedElement.classList.contains('elc-shade-picker-item--selected') == true || clickedElement.classList.contains('js-dropdown-option') == true || clickedElement.parentNode.parentNode.classList.contains('sells-with-grid') == true || clickedElement.parentNode.classList.contains('sells-with-grid') == true || clickedElement.classList.contains('sells-with-grid') == true) {
                            var textsel = clickedElement.textContent.trim()
                            if (textsel == "") {
                                textsel = clickedElement.parentNode.textContent.trim()
                            }
                            var imgscrsel = ""
                            if (clickedElement.tagName == "IMG") {
                                imgscrsel = clickedElement.src
                                imgscrsel = imgscrsel
                            } else if (clickedElement.querySelector('img') != null) {
                                imgscrsel = clickedElement.querySelector('img').src
                                imgscrsel = imgscrsel
                            }
                            var all_list_el = document.querySelectorAll('.inc_product-main_bk .inc_prd_showcase_bk')
                            if (textsel != undefined) {
                                textsel = textsel.trim().toLocaleLowerCase()
                            }
                            for (q1 = 0; q1 < all_list_el.length; q1++) {
                                if (all_list_el[q1].querySelector('.inc_prd_desc_att_zero_bk.inc_active') != null) {
                                    var prd_moduleb = all_list_el[q1].parentNode
                                    if (imgscrsel == "") {
                                        if (all_list_el[q1].querySelector('.inc_prd_desc_att_size_list_item_img_bk[datasize="' + textsel + '"] div') != undefined) {
                                            all_list_el[q1].querySelector('.inc_prd_desc_att_size_list_item_img_bk[datasize="' + textsel + '"] div').click()
                                        } else if (all_list_el[q1].querySelector('.inc_prd_desc_att_color_bk.inc_active') != null) {
                                            var prd_moduleb = all_list_el[q1].parentNode
                                            if (all_list_el[q1].querySelector('.inc_prd_desc_att_color_list_item_img_bk[datacolor="' + textsel + '"] div') != undefined) {
                                                all_list_el[q1].querySelector('.inc_prd_desc_att_color_list_item_img_bk[datacolor="' + textsel + '"]').click()
                                            }
                                        }
                                    } else {
                                        if (all_list_el[q1].querySelector('.inc_prd_desc_att_size_list_item_img_bk[data-optionimge="' + imgscrsel + '"]') != undefined) {
                                            all_list_el[q1].querySelector('.inc_prd_desc_att_size_list_item_img_bk[data-optionimge="' + imgscrsel + '"]').click()
                                        }
                                    }
                                } else if (all_list_el[q1].querySelector('.inc_prd_desc_att_color_bk.inc_active') != null) {
                                    var prd_moduleb = all_list_el[q1].parentNode
                                    if (all_list_el[q1].querySelector('.inc_prd_desc_att_color_list_item_img_bk[datacolor="' + textsel + '"] div') != undefined) {
                                        all_list_el[q1].querySelector('.inc_prd_desc_att_color_list_item_img_bk[datacolor="' + textsel + '"]').click()
                                    }
                                }
                            }
                            if (document.querySelector('.js-right-column-section .elc-service-view-renderer[data-rendered-view="product-notify-me"] .elc-product-notify-me-button') == null) {
                                if (document.querySelector('.inc_bk') != null) {
                                    document.querySelector('.inc_bk').style.display = "block"
                                }
                            } else {
                                if (document.querySelector('.inc_bk') != null) {
                                    document.querySelector('.inc_bk').style.display = "none"
                                }
                            }
                        }
                    }
                    if (clickedElement.classList.contains('svgicon--bag') == true || clickedElement.classList.contains('header-gnav-cart__icon') == true || clickedElement.classList.contains('header-gnav-cart__trigger') == true || clickedElement.classList.contains('header-gnav-cart__count') == true) {
                        var checkcartpopup = setInterval(function() {
                            if (document.querySelector('body.active-gnav') != null && document.querySelector('.header-gnav-cart__overlay') != null && document.querySelector('.js-header-gnav-cart__overlay.visible') != null) {
                                clearInterval(checkcartpopup)
                                setTimeout(function() {
                                    INC_COL.methods.createSidebarBlock();
                                    checkAddedProductInJustAddedcol()
                                    INC_COL.methods.showSidebar();
                                    document.querySelector('html').classList.remove('inc_overlay')
                                }, 700)
                            }
                        }, 200)
                    }
                }
                if (clickedElement.classList.contains('remove_link') == true && INC_COL.config.pageType == "cartPage") {
                    setTimeout(function() {
                        if (document.querySelector('.cart-item.product') != null) {
                            INC_COL.clientConfig.offset = 0;
                            INC_COL.clientConfig.slidevalue = 0;
                            INC_COL.init();
                        }
                    }, 2000)
                }
                if (clickedElement.id == "basket_confirmation_button_yes") {
                    setTimeout(function() {
                        INC.init();
                    }, 3000)
                }
                //basket-product__remove-item -js-modal
                //dth-mini-basket__items__qty-remove
                if (clickedElement.classList.contains("remove-keep__btn") == true || clickedElement.classList.contains("dth-mini-basket__items__qty-remove") == true) {
                    INC.clientConfig.slidevalue = 0;
                    INC.clientConfig.offset = 0;
                    var menu_list = document.querySelector('.inc_af_product-list_bk');
                    if (menu_list != null) {
                        menu_list.setAttribute('style', 'margin-left:0');
                    }
                    if (clickedElement.id == "removeItemBtn_" || clickedElement.classList.contains("dth-mini-basket__items__qty-remove") == true) {
                        setTimeout(function() {
                            //event: "removeFromCart"
                            var idlayer = 0
                            for (q = 0; q < dataLayer.length; q++) {
                                if (dataLayer[q].event == "removeFromCart") {
                                    var idlayer = q
                                    if (dataLayer[q + 1] != undefined) {
                                        if (dataLayer[q + 1].event == "removeFromCart") {
                                            idlayer = q + 1
                                        }
                                    }
                                    if (dataLayer[q + 2] != undefined) {
                                        if (dataLayer[q + 2].event == "removeFromCart") {
                                            idlayer = q + 2
                                        }
                                    }
                                    if (dataLayer[q + 3] != undefined) {
                                        if (dataLayer[q + 3].event == "removeFromCart") {
                                            idlayer = q + 3
                                        }
                                    }
                                    if (dataLayer[q + 4] != undefined) {
                                        if (dataLayer[q + 4].event == "removeFromCart") {
                                            idlayer = q + 4
                                        }
                                    }
                                    if (dataLayer[q + 5] != undefined) {
                                        if (dataLayer[q + 5].event == "removeFromCart") {
                                            idlayer = q + 5
                                        }
                                    }
                                    if (dataLayer[q + 6] != undefined) {
                                        if (dataLayer[q + 6].event == "removeFromCart") {
                                            idlayer = q + 6
                                        }
                                    }
                                    if (dataLayer[q + 7] != undefined) {
                                        if (dataLayer[q + 7].event == "removeFromCart") {
                                            idlayer = q + 7
                                        }
                                    }
                                }
                            }
                            if (dataLayer[idlayer] != undefined) {
                                if (dataLayer[idlayer]["ecommerce"] != undefined) {
                                    if (dataLayer[idlayer]["ecommerce"]["remove"] != undefined) {
                                        if (dataLayer[idlayer]["ecommerce"]["remove"]["products"] != undefined) {
                                            if (dataLayer[idlayer]["ecommerce"]["remove"]["products"][0] != undefined) {
                                                var addedflag = false;
                                                var cookieaddeddetails = readCookie('ividData')
                                                if (cookieaddeddetails != undefined) {
                                                    var addedp = JSON.parse(cookieaddeddetails)
                                                    for (h = 0; h < addedp.length; h++) {
                                                        if (addedp[h] != null) {
                                                            if (addedp[h].name.toLocaleLowerCase() == dataLayer[idlayer]["ecommerce"]["remove"]["products"][0].name.toLocaleLowerCase() || addedp[h].id == dataLayer[idlayer]["ecommerce"]["remove"]["products"][0].id || addedp[h].variant == dataLayer[idlayer]["ecommerce"]["remove"]["products"][0].variant) {
                                                                addedflag = true;
                                                                delete addedp[h];
                                                                var clientDomain = window.location.host.replace("www", "");
                                                                var d = new Date();
                                                                d.setTime(d.getTime() + (365 * 24 * 60 * 60 * 1000));
                                                                var expires = "expires=" + d.toUTCString();
                                                                document.cookie = 'ividData=' + JSON.stringify(addedp) + '; expires=' + expires + '; domain=' + clientDomain + '; path=/' + '; secure:' + true + ';'
                                                            }
                                                        }
                                                    }
                                                    //dataLayer[idlayer]["ecommerce"]["remove"]["products"][0].product_type = 'Bundle'
                                                    if (addedflag == true) {
                                                        dataLayer[idlayer].product_type = 'Bundle'
                                                    } else {
                                                        if (dataLayer[idlayer].product_type == undefined) {
                                                            dataLayer[idlayer].product_type = 'No Bundle'
                                                        }
                                                    }
                                                } else {
                                                    if (dataLayer[idlayer].product_type == undefined) {
                                                        dataLayer[idlayer].product_type = 'No Bundle'
                                                    }
                                                }
                                            }
                                        }
                                    }
                                }
                            }
                        }, 3000)
                    }
                }

                if (INC_COL.config.pageType == "productList") {
                    if (clickedElement.classList.contains('js-add-to-bag-button') == true) {
                        if (clickedElement.getAttribute('data-test-id') == "add_to_bag_btn") {
                            var checkplpcartopen = setInterval(function() {
                                if (document.querySelector('body.active-gnav') != null && document.querySelector('.header-gnav-cart__overlay') != null && document.querySelector('.js-header-gnav-cart__overlay.visible') != null) {
                                    clearInterval(checkplpcartopen)
                                    setTimeout(function() {
                                        var classpid = document.querySelector('.cart-confirm-wrapper .cart-overlay-products .prod').classList
                                        var pidplp = ""
                                        for (p = 0; p < classpid.length; p++) {
                                            if (classpid[p].indexOf('prod-PROD') >= 0) {
                                                if (classpid[p].split('SKU')[0] != undefined) {
                                                    pidplp = classpid[p].split('SKU')[0].replace('prod-', '')
                                                }
                                            }
                                        }
                                        plp_listeners(pidplp)
                                    }, 1000)
                                }
                            }, 100)
                        }
                    }
                }
                if (clickedElement.classList.contains('js-gnav-header-formatter__bg-full-width') == true) {
                    INC_COL.methods.hideSidebar()
                    if (document.querySelector('.header-gnav-cart__overlay.visible') == null) {// INC_COL.methods.hideSidebar()
                    }
                }
            }
            if (clickedElement.className == "inc_prd_modal_bk inc_active") {
                clickedElement.querySelector('.inc_prd_hdr_title_bk').classList.add('inc_active');
                clickedElement.classList.remove('inc_active')
                document.querySelector('html').classList.remove('inc_overlay');
            }

            if (clickedElement.className == "inc_prd_hdr_img") {
                document.querySelector('.inc_prd_hdr_title_bk').classList.add('inc_active');
            }

            if (clickedElement.className == "inc_pdp_bd_cart_overlay_bk active") {
                document.querySelector('.inc_bd_cart_title_img_bk').click()
            }
            if (clickedElement.className == "inc_prd_bk configurable show_overlay") {
                clickedElement.classList.remove('show_overlay')
                clickedElement.querySelector('.inc_prd_desc_att_bk').classList.remove('inc_active')
                document.querySelector('html').classList.remove('inc_overlay');
            }

            if (clickedElement.className == "sidebar_outer active") {
                document.querySelector('.inc_hdr_continue_img').click()
            }
            setTimeout(function() {
                var inc_col_prod_img1 = document.querySelector('.inc_prd_modal_bk.inc_active .inc_prd_img_main_img img')
                if (inc_col_prod_img1) {
                    inc_col_prod_img1.setAttribute('style', 'left:0 !important;position: relative;')
                }
            }, 2000)
        } catch (err) {
            var formData = new FormData();
            formData.append("EmailId", "shashi@increasingly.com");
            formData.append("Subject", 'JS Error on ');
            formData.append("Message", err + 'Error Stack' + err.stack);
            var xhr = new XMLHttpRequest();
            xhr.open("POST", '//api.increasingly.co/SendEmail', true);
            xhr.send(formData);
        }
    }
}

setTimeout(function() {
    if (window.innerWidth < 821) {
        window.addEventListener("orientationchange", function() {
            if (window.matchMedia("(orientation: portrait)").matches) {
                console.log("PORTRAIT")
                INC_COL.config.deviceMode = "PORTRAIT"
                var inc_bk_rem = document.querySelector(".inc_bk");
                if (inc_bk_rem != null) {
                    inc_bk_rem.parentNode.removeChild(inc_bk_rem);
                }
                onloadpdp = false
                var sidebar_rem = document.querySelector(".inc_col_sidebar_modal_bk");
                if (sidebar_rem != null) {
                    sidebar_rem.parentNode.removeChild(sidebar_rem);
                }
                var over_rem = document.querySelector(".inc_col_sidebar_overlay_bk");
                if (over_rem != null) {
                    over_rem.parentNode.removeChild(over_rem);
                }
                setTimeout(function() {
                    INC_COL.init();
                }, 0)

            }
            if (window.matchMedia("(orientation: landscape)").matches) {
                console.log("LANSCAPE")
                INC_COL.config.deviceMode = "LANSCAPE";
                onloadpdp = false
                var inc_bk_rem = document.querySelector(".inc_bk");
                if (inc_bk_rem != null) {
                    inc_bk_rem.parentNode.removeChild(inc_bk_rem);
                }
                var sidebar_rem = document.querySelector(".inc_col_sidebar_modal_bk");
                if (sidebar_rem != null) {
                    sidebar_rem.parentNode.removeChild(sidebar_rem);
                }
                var over_rem = document.querySelector(".inc_col_sidebar_overlay_bk");
                if (over_rem != null) {
                    over_rem.parentNode.removeChild(over_rem);
                }
                setTimeout(function() {
                    INC_COL.init();
                }, 10)
            }
        }, {
            passive: true
        });

        var scrollableElement = document.body;
        // scrollableElement.addEventListener('wheel', checkScrollDirection);
        document.addEventListener("touchmove", checkScrollDirection, false);
        function checkScrollDirection(event) {
            var inc_col_div = document.querySelector(".inc_bk");
            if (inc_col_isOnScreenCol(jQuery('.inc_bk'))) {
                if (document.querySelector('.inc_bk') != null) {
                    if (document.querySelectorAll('.elc-sticky-container.js-sticky-container')[1] != null) {
                        document.querySelectorAll('.elc-sticky-container.js-sticky-container')[1].style.display = "none"
                    }
                }
            } else {
                if (document.querySelector('.inc_bk') != null) {
                    if (document.querySelectorAll('.elc-sticky-container.js-sticky-container')[1] != null) {
                        document.querySelectorAll('.elc-sticky-container.js-sticky-container')[1].style.display = "block"
                    }
                }
            }
        }
    }

    window.addEventListener('resize', function(event) {
        if (document.querySelector('.inc_bk .inc_bd_prd_list_main_bk') != null) {
            document.querySelector('.inc_bk .inc_bd_prd_list_main_bk').setAttribute("style", "margin-left:0");
            if (window.innerWidth < 1185) {
                var prd_length = 2
            } else {
                var prd_length = 3
            }
            if (document.querySelectorAll('.inc_bk .inc_prd_module_bk').length > prd_length && document.querySelector('.inc_bk .inc_bd_prd_left-btn_bk') != null) {
                document.querySelector('.inc_bk .inc_bd_prd_left-btn_bk').setAttribute("style", "pointer-events: none;opacity:0.5");
                document.querySelector('.inc_bk .inc_bd_prd_right-btn_bk').setAttribute("style", "pointer-events: auto;opacity:1");
                document.querySelector('.inc_bd_prd_left-btn_img').setAttribute('style', 'opacity:0.5')
                document.querySelector('.inc_bd_prd_right-btn_img').setAttribute('style', 'opacity:1')
            }
            INC_COL.clientConfig.slidevalue = 0
            INC_COL.clientConfig.offset = 0
            INC_COL.clientConfig.slidevalue = 0
        }
    }, {
        passive: true
    })
}, 3000)
function inc_col_isOnScreenCol(elem) {
    if (elem.length == 0) {
        return;
    }
    var $window = jQuery(window)
    var viewport_top = $window.scrollTop()
    var viewport_height = $window.height()
    var viewport_bottom = viewport_top + viewport_height
    var $elem = jQuery(elem)
    var top = $elem.offset().top
    var height = $elem.height()
    var bottom = top + height
    return (top >= viewport_top && top < viewport_bottom) || (bottom > viewport_top && bottom <= viewport_bottom) || (height > viewport_height && top <= viewport_top && bottom >= viewport_bottom)
}
function slideToCollection(id, n, elm, type_of, arrow) {
    if (elm.className == "left_arrow" || elm.className == "left_arrow inc_active" || type_of == "left") {
        var nn = -1
        inc_showSlidescol(INC_COL.config.inc_col_slideIndex += nn, nn, elm, type_of, arrow);
    } else {
        var nn = 1
        inc_showSlidescol(INC_COL.config.inc_col_slideIndex += nn, nn, elm, type_of, arrow);
    }
}

function inc_showSlidescol(n, ind, elm, type_of, arrow) {
    var i;
    var showcase_other_img_list = elm.querySelector('.inc_prd_showcase_bk .inc_prd_img_main_img a')
    var modal_other_img_list = elm.querySelector('.inc_prd_modal_bk .inc_prd_img_main_img a')
    var showcase_dots = elm.querySelectorAll('.inc_prd_showcase_bk .inc_prd_img_gallery_list_bk .inc_prd_img_gallery_list_item_bk')
    var modal_dots = elm.querySelectorAll('.inc_prd_modal_bk .inc_prd_img_gallery_list_bk .inc_prd_img_gallery_list_item_bk')

    var showcase_other_img = elm.querySelector('.inc_prd_showcase_bk .inc_prd_img_main_img a img')

    var modal_other_img = elm.querySelector('.inc_prd_modal_bk .inc_prd_img_main_img a img')

    var otherImg_list = showcase_other_img_list.getAttribute('otherImageList');
    var additional_img = []
    var additional_img = otherImg_list.split(',');
    var get_org_img = showcase_other_img_list.getAttribute('imageURL')
    if (n > additional_img.length) {
        INC_COL.config.inc_col_slideIndex = 1
    }
    if (n < 1) {
        INC_COL.config.inc_col_slideIndex = additional_img.length
    }

    for (i = 0; i < showcase_dots.length; i++) {
        showcase_dots[i].classList.remove('inc_active')
        if (modal_dots[i] != undefined) {
            modal_dots[i].classList.remove('inc_active')
        }
    }
    var img_src = additional_img[INC_COL.config.inc_col_slideIndex - 1].replace('160x90', '2000x1500');
    if (img_src != "null") {// showcase_other_img.setAttribute('src',img_src);
    // modal_other_img.setAttribute('src',img_src);

    // for (var r = 0; r < showcase_dots.length; r++) {
    //     showcase_dots[r].classList.remove('inc_active');
    //     modal_dots[r].classList.remove('inc_active');
    // }
    // if (showcase_dots[INC_COL.config.inc_col_slideIndex - 1] != null) {
    //     showcase_dots[INC_COL.config.inc_col_slideIndex - 1].classList.add('inc_active');
    // }
    // if (modal_dots[INC_COL.config.inc_col_slideIndex - 1] != null) {
    //     modal_dots[INC_COL.config.inc_col_slideIndex - 1].classList.add('inc_active');
    // }
    // if(arrow == "arrow"){
    //     if(modal_dots.length > 6){
    //         var activedots=elm.querySelector('.inc_prd_modal_bk .inc_prd_img_gallery_list_bk .inc_prd_img_gallery_list_item_bk.inc_active')
    //         if(activedots != null){
    //             var actind = activedots.getAttribute('index')
    //             if(actind == 5){
    //                     if(modal_dots.length >= 6){
    //                         modal_dots[0].setAttribute('style','display: none !important;')
    //                     }
    //                 }else if(actind == 6){
    //                     if(modal_dots.length >= 7){
    //                         modal_dots[0].setAttribute('style','display: none !important;')
    //                         modal_dots[1].setAttribute('style','display: none !important;')
    //                     }
    //                 }else if(actind == 7){
    //                     if(modal_dots.length >= 8){
    //                         modal_dots[0].setAttribute('style','display: none !important;')
    //                         modal_dots[1].setAttribute('style','display: none !important;')
    //                         modal_dots[2].setAttribute('style','display: none !important;')
    //                     }
    //                 }else if(actind == 8){
    //                     if(modal_dots.length >= 9){
    //                         modal_dots[0].setAttribute('style','display: none !important;')
    //                         modal_dots[1].setAttribute('style','display: none !important;')
    //                         modal_dots[2].setAttribute('style','display: none !important;')
    //                         modal_dots[3].setAttribute('style','display: none !important;')
    //                     }
    //                 }else if(actind == 9){
    //                     if(modal_dots.length >= 10){
    //                         modal_dots[0].setAttribute('style','display: none !important;')
    //                         modal_dots[1].setAttribute('style','display: none !important;')
    //                         modal_dots[2].setAttribute('style','display: none !important;')
    //                         modal_dots[3].setAttribute('style','display: none !important;')
    //                         modal_dots[4].setAttribute('style','display: none !important;')
    //                     }
    //                 }else if(actind == 10){
    //                     if(modal_dots.length >= 11){
    //                         modal_dots[0].setAttribute('style','display: none !important;')
    //                         modal_dots[1].setAttribute('style','display: none !important;')
    //                         modal_dots[2].setAttribute('style','display: none !important;')
    //                         modal_dots[3].setAttribute('style','display: none !important;')
    //                         modal_dots[4].setAttribute('style','display: none !important;')
    //                         modal_dots[5].setAttribute('style','display: none !important;')
    //                     }
    //                 }else if(actind == 11){
    //                     if(modal_dots.length >= 12){
    //                         modal_dots[0].setAttribute('style','display: none !important;')
    //                         modal_dots[1].setAttribute('style','display: none !important;')
    //                         modal_dots[2].setAttribute('style','display: none !important;')
    //                         modal_dots[3].setAttribute('style','display: none !important;')
    //                         modal_dots[4].setAttribute('style','display: none !important;')
    //                         modal_dots[5].setAttribute('style','display: none !important;')
    //                         modal_dots[6].setAttribute('style','display: none !important;')
    //                     }
    //                 }else {
    //                     modal_dots[0].style.display = "flex"
    //                     modal_dots[1].style.display = "flex"
    //                     modal_dots[2].style.display = "flex"
    //                     modal_dots[3].style.display = "flex"
    //                     if(modal_dots[4] != undefined){
    //                         modal_dots[4].style.display = "flex"
    //                     }
    //                     if(modal_dots[5] != undefined){
    //                         modal_dots[5].style.display = "flex"
    //                     }
    //                     if(modal_dots[6] != undefined){
    //                         modal_dots[6].style.display = "flex"
    //                     }
    //                 }
    //             // }
    //         }
    //     }
    // }
    }
}
// SWIPE FEATURE
var xDown = null;
var yDown = null;

function add_swipee(element) {
    element.addEventListener('touchstart', handleTouchStartCol, {
        passive: true
    });
    element.addEventListener('touchmove', handleTouchMoveCol, {
        passive: true
    });
}
function handleTouchStartCol(evt) {
    xDown = evt.touches[0].clientX;
    yDown = evt.touches[0].clientY;
}
;
function handleTouchMoveCol(evt) {
    if (!xDown || !yDown) {
        return;
    }
    var xUp = evt.touches[0].clientX;
    var yUp = evt.touches[0].clientY;
    var xDiff = xDown - xUp;
    var yDiff = yDown - yUp;
    if (Math.abs(xDiff) + Math.abs(yDiff) > 150) {
        //to deal with to short swipes
        if (Math.abs(xDiff) > Math.abs(yDiff)) {
            /*most significant*/
            if (xDiff > 0) {
                var prod_card = evt.target.parentNode.parentNode.parentNode.parentNode.parentNode.parentNode.parentNode.parentNode;
                slideToCollection(null, 0, prod_card, "left")
            } else {
                /* right swipe */
                var prod_card = evt.target.parentNode.parentNode.parentNode.parentNode.parentNode.parentNode.parentNode.parentNode;
                slideToCollection(null, 0, prod_card, "right")
            }
        }
        /* reset values */
        xDown = null;
        yDown = null;
    }
    if (Math.abs(xDiff) + Math.abs(yDiff) < 150) {
        if (Math.abs(xDiff) > Math.abs(yDiff)) {
            /*most significant*/
            if (xDiff > 0) {
                /* left swipe */
                var prod_card = evt.target.parentNode.parentNode.parentNode.parentNode.parentNode.parentNode.parentNode.parentNode;
                slideToCollection(null, 0, prod_card, "left")
            } else {
                /* right swipe */
                var prod_card = evt.target.parentNode.parentNode.parentNode.parentNode.parentNode.parentNode.parentNode.parentNode;
                slideToCollection(null, 0, prod_card, "right")
            }
        }
        /* reset values */
        xDown = null;
        yDown = null;
    }
}
var formatter = new Intl.NumberFormat('en-US',{
    style: 'currency',
    currency: 'GBP',
});
function attribute_listing_col(valueArray) {
    sortingArr = ["Color", "Size", "Shade", "Weight", "volume"];
    items = valueArray
    sorting = ["Color", "Size", "Shade", "Weight", "volume"];
    result = []
    sorting.forEach(function(key) {
        var found = false;
        items = items.filter(function(item) {
            if (!found && item.attributeCode == key) {
                result.push(item);
                found = true;
                return false;
            } else
                return true;
        })
    })
    return result;
}

var Base64 = {
    _keyStr: "ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/=",
    encode: function(e) {
        var t = "";
        var n, r, i, s, o, u, a;
        var f = 0;
        e = Base64._utf8_encode(e);
        while (f < e.length) {
            n = e.charCodeAt(f++);
            r = e.charCodeAt(f++);
            i = e.charCodeAt(f++);
            s = n >> 2;
            o = (n & 3) << 4 | r >> 4;
            u = (r & 15) << 2 | i >> 6;
            a = i & 63;
            if (isNaN(r)) {
                u = a = 64
            } else if (isNaN(i)) {
                a = 64
            }
            t = t + this._keyStr.charAt(s) + this._keyStr.charAt(o) + this._keyStr.charAt(u) + this._keyStr.charAt(a)
        }
        return t
    },
    decode: function(e) {
        var t = "";
        var n, r, i;
        var s, o, u, a;
        var f = 0;
        e = e.replace(/[^A-Za-z0-9+/=]/g, "");
        while (f < e.length) {
            s = this._keyStr.indexOf(e.charAt(f++));
            o = this._keyStr.indexOf(e.charAt(f++));
            u = this._keyStr.indexOf(e.charAt(f++));
            a = this._keyStr.indexOf(e.charAt(f++));
            n = s << 2 | o >> 4;
            r = (o & 15) << 4 | u >> 2;
            i = (u & 3) << 6 | a;
            t = t + String.fromCharCode(n);
            if (u != 64) {
                t = t + String.fromCharCode(r)
            }
            if (a != 64) {
                t = t + String.fromCharCode(i)
            }
        }
        t = Base64._utf8_decode(t);
        return t
    },
    _utf8_encode: function(e) {
        e = e.replace(/rn/g, "n");
        var t = "";
        for (var n = 0; n < e.length; n++) {
            var r = e.charCodeAt(n);
            if (r < 128) {
                t += String.fromCharCode(r)
            } else if (r > 127 && r < 2048) {
                t += String.fromCharCode(r >> 6 | 192);
                t += String.fromCharCode(r & 63 | 128)
            } else {
                t += String.fromCharCode(r >> 12 | 224);
                t += String.fromCharCode(r >> 6 & 63 | 128);
                t += String.fromCharCode(r & 63 | 128)
            }
        }
        return t
    },
    _utf8_decode: function(e) {
        var t = "";
        var n = 0;
        var r = c1 = c2 = 0;
        while (n < e.length) {
            r = e.charCodeAt(n);
            if (r < 128) {
                t += String.fromCharCode(r);
                n++
            } else if (r > 191 && r < 224) {
                c2 = e.charCodeAt(n + 1);
                t += String.fromCharCode((r & 31) << 6 | c2 & 63);
                n += 2
            } else {
                c2 = e.charCodeAt(n + 1);
                c3 = e.charCodeAt(n + 2);
                t += String.fromCharCode((r & 15) << 12 | (c2 & 63) << 6 | c3 & 63);
                n += 3
            }
        }
        return t
    }
}
function getTrackingPixel() {// var url = 'https://www.awin1.com/cread.php?awinmid=6774&awinaffid=317439'
// /*-------------------Tracking with Image Pixel---------------------------*/
// var oImg = document.createElement("img");
// oImg.setAttribute('id', 'cstracking')
// oImg.setAttribute('src', url);
// oImg.setAttribute('height', '1px');
// oImg.setAttribute('width', '1px');
// oImg.setAttribute('style', 'display:none')
// document.body.appendChild(oImg);
/* -----------------------------------------------------------------------*/
}

function get_discount_ecirp(p_original_ecirp, p_sale_ecirp) {
    return parseFloat(+p_original_ecirp - +p_sale_ecirp)
}
function get_discount_ecirp_percentage(p_original_ecirp, p_sale_ecirp) {
    return Math.round(((p_original_ecirp - p_sale_ecirp) / p_original_ecirp) * 100);
}

function get_discount_price(p_original_price, p_sale_price) {
    //return Math.round(((p_original_price - p_sale_price) / p_original_price) * 100);
    return parseFloat(+p_original_price - +p_sale_price)
}

function get_discount_price_percentage(p_original_price, p_sale_price) {
    return Math.round(((p_original_price - p_sale_price) / p_original_price) * 100);
    // return parseFloat(+p_original_price - +p_sale_price)
}

INC_COL.methods.irbReq_is_categ_recomendation = function(productId, bundleCount, elementName) {
    //var bundleResponse = "";
    // INC_COL.dataStore.methods().buildDataStoreObj(bundleResponse);
    INC_COL.config.recommendation = true

    var elementName = "catalog_product_view";
    var productId = INC_COL.config.pdpPID;
    var apiKey = INC_COL.config.clientToken;
    var bundleReqCount = 10;

    var irbPATH = "//rapidload.increasingly.co/increasingly_bundles?irb/";

    var irbReqParams = "product_ids=" + productId + "&category_id=" + "&api_key=" + apiKey + "&client_id=" + "&page_type=" + elementName + "&fr=" + "1" + "&client_visitor_id=" + INC_COL.config.ivid + "&rc=" + "1"
    var irbReqURL1 = decodeURI(irbPATH + btoa(irbReqParams));
    var networkConfigObj = new INC_COL.classes.NWConfig();
    networkConfigObj["url"] = irbReqURL1;

    var xhr = new XMLHttpRequest();
    xhr.open("GET", networkConfigObj["url"], true);

    xhr.onload = function() {}
    // xhr.setRequestHeader('Content-Type', 'application/json');
    xhr.onreadystatechange = function() {
        if (xhr.readyState == 4 && xhr.status === 200) {
            if (xhr.response != "") {
                if (INC_COL.config.pageType == "pdpcollection") {
                    var respon = JSON.parse(xhr.response)
                    cb_tc_col(JSON.parse(xhr.response), "recommendation");
                }
            }
        }
    }

    xhr.send(JSON.stringify(networkConfigObj["params"]));
}

function cb_tc_col(bundle_response, recommendation) {
    console.log("recs")
    var bundles_tc = bundle_response.Bundles;
    var pdpProductId = INC_COL.config.Product_id
    var bundleproductarrayTC = {}
    if (bundle_response.ProductsDetail != null) {
        for (var ibT = 0; ibT < bundle_response.ProductsDetail.length; ibT++) {
            bundleproductarrayTC[bundle_response.ProductsDetail[ibT].ProductId] = bundle_response.ProductsDetail[ibT]
        }
    } else if (bundle_response.ProductsDetail == null || bundle_response.ProductsDetail == "null") {
        for (var ibT = 0; ibT < bundle_response.CategoryRecommendations.length; ibT++) {
            bundleproductarrayTC[bundle_response.CategoryRecommendations[ibT].ProductId] = bundle_response.CategoryRecommendations[ibT]
        }
    }
    if (recommendation == "recommendation") {
        INC_COL.config.recommendation = true
        bundle_count = 1
        bundles_tc = []
    } else {
        var bundle_count = bundles_tc.length
    }
    for (var i = 0; i < bundle_count; i++) {
        if (recommendation == "recommendation") {
            bundles_tc.push({
                BundleId: 11111,
            })
        }
        if (INC_COL.config.dupDataObjectProducts.indexOf(bundles_tc[i].BundleId) == -1) {
            INC_COL.config.dupDataObjectProducts.push(bundles_tc[i].BundleId)
            if (recommendation == "recommendation") {
                var irbBundleObj = bundle_response
            } else {
                var irbBundleObj = bundles_tc[i];
            }
            var bundleObj = {};
            if (INC_COL.config.recommendation == false) {
                bundleObj.id = irbBundleObj["BundleId"];
                bundleObj.totalRegularPrice = irbBundleObj["TotalPrice"];
                bundleObj.totalActivePrice = irbBundleObj["TotalSpecialPrice"];
                bundleObj.totalBundlePrice = irbBundleObj["TotalBundlePrice"];
                bundleObj.totalBundleDiscountPrice = irbBundleObj["DiscountPrice"];
                bundleObj.productCount = irbBundleObj["ProductCount"];
            }

            if (recommendation == "recommendation") {
                var irbProductsArray = bundle_response.CategoryRecommendations
            } else {
                var irbProductsArray = irbBundleObj["ProductIds"]
            }
            if (irbProductsArray != null) {
                for (var j = 0; j < irbProductsArray.length; j++) {
                    if (recommendation == "recommendation") {
                        var product = irbProductsArray[j]
                    } else {
                        var product = bundleproductarrayTC[irbProductsArray[j]]
                    }
                    if (recommendation == "recommendation") {
                        INC_COL.config.recarray.push(product.ProductId)
                    }
                    if (INC_COL.config.uniqeProduct.indexOf(product["ProductId"]) == -1 && INC_COL.config.childlevelprodResc.indexOf(product["ProductId"]) == -1) {
                        INC_COL.config.uniqeProduct.push(product["ProductId"])
                        var productObj = new INC_COL.classes.ProductObj(product);
                        if (!INC_COL.dataStore.dataStoreObj.hasOwnProperty(productObj.id)) {
                            productObj["bundleId"] = irbBundleObj["BundleId"];
                            productObj["bundledProductId"] = pdpProductId;
                            productObj.sku = productObj.id;
                            productObj.Filed3 = product["Field5"]

                            var pAttributes = product["Attributes"] || "";
                            if (pAttributes != "" && pAttributes != null) {
                                if (pAttributes.length == 1) {
                                    if (pAttributes[0].attributeCode == "Color" || pAttributes[0].attributeCode == 'colour') {
                                        pAttributes[0].attributeCode = "Color"
                                        pAttributes[0].frontEndLabel = "Color"
                                    } else if (pAttributes[0].attributeCode == "size") {
                                        pAttributes[0].attributeCode = "Size"
                                        pAttributes[0].frontEndLabel = "Size"
                                    } else if (pAttributes[0].attributeCode == "weight") {
                                        pAttributes[0].attributeCode = "Weight"
                                        pAttributes[0].frontEndLabel = "Weight"
                                    } else {
                                        if (pAttributes[0].attributeCode == "volume") {
                                            pAttributes[0].attributeCode = "volume"
                                            pAttributes[0].frontEndLabel = "volume"
                                        }
                                    }

                                } else {
                                    for (var h = 0; h < pAttributes.length; h++) {
                                        if (pAttributes[h].attributeCode == "color" || pAttributes[0].attributeCode == 'colour') {
                                            pAttributes[h].attributeCode = "Color"
                                            pAttributes[h].frontEndLabel = "Color"
                                        }
                                        if (pAttributes[h].attributeCode == "size" || pAttributes[h].attributeCode == "size") {
                                            pAttributes[h].attributeCode = "Size"
                                            pAttributes[h].frontEndLabel = "Size"
                                        }
                                        if (pAttributes[h].attributeCode == "weight" || pAttributes[h].attributeCode == "Weight") {
                                            pAttributes[h].attributeCode = "Weight"
                                            pAttributes[h].frontEndLabel = "Weight"
                                        }
                                        if (pAttributes[h].frontEndLabel == "volume") {
                                            pAttributes[h].frontEndLabel = "Volume"
                                        }
                                    }
                                }
                                pAttributes = attribute_listing_col(pAttributes)
                            }

                            var pAttObj = {};
                            // var warranty=[]
                            for (t = 0; t < pAttributes.length; t++) {
                                pAttributes[t].attributeId = t
                                var attr_values = pAttributes[t].attributeValues;
                                for (v = 0; v < attr_values.length; v++) {
                                    attr_values[v].optionId1 = attr_values[v].optionId;
                                    attr_values[v].optionId = t;
                                }
                            }

                            // collection_products.push(product["ProductId"])

                            if (pAttributes.length) {
                                INC_COL.config.configcount = 0
                                for (var k = 0; k < pAttributes.length; k++) {
                                    var pAttributesObj = pAttributes[k];

                                    var pAttributesValues = pAttributesObj["attributeValues"];

                                    for (var l = 0; l < pAttributesValues.length; l++) {
                                        var childProduct = pAttributesValues[l];

                                        if (childProduct["childProductId"] == null) {
                                            childProduct["childProductId"] = product["ProductId"]
                                            childProduct["childProductSku"] = product["ProductSku"];
                                            childProduct["childProductName"] = product["ProductName"];
                                            childProduct["childProductImageUrl"] = product["ImageURL"];
                                            childProduct["childProductOtherImageUrl"] = product["OtherImageList"];
                                            childProduct["childProductUrl"] = product["ProductUrl"];
                                            childProduct["childProductPrice"] = product["Price"];
                                            childProduct["childProductSpecialPrice"] = product["SpecialPrice"];
                                            childProduct["childcolProductDescription"] = product["Description"];
                                            childProduct["childInternalProductId"] = product["ProductId"]
                                            childProduct["childProductField1"] = product["Field1"]
                                            childProduct["childProductField2"] = product["Field2"]
                                            childProduct["childProductField3"] = product["Field3"]
                                            childProduct["childProductField4"] = product["Field4"]
                                            childProduct["childProductField5"] = product["Field5"]
                                            childProduct["childProductField6"] = product["Field6"]
                                        }

                                        if (childProduct["childProductImageUrl"] == "" || childProduct["childProductImageUrl"] == null) {
                                            childProduct["childProductImageUrl"] = product["ImageURL"];
                                        }
                                        if (product["Size"] != null) {
                                            childProduct["MainprodVariant"] = product["Color"].replace('ー', '') + "ー" + product["Size"].replace('ー', '');
                                        } else {
                                            childProduct["MainprodVariant"] = product["Color"];
                                        }
                                        childProduct["comboId"] = product["comboId"];
                                        childProduct["childCategoryId"] = product["CategoryId"];
                                        childProduct["childCategoryName"] = product["CategoryName"];
                                        childProduct["childcolProductDescription"] = product["Description"];
                                        childProduct["ShortDescription"] = product["ShortDescription"];
                                        childProduct["childProductImageUrlMain"] = product["ImageURL"];
                                        childProduct["childProductPriceMain"] = product["Price"];
                                        childProduct["childProductSpecialPriceMain"] = product["SpecialPrice"];
                                        childProduct["childProductNameMain"] = product["ProductName"];
                                        childProduct["childProductUrlMain"] = product["ProductUrl"];
                                        childProduct["mainSKU"] = product["ProductSku"];
                                        childProduct["ProductType"] = product["ProductType"];

                                        var productObj = new INC_COL.classes.ProductAttObj(childProduct);

                                        productObj["bundledProductId"] = pdpProductId;
                                        productObj.mainId = product["ProductId"];
                                        productObj.bundleId = bundleObj.id;
                                        productObj.sku = productObj.id;
                                        productObj.option[pAttributesObj["attributeId"]].id = pAttributesObj["attributeId"];
                                        productObj.option[pAttributesObj["attributeId"]].label = pAttributesObj["frontEndLabel"];
                                        productObj.option[pAttributesObj["attributeId"]].code = pAttributesObj["attributeCode"];
                                        if (!INC_COL.dataStore.dataStoreObj.hasOwnProperty(product['ProductId'])) {
                                            INC_COL.dataStore.dataStoreObj[product['ProductId']] = {};
                                        }
                                        if (!INC_COL.dataStore.dataStoreObj[product['ProductId']].hasOwnProperty(productObj['id'])) {
                                            INC_COL.dataStore.dataStoreObj[product['ProductId']][productObj['id']] = {}
                                        }
                                        pAttObj = INC_COL.dataStore.dataStoreObj[product['ProductId']][productObj['id']];

                                        for (pAtt in productObj) {
                                            if (pAtt == "option") {
                                                if (!pAttObj.hasOwnProperty('option')) {
                                                    pAttObj["option"] = {}
                                                }

                                                Object.keys(productObj[pAtt]).forEach(function(key) {
                                                    pAttObj[pAtt][key] = productObj[pAtt][key];
                                                });
                                                // }
                                            } else {
                                                pAttObj[pAtt] = productObj[pAtt];
                                            }
                                        }
                                    }
                                }
                            }

                            if (pAttributes.length == 0) {
                                var productObj = new INC_COL.classes.ProductObj(product);
                                productObj["bundleId"] = irbBundleObj["BundleId"];
                                // productObj["comboId"] = irbBundleObj["ComboId"];
                                productObj["bundledProductId"] = pdpProductId;
                                productObj.sku = productObj.id;
                                if (!INC_COL.dataStore.dataStoreObj.hasOwnProperty(productObj['mainId'])) {
                                    INC_COL.dataStore.dataStoreObj[productObj['mainId']] = {};
                                }

                                // if(!dataStoreObj[product['mainId']].hasOwnProperty(product['id'])){
                                //     dataStoreObj[product['mainId']['id']] = {};
                                // }

                                INC_COL.dataStore.dataStoreObj[productObj['mainId']][productObj['id']] = {};
                                if (!!window.MSInputMethodContext && !!document.documentMode) {
                                    INC_COL.dataStore.dataStoreObj[productObj['mainId']][productObj['id']] = JSON.parse(JSON.stringify(productObj));
                                } else {
                                    INC_COL.dataStore.dataStoreObj[productObj['mainId']][productObj['id']] = Object.assign({}, productObj);
                                }
                            }

                            if ((INC_COL.dataStore.dataStoreObj != undefined) && (!INC_COL.dataStore.dataStoreObj.hasOwnProperty(productObj['mainId']))) {
                                INC_COL.dataStore.dataStoreObj[productObj['mainId']] = {};
                            }

                            if (INC_COL.dataStore.dataStoreObj != undefined) {

                                INC_COL.dataStore.dataStoreObj[productObj['mainId']][productObj['id']] = {};
                                if (!!window.MSInputMethodContext && !!document.documentMode) {
                                    INC_COL.dataStore.dataStoreObj[productObj['mainId']][productObj['id']] = JSON.parse(JSON.stringify(productObj));
                                } else {
                                    INC_COL.dataStore.dataStoreObj[productObj['mainId']][productObj['id']] = Object.assign({}, productObj);
                                }
                            }
                        }
                    }
                }
            }
        }
    }

    setTimeout(function() {
        var recModuleArray = INC_COL.config.recarray
        // if (window.innerWidth < 820){
        //     INC_COL.config.recbottom = recModuleArray
        //     INC_COL.methods.createRECBlock();
        // } else {
        //     if(recModuleArray.length>7){
        //         var middleIndex = Math.ceil(recModuleArray.length / 2);
        //         // console.log(middleIndex,"Middle")
        //         INC_COL.config.rectop = recModuleArray.splice(0,3);   
        //         // if (recModuleArray.length == 8){
        //             INC_COL.config.recbottom = recModuleArray
        //         // }
        //         setTimeout(function(){
        //             INC_COL.methods.createRECBlockTop();
        //         },100)

        //     } else {
        //         if(recModuleArray.length == 3){
        //             INC_COL.config.rectop = recModuleArray
        //             setTimeout(function(){
        //                 INC_COL.methods.createRECBlockTop();
        //             },100)
        //         }
        //     }
        //     if(recModuleArray.length != 3){
        INC_COL.config.recbottom = recModuleArray.splice(0, 5)
        INC_COL.methods.createRECBlock();
        //     }
        // }
    }, 2500)
}

INC_COL.methods.createRECBlock = function() {
    console.log("recsinc")
    var datastore = INC_COL.dataStore
    if (document.querySelector('.inc_af_block.inc_recommendations') != null) {
        var reco_block = document.querySelector('.inc_af_block.inc_recommendations')
        reco_block.parentNode.removeChild(reco_block);
        reco_block.style.display = "none"
    }

    var cart_html = '<div class="inc_af_title_block" style="clear: both;"><div class="inc_af_title_text_block"><div class="inc_af_title_text"></div><div class="inc_af_modal_close"></div></div></div><div class="inc_af_bundles_block"><div class="inc_af_left_block"><div class="inc_af_left_btn_block"><div class="inc_af_left_btn_img_block"><div class="inc_af_left_btn_img"></div></div></div></div><div class="inc_af_product-list-main_block"><div class="inc_af_product-list_block"></div></div><div class="inc_af_right_block"><div class="inc_af_right_btn_block"><div class="inc_af_right_btn_img_block"><div class="inc_af_right_btn_img"></div></div></div></div></div>'
    var amBlock = generate_html_tag('div', 'inc_af_block')

    amBlock.classList.add('inc_recommendations')
    amBlock.innerHTML = cart_html

    var amMainBlock = generate_html_tag('div', 'inc_af_main_block');
    // amMainBlock.style.display="none"
    amMainBlock.appendChild(amBlock);

    if (window.innerWidth > 820) {
        var tplayoutsibling = document.querySelector('._960-wrap .inc_main_product_description_bk')
    } else {
        var tplayoutsibling = document.querySelector('.inc_main_product_description_bk')
    }
    if (tplayoutsibling != null) {
        tplayoutsibling.parentNode.insertBefore(amMainBlock, tplayoutsibling)
    }
    // else if(document.querySelector('footer') != null){
    //     var footerinc = document.querySelector('footer')
    //     tplayoutsibling.parentNode.insertBefore(amMainBlock, tplayoutsibling)
    // }
    // }else{
    //     var tplayoutsibling=document.querySelector('.inc_bk')
    //     if(tplayoutsibling != null){
    //         tplayoutsibling.appendChild(amMainBlock)
    //     }else if(document.querySelector('footer') != null){
    //         var footerinc = document.querySelector('footer')
    //         tplayoutsibling.parentNode.insertBefore(amMainBlock, tplayoutsibling)
    //     }
    // }
    console.log(INC_COL.config.recbottom);
    if (INC_COL.config.recbottom != undefined && INC_COL.config.recbottom.length > 0) {
        var recModuleArray = INC_COL.config.recbottom
    } else {
        var recModuleArray = INC_COL.config.recarray
    }

    var duplamid = []

    var amProductListBlock = amBlock.querySelector(".inc_af_product-list_block");
    var elAmTitleText = amBlock.querySelector(".inc_af_title_text_block")
    amProductListBlock.classList.add('inc_rec_' + recModuleArray.length)
    amBlock.classList.add('inc_rec_' + recModuleArray.length)
    recModuleArray.forEach(function(mainProductId) {
        if (INC_COL.config.duplamid.indexOf(mainProductId) == -1) {
            INC_COL.config.duplamid.push(mainProductId)
            var findObj = new INC_COL.classes.FindObj({
                id: mainProductId
            });

            var productObj = INC_COL.dataStore.methods().getProductById(findObj);

            var productModuleBlock = generate_html_tag('div', 'inc_product_module_block')
            var elProductShowcaseBlock = generate_html_tag('div', 'inc_product_showcase_block');
            amProductListBlock.appendChild(productModuleBlock);
            elAmTitleText.innerText = "Best Sellers in Category"

            var productcardhtml = '<div class="inc_product_block"> <div class="inc_product_info_main_block"> <div class="inc_product_view_info_block"> <div class="inc_product_view_img_desc_block"> <div class="inc_product_img_block"> <div class="inc_product_img_main_block"> <div class="inc_product_img_main_img_block"> <div class="inc_product_img_main_img"> </div></div></div></div></div></div><div class="inc_product_desc_block"> <div class="inc_product_desc_title_block"> <div class="inc_product_desc_title_text_block"> <div class="inc_product_desc_title_text"> </div></div><div class="inc_product_manufacture_text_block"><div class="inc_product_maufacture_text"></div></div></div><div class="inc_product_desc_ratings_block"></div><div class="inc_product_desc_price_block"> <div class="inc_product_price_label_block"></div><div class="inc_product_desc_price_active_block"> <div class="inc_product_desc_price_active_text_block"> <div class="inc_product_desc_price_active_text"></div><div class="inc_product_desc_price_active_text_msg"></div></div></div><div class="inc_product_desc_price_regular_block"> <div class="inc_product_desc_price_regular_text_block"><div class="inc_product_desc_price_regular_text"></div></div></div></div></div></div></div>'
            elProductShowcaseBlock.innerHTML = productcardhtml
            productModuleBlock.appendChild(elProductShowcaseBlock)
            var productBlock = elProductShowcaseBlock.querySelector('.inc_product_block')
            var elTitleBlock = elProductShowcaseBlock.querySelector('.inc_product_desc_title_block');
            var elImgBlock = elProductShowcaseBlock.querySelector('.inc_product_img_block');
            var elTitleText = productBlock.querySelector('.inc_product_desc_title_text');
            var elTitleTextBlock = productBlock.querySelector('.inc_product_desc_title_text_block');
            var elPriceActiveText = productBlock.querySelector('.inc_product_desc_price_active_text');
            ;var elPriceActiveMsg = productBlock.querySelector('.inc_product_desc_price_active_text_msg');
            var elPriceRegularText = productBlock.querySelector('.inc_product_desc_price_regular_text');
            var eldescBlock = productBlock.querySelector('.inc_product_desc_block');

            var product_id = productBlock.querySelector('.inc_product_maufacture_text');
            product_id.innerHTML = productObj.Field2;

            productBlock.setAttribute('data-id', productObj.id);
            productBlock.setAttribute('data-sku', productObj.sku);
            productBlock.setAttribute('data-main_id', productObj.mainId);
            productBlock.setAttribute('data-bundle_id', productObj.bundleId);

            productModuleBlock.setAttribute('data-id', productObj.id);
            productModuleBlock.setAttribute('data-sku', productObj.sku);
            productModuleBlock.setAttribute('data-main_id', productObj.mainId);
            productModuleBlock.setAttribute('data-bundle_id', productObj.bundleId);

            var elImgMainImg = elImgBlock.querySelector('.inc_product_img_main_img');
            var elImgTag1 = generate_html_tag('img');
            if (productObj.imageURL != undefined) {
                elImgTag1.src = productObj.imageURL
                if (elImgTag1 == true) {
                    elImgTag.src = productObj.imageURL
                }
            }
            // elImgTag1.setAttribute('onerror', "this.src='" + INC_COL.config.noimage + "'");
            elImgTag1.setAttribute('role', 'img')
            elImgTag1.setAttribute('aria-label', 'Image')
            elImgTag1.setAttribute('alt', productObj.name)
            elImgTag1.setAttribute('data-mouseover', productObj["otherImageList"])
            elImgTag1.setAttribute('data-imageURL', productObj["imageURL"])
            var productLink = document.createElement('a');
            productLink.target = "_blank";
            productLink.href = productObj.url;
            productLink.appendChild(elImgTag1);
            productLink.setAttribute('otherImageList', productObj["otherImageList"])
            productLink.setAttribute('imageURL', productObj["imageURL"])
            elImgMainImg.appendChild(productLink);
            productLink.addEventListener("click", function(e) {
                if (window.innerWidth < 821) {
                    e.preventDefault()
                }
            })
            elImgMainImg.addEventListener("click", function() {
                INC_COL.methods.sendBundleClickTracking(productBlock.getAttribute('data-main_id'), INC_COL.config.pdpPID);
                var hrefd = productBlock.querySelector('.inc_product_img_main_img a').href
                setTimeout(function() {
                    if (window.innerWidth < 821) {
                        window.location.assign(hrefd);
                    }
                }, 2000)
            });

            elTitleTextBlock.addEventListener("click", function(e) {
                INC_COL.methods.sendBundleClickTracking(productBlock.getAttribute('data-main_id'), INC_COL.config.pdpPID, "100");
                var hrefd = productBlock.querySelector('.inc_product_img_main_img a').href
                setTimeout(function() {
                    if (window.innerWidth < 821) {
                        window.location.assign(hrefd);
                    }
                }, 2000)
            });
            var pTitleDiv = document.createElement('div');
            pTitleDiv.innerHTML = productObj.name;
            var field1 = productObj.ratingsCount
            var field2 = productObj.reviewsCount
            var elratingsBlock = productBlock.querySelector('.inc_product_desc_ratings_block');
            INC_COL.methods.get_product_ratingscol(field1, field2, elratingsBlock);
            var pLink = document.createElement('a');
            pLink.href = productObj.url;
            pLink.target = "_blank";
            pLink.setAttribute('title', productObj.name)
            pLink.setAttribute('href', productObj.url)
            pLink.appendChild(pTitleDiv);
            elTitleText.appendChild(pLink);
            pLink.addEventListener("click", function(e) {
                if (window.innerWidth < 821) {
                    e.preventDefault()
                }
            })
            var activePrice = parseFloat(productObj.activePrice).toFixed(2).toString();
            var regularPrice = parseFloat(productObj.regularPrice).toFixed(2).toString();
            elPriceRegularText.textContent = "";
            if (productObj.ProductType != "simple") {
                var priceRange = get_child_product_pricescol(productObj.mainId)
                if (priceRange.innerText.split(',')[0] != priceRange.innerText.split(',')[1] && priceRange.innerText.split(',')[1] != undefined) {
                    elPriceActiveText.innerHTML = priceRange.innerText.split(',')[0]
                    elPriceRegularText.innerHTML = "Was " + priceRange.innerText.split(',')[1]
                } else {
                    elPriceActiveText.innerHTML = priceRange.innerText.split(',')[0]
                }
            } else {
                if (activePrice != regularPrice && regularPrice != "" && regularPrice != null && regularPrice != 0) {
                    elPriceActiveText.parentNode.parentNode.parentNode.classList.add('is_special_price')
                    if (productObj.pricingCount != "") {
                        elPriceActiveText.innerHTML = formatter.format(activePrice)
                        elPriceRegularText.innerHTML = "<span>" + "WAS" + "</span>" + formatter.format(regularPrice)
                    } else {
                        elPriceActiveText.innerHTML = formatter.format(activePrice)
                        elPriceRegularText.innerHTML = "<span>" + "WAS" + "</span>" + formatter.format(regularPrice)
                    }
                    // elworthPrice.innerHTML = "Save " + formatter.format(totalsaveprc);
                } else {
                    if (productObj.pricingCount != "") {
                        elPriceActiveText.innerHTML = formatter.format(activePrice)
                    } else {
                        elPriceActiveText.innerText = formatter.format(activePrice)
                    }
                    // elworthPrice.innerHTML = "";
                }
            }
            var inc_collection_checkout_btn = generate_html_tag('a', 'inc_collection_checkout_btn');
            var inc_collection_checkout_btn_text = generate_html_tag('div', 'inc_collection_checkout_btn_text');
            inc_collection_checkout_btn_text.innerText = "Add To Bag"
            inc_collection_checkout_btn.appendChild(inc_collection_checkout_btn_text);
            // inc_collection_checkout_btn.setAttribute('producturl',productObj.url)
            // inc_collection_checkout_btn.setAttribute('href',productObj.url)
            // inc_collection_checkout_btn.setAttribute('comboid',INC_COL.config.collection_combo_details[k].comboId)
            eldescBlock.appendChild(inc_collection_checkout_btn);

            findObj = new INC_COL.classes.FindObj({
                mainId: productObj.mainId
            });

            var productColorsObj = INC_COL.dataStore.methods().getProductColorsObj(findObj);

            inc_collection_checkout_btn.addEventListener('click', function(e) {
                INC_COL.methods.sendBundleClickTracking(productBlock.getAttribute('data-main_id'), INC_COL.config.pdpPID);
                setTimeout(function() {
                    var href = productBlock.querySelector('.inc_product_img_main_img a').href
                    window.location.assign(href)
                }, 2000)
            })
        }
    });
    amBlock.querySelector('.inc_af_right_btn_block').style.visibility = "hidden";
    amBlock.querySelector('.inc_af_right_btn_img').style.visibility = "hidden";
    amBlock.querySelector('.inc_af_left_btn_block').style.visibility = "hidden";
    amBlock.querySelector('.inc_af_left_btn_img').style.visibility = "hidden";
    var productBlocks = amProductListBlock.querySelectorAll('.inc_product_module_block');

    var sliderBtnCounter = 0;
    var prod_sl_c = 1
    if (productBlocks.length > prod_sl_c) {
        amBlock.querySelector('.inc_af_right_btn_block').style.visibility = "visible";
        amBlock.querySelector('.inc_af_left_btn_block').style.visibility = "visible";
        amBlock.querySelector('.inc_af_left_btn_block').setAttribute("style", "pointer-events: none;opacity:0.5");
        amBlock.querySelector('.inc_af_right_btn_img').style.visibility = "visible";
        amBlock.querySelector('.inc_af_left_btn_img').style.visibility = "visible";
        amBlock.querySelector('.inc_af_left_btn_img').setAttribute("style", "pointer-events: none;opacity:0.5");
    }
    var cc_ount = 1;
    if (window.innerWidth > 768) {
        cc_ount = 4
    }
    if (productBlocks.length <= cc_ount) {
        amBlock.querySelector('.inc_af_right_btn_block').style.visibility = "hidden";
        amBlock.querySelector('.inc_af_right_btn_img').style.visibility = "hidden";
        amBlock.querySelector('.inc_af_left_btn_block').style.visibility = "hidden";
        amBlock.querySelector('.inc_af_left_btn_img').style.visibility = "hidden";
    }
    amBlock.querySelector('.inc_af_right_btn_block').addEventListener("click", function() {
        sliderBtnCounter++;
        if (sliderBtnCounter > productBlocks.length - 1) {
            sliderBtnCounter--;
        }
        var all_p_length = document.querySelectorAll('.inc_af_main_block .inc_af_product-list_block .inc_product_module_block').length
        var cc_ount = 1;
        if (window.innerWidth > 768) {
            cc_ount = 4
        }
        var width_slide = ""
        if (window.innerWidth < 1440) {
            width_slide = 282
        } else {
            width_slide = 292
        }
        if (+INC_COL.clientConfig.slidevalue + +cc_ount < all_p_length) {
            amBlock.parentNode.parentNode.querySelector('.inc_af_main_block .inc_af_left_btn_block').setAttribute("style", "pointer-events: auto;opacity:1");
            amBlock.parentNode.parentNode.querySelector('.inc_af_main_block .inc_af_left_btn_img').setAttribute("style", "pointer-events: auto;opacity:1");
            INC_COL.clientConfig.slidevalue++
            INC_COL.clientConfig.offset = (parseInt(INC_COL.clientConfig.offset) - width_slide) + 'px';
            var menu = amBlock.parentNode.parentNode.querySelector('.inc_af_main_block .inc_af_product-list_block');
            menu.setAttribute('style', 'margin-left:' + INC_COL.clientConfig.offset + ';transition-duration:0.5s;-webkit-transition-duration:0.5s;-moz-transition-duration:0.5s;-ms-transition-duration:0.5s;-o-transition-duration:0.5s;')
            if (document.querySelector('.inc_af_main_block .inc_af_product-list-dots-main_block .inc_dots.inc_active') != null) {
                document.querySelector('.inc_af_main_block .inc_af_product-list-dots-main_block .inc_dots.inc_active').classList.remove('inc_active')
            }
            if (document.querySelectorAll('.inc_af_main_block .inc_af_product-list-dots-main_block .inc_dots')[+INC_COL.clientConfig.slidevalue] != null)
                document.querySelectorAll('.inc_af_main_block .inc_af_product-list-dots-main_block .inc_dots')[+INC_COL.clientConfig.slidevalue].classList.add('inc_active')
        }

        if (+INC_COL.clientConfig.slidevalue + +cc_ount == all_p_length) {
            amBlock.parentNode.parentNode.querySelector('.inc_af_main_block .inc_af_right_btn_block').setAttribute("style", "pointer-events: none;opacity:0.5");
            amBlock.parentNode.parentNode.querySelector('.inc_af_main_block .inc_af_right_btn_img').setAttribute("style", "pointer-events: none;opacity:0.5");
        }
    });

    amBlock.querySelector('.inc_af_left_btn_block').addEventListener("click", function() {
        sliderBtnCounter--;
        if (sliderBtnCounter == -1)
            sliderBtnCounter = 0;
        var all_p_length = document.querySelectorAll('.inc_af_product-list_block .inc_product_module_block').length
        if (INC_COL.clientConfig.slidevalue == -1)
            INC_COL.clientConfig.slidevalue = 0;
        var width_slide = ""

        if (window.innerWidth < 1440) {
            width_slide = 282
        } else {
            width_slide = 292
        }

        if (INC_COL.clientConfig.slidevalue > 0) {
            amBlock.parentNode.parentNode.querySelector('.inc_af_main_block .inc_af_right_btn_block').setAttribute("style", "pointer-events: auto;opacity:1");
            amBlock.parentNode.parentNode.querySelector('.inc_af_main_block .inc_af_right_btn_img').setAttribute("style", "pointer-events: auto;opacity:1");
            INC_COL.clientConfig.slidevalue--
            INC_COL.clientConfig.offset = (parseInt(INC_COL.clientConfig.offset) + width_slide) + 'px';
            var menu = amBlock.parentNode.parentNode.querySelector('.inc_af_main_block .inc_af_product-list_block');
            menu.setAttribute('style', 'margin-left:' + INC_COL.clientConfig.offset + ';transition-duration:0.5s;-webkit-transition-duration:0.5s;-moz-transition-duration:0.5s;-ms-transition-duration:0.5s;-o-transition-duration:0.5s;')
            if (document.querySelector('.inc_af_main_block .inc_af_product-list-dots-main_block .inc_dots.inc_active') != null) {
                document.querySelector('.inc_af_main_block .inc_af_product-list-dots-main_block .inc_dots.inc_active').classList.remove('inc_active')
            }
            if (document.querySelectorAll('.inc_af_main_block .inc_af_product-list-dots-main_block .inc_dots')[+INC_COL.clientConfig.slidevalue] != null)
                document.querySelectorAll('.inc_af_main_block .inc_af_product-list-dots-main_block .inc_dots')[+INC_COL.clientConfig.slidevalue].classList.add('inc_active')
        }
        if (INC_COL.clientConfig.slidevalue == 0) {
            amBlock.parentNode.parentNode.querySelector('.inc_af_main_block .inc_af_left_btn_block').setAttribute("style", "pointer-events: none;opacity:0.5");
            amBlock.parentNode.parentNode.querySelector('.inc_af_main_block .inc_af_left_btn_img').setAttribute("style", "pointer-events: none;opacity:0.5");
        }
    });
    setTimeout(function() {
        document.querySelector('html').style.overflow = '';
        if (document.querySelector('.inc_af_block.inc_recommendations') != null) {
            document.querySelector('.inc_af_block.inc_recommendations').style.display = "block";
        }
    }, 3500);
}

INC_COL.methods.createRECBlockTop = function() {

    var datastore = INC_COL.dataStore
    // if (document.querySelector('.inc_af_bk.inc_recommendations') != null) {
    //     var reco_bk = document.querySelector('.inc_af_bk.inc_recommendations')
    //     reco_bk.parentNode.removeChild(reco_bk);
    //     reco_bk.style.display = "none"
    // }

    var cart_html = '<div class="inc_af_title_bk" style="clear: both;"><div class="inc_af_title_text_bk"><div class="inc_af_title_text"></div><div class="inc_af_modal_close"></div></div></div><div class="inc_af_bundles_bk"><div class="inc_af_left_bk"><div class="inc_af_left_btn_bk"><div class="inc_af_left_btn_img_bk"><div class="inc_af_left_btn_img"></div></div></div></div><div class="inc_af_product-list-main_bk"><div class="inc_af_product-list_bk"></div></div><div class="inc_af_right_bk"><div class="inc_af_right_btn_bk"><div class="inc_af_right_btn_img_bk"><div class="inc_af_right_btn_img"></div></div></div></div></div>'
    var amBlock = generate_html_tag('div', 'inc_af_bk')

    amBlock.classList.add('inc_recommendations')
    amBlock.innerHTML = cart_html

    var amMainBlock = generate_html_tag('div', 'inc_af_main_bk_top');
    // amMainBlock.style.display="none"
    amMainBlock.appendChild(amBlock);

    // if(window.innerWidth>820){
    var tplayoutsibling = document.querySelector('.inc_bk')
    if (tplayoutsibling != null) {
        tplayoutsibling.parentNode.insertBefore(amMainBlock, tplayoutsibling)
    }
    // }
    // else{
    //     var tplayoutsibling=document.querySelector('.inc_bk')
    //     if(tplayoutsibling != null){
    //         tplayoutsibling.appendChild(amMainBlock)
    //     }else if(document.querySelector('footer') != null){
    //         var footerinc = document.querySelector('footer')
    //         tplayoutsibling.parentNode.insertBefore(amMainBlock, tplayoutsibling)
    //     }
    // }

    if (INC_COL.config.recbottom != undefined && INC_COL.config.recbottom.length > 0) {
        var recModuleArray = INC_COL.config.rectop
    } else {
        var recModuleArray = INC_COL.config.recarray
    }

    var duplamid = []

    var amProductListBlock = amBlock.querySelector(".inc_af_product-list_bk");
    var elAmTitleText = amBlock.querySelector(".inc_af_title_text_bk")
    recModuleArray.forEach(function(mainProductId) {
        if (INC_COL.config.duplamid.indexOf(mainProductId) == -1) {
            INC_COL.config.duplamid.push(mainProductId)
            var findObj = new INC_COL.classes.FindObj({
                id: mainProductId
            });

            var productObj = INC_COL.dataStore.methods().getProductById(findObj);

            var productModuleBlock = generate_html_tag('div', 'inc_product_module_bk')
            var elProductShowcaseBlock = generate_html_tag('div', 'inc_product_showcase_bk');
            amProductListBlock.appendChild(productModuleBlock);
            elAmTitleText.innerText = "People who viewed this item also viewed"

            var productcardhtml = '<div class="inc_product_bk"> <div class="inc_product_info_main_bk"> <div class="inc_product_view_info_bk"> <div class="inc_product_view_img_desc_bk"> <div class="inc_product_img_bk"> <div class="inc_product_img_main_bk"> <div class="inc_product_img_main_img_bk"> <div class="inc_product_img_main_img"> </div></div></div></div></div></div><div class="inc_product_desc_bk"> <div class="inc_product_desc_title_bk"> <div class="inc_product_desc_title_text_bk"> <div class="inc_product_desc_title_text"> </div></div><div class="inc_product_manufacture_text_bk"><div class="inc_product_maufacture_text"></div></div></div><div class="inc_product_desc_ratings_bk"></div><div class="inc_product_desc_price_bk"> <div class="inc_product_price_label_bk"></div><div class="inc_product_desc_price_active_bk"> <div class="inc_product_desc_price_active_text_bk"> <div class="inc_product_desc_price_active_text"></div><div class="inc_product_desc_price_active_text_msg"></div></div></div><div class="inc_product_desc_price_regular_bk"> <div class="inc_product_desc_price_regular_text_bk"><div class="inc_product_desc_price_regular_text"></div></div></div></div></div></div></div>'
            elProductShowcaseBlock.innerHTML = productcardhtml
            productModuleBlock.appendChild(elProductShowcaseBlock)
            var productBlock = elProductShowcaseBlock.querySelector('.inc_product_bk')
            var elTitleBlock = elProductShowcaseBlock.querySelector('.inc_product_desc_title_bk');
            var elImgBlock = elProductShowcaseBlock.querySelector('.inc_product_img_bk');
            var elTitleText = productBlock.querySelector('.inc_product_desc_title_text');
            var elTitleTextBlock = productBlock.querySelector('.inc_product_desc_title_text_bk');
            var elPriceActiveText = productBlock.querySelector('.inc_product_desc_price_active_text');
            ;var elPriceActiveMsg = productBlock.querySelector('.inc_product_desc_price_active_text_msg');
            var elPriceRegularText = productBlock.querySelector('.inc_product_desc_price_regular_text');
            var eldescBlock = productBlock.querySelector('.inc_product_desc_bk');

            var product_id = productBlock.querySelector('.inc_product_maufacture_text');
            product_id.innerHTML = productObj.Field2;

            productBlock.setAttribute('data-id', productObj.id);
            productBlock.setAttribute('data-sku', productObj.sku);
            productBlock.setAttribute('data-main_id', productObj.mainId);
            productBlock.setAttribute('data-bundle_id', productObj.bundleId);

            productModuleBlock.setAttribute('data-id', productObj.id);
            productModuleBlock.setAttribute('data-sku', productObj.sku);
            productModuleBlock.setAttribute('data-main_id', productObj.mainId);
            productModuleBlock.setAttribute('data-bundle_id', productObj.bundleId);

            var elImgMainImg = elImgBlock.querySelector('.inc_product_img_main_img');
            var elImgTag1 = generate_html_tag('img');
            if (productObj.imageURL != undefined) {
                elImgTag1.src = productObj.imageURL
                if (elImgTag1 == true) {
                    elImgTag.src = productObj.imageURL
                }
            }
            // elImgTag1.setAttribute('onerror', "this.src='" + INC_COL.config.noimage + "'");
            elImgTag1.setAttribute('role', 'img')
            elImgTag1.setAttribute('aria-label', 'Image')
            elImgTag1.setAttribute('alt', productObj.name)
            elImgTag1.setAttribute('data-mouseover', productObj["otherImageList"])
            elImgTag1.setAttribute('data-imageURL', productObj["imageURL"])
            var productLink = document.createElement('a');
            productLink.target = "_blank";
            productLink.href = productObj.url;
            productLink.appendChild(elImgTag1);
            productLink.setAttribute('otherImageList', productObj["otherImageList"])
            productLink.setAttribute('imageURL', productObj["imageURL"])
            elImgMainImg.appendChild(productLink);
            productLink.addEventListener("click", function(e) {
                if (window.innerWidth < 821) {
                    e.preventDefault()
                }
            })
            elImgMainImg.addEventListener("click", function() {
                INC_COL.methods.sendBundleClickTracking(productBlock.getAttribute('data-main_id'), INC_COL.config.pdpPID);
                var hrefd = productBlock.querySelector('.inc_product_img_main_img a').href
                setTimeout(function() {
                    if (window.innerWidth < 821) {
                        window.location.assign(hrefd);
                    }
                }, 2000)
            });

            elTitleTextBlock.addEventListener("click", function(e) {
                INC_COL.methods.sendBundleClickTracking(productBlock.getAttribute('data-main_id'), INC_COL.config.pdpPID, "100");
                var hrefd = productBlock.querySelector('.inc_product_img_main_img a').href
                setTimeout(function() {
                    if (window.innerWidth < 821) {
                        window.location.assign(hrefd);
                    }
                }, 2000)
            });
            var pTitleDiv = document.createElement('div');
            pTitleDiv.innerHTML = productObj.name;
            var field1 = productObj.ratingsCount
            var field2 = productObj.reviewsCount
            var elratingsBlock = productBlock.querySelector('.inc_product_desc_ratings_bk');
            INC_COL.methods.get_product_ratingscol(field1, field2, elratingsBlock);
            var pLink = document.createElement('a');
            pLink.href = productObj.url;
            pLink.target = "_blank";
            pLink.setAttribute('title', productObj.name)
            pLink.setAttribute('href', productObj.url)
            pLink.appendChild(pTitleDiv);
            elTitleText.appendChild(pLink);
            pLink.addEventListener("click", function(e) {
                if (window.innerWidth < 821) {
                    e.preventDefault()
                }
            })
            var activePrice = parseFloat(productObj.activePrice).toFixed(2).toString();
            var regularPrice = parseFloat(productObj.regularPrice).toFixed(2).toString();
            elPriceRegularText.textContent = "";
            if (productObj.ProductType != "simple") {
                var priceRange = get_child_product_pricescol(productObj.mainId)
                if (priceRange.innerText.split(',')[0] != priceRange.innerText.split(',')[1] && priceRange.innerText.split(',')[1] != undefined) {
                    elPriceActiveText.innerHTML = priceRange.innerText.split(',')[0]
                    elPriceRegularText.innerHTML = "Was " + priceRange.innerText.split(',')[1]
                } else {
                    elPriceActiveText.innerHTML = priceRange.innerText.split(',')[0]
                }
            } else {
                if (activePrice != regularPrice && regularPrice != "" && regularPrice != null && regularPrice != 0) {
                    elPriceActiveText.parentNode.parentNode.parentNode.classList.add('is_special_price')
                    if (productObj.pricingCount != "") {
                        elPriceActiveText.innerHTML = formatter.format(activePrice)
                        elPriceRegularText.innerHTML = "<span>" + "WAS" + "</span>" + formatter.format(regularPrice)
                    } else {
                        elPriceActiveText.innerHTML = formatter.format(activePrice)
                        elPriceRegularText.innerHTML = "<span>" + "WAS" + "</span>" + formatter.format(regularPrice)
                    }
                    // elworthPrice.innerHTML = "Save " + formatter.format(totalsaveprc);
                } else {
                    if (productObj.pricingCount != "") {
                        elPriceActiveText.innerHTML = formatter.format(activePrice)
                    } else {
                        elPriceActiveText.innerText = formatter.format(activePrice)
                    }
                    // elworthPrice.innerHTML = "";
                }
            }
            var inc_collection_checkout_btn = generate_html_tag('a', 'inc_collection_checkout_btn');
            var inc_collection_checkout_btn_text = generate_html_tag('div', 'inc_collection_checkout_btn_text');
            inc_collection_checkout_btn_text.innerText = "Add To Bag"
            inc_collection_checkout_btn.appendChild(inc_collection_checkout_btn_text);
            // inc_collection_checkout_btn.setAttribute('producturl',productObj.url)
            // inc_collection_checkout_btn.setAttribute('href',productObj.url)
            // inc_collection_checkout_btn.setAttribute('comboid',INC_COL.config.collection_combo_details[k].comboId)
            eldescBlock.appendChild(inc_collection_checkout_btn);

            findObj = new INC_COL.classes.FindObj({
                mainId: productObj.mainId
            });

            var productColorsObj = INC_COL.dataStore.methods().getProductColorsObj(findObj);

            inc_collection_checkout_btn.addEventListener('click', function(e) {
                INC_COL.methods.sendBundleClickTracking(productBlock.getAttribute('data-main_id'), INC_COL.config.pdpPID);
                setTimeout(function() {
                    var href = productBlock.querySelector('.inc_product_img_main_img a').href
                    window.location.assign(href)
                }, 2000)
            })
        }
    });
    amBlock.querySelector('.inc_af_right_btn_bk').style.visibility = "hidden";
    amBlock.querySelector('.inc_af_right_btn_img').style.visibility = "hidden";
    amBlock.querySelector('.inc_af_left_btn_bk').style.visibility = "hidden";
    amBlock.querySelector('.inc_af_left_btn_img').style.visibility = "hidden";
    var productBlocks = amProductListBlock.querySelectorAll('.inc_product_module_bk');
    var sliderBtnCounter = 0;
    var prod_sl_c = 1
    if (productBlocks.length > prod_sl_c) {
        amBlock.querySelector('.inc_af_right_btn_bk').style.visibility = "visible";
        amBlock.querySelector('.inc_af_left_btn_bk').style.visibility = "visible";
        amBlock.querySelector('.inc_af_left_btn_bk').setAttribute("style", "pointer-events: none;opacity:0.5");
        amBlock.querySelector('.inc_af_right_btn_img').style.visibility = "visible";
        amBlock.querySelector('.inc_af_left_btn_img').style.visibility = "visible";
        amBlock.querySelector('.inc_af_left_btn_img').setAttribute("style", "pointer-events: none;opacity:0.5");
    }
    var cc_ount = 1;
    if (window.innerWidth > 768) {
        cc_ount = 4
    }
    if (productBlocks.length <= cc_ount) {
        amBlock.querySelector('.inc_af_right_btn_bk').style.visibility = "hidden";
        amBlock.querySelector('.inc_af_right_btn_img').style.visibility = "hidden";
        amBlock.querySelector('.inc_af_left_btn_bk').style.visibility = "hidden";
        amBlock.querySelector('.inc_af_left_btn_img').style.visibility = "hidden";
    }

    setTimeout(function() {
        document.querySelector('html').style.overflow = '';
        if (document.querySelector('.inc_af_bk.inc_recommendations') != null) {
            document.querySelector('.inc_af_bk.inc_recommendations').style.display = "block";
        }
    }, 3500);
}

function get_child_product_pricescol(productid) {
    price_array = [];
    x_price_array = [];
    var obj1 = INC_COL.dataStore.dataStoreObj[productid];

    for (var key in obj1) {
        if (obj1.hasOwnProperty(key)) {
            var val1 = obj1[key];
            if (val1.activePrice != null && parseFloat(val1.activePrice) < parseFloat(val1.regularPrice)) {
                price_array.push(val1.activePrice);
                x_price_array.push(val1.regularPrice);
            } else {
                price_array.push(val1.activePrice);
                x_price_array.push(val1.regularPrice);
            }
        }
    }

    price_array = price_array.filter(Number);
    x_price_array = x_price_array.filter(Number);
    return min_max_pricescol(price_array, x_price_array);
}

function min_max_pricescol(arr, arr_x) {
    var min = Math.min.apply(Math, arr);
    var max = Math.max.apply(Math, arr);
    var min1 = Math.min.apply(Math, arr_x);
    var max1 = Math.max.apply(Math, arr_x);
    if (arr_x.length > 0) {
        var min_x = Math.min.apply(Math, arr_x);
    }
    var price_min_max = generate_html_tag("div", "price_min_max");
    if (min != max) {
        var price = formatter.format(min) + " - " + formatter.format(max);
    } else {
        var price = formatter.format(min);
    }
    if (min1 != max1) {
        var price1 = formatter.format(min1) + " - " + formatter.format(max1);
    } else {
        var price1 = formatter.format(min1);
    }
    price_min_max.textContent = price + "," + price1;
    return price_min_max;
}

function setJsonDatatoCookie(addedproducdetails) {
    var userD = readCookie('ividData')
    if (userD == undefined || userD == null || userD == "[]" || userD == "[null]") {
        var IncAddedprod = []
        IncAddedprod.push({
            addedproducdetails
        })
        var clientDomain = window.location.host.replace("www", "");
        var d = new Date();
        d.setTime(d.getTime() + (365 * 24 * 60 * 60 * 1000));
        var expires = "expires=" + d.toUTCString();
        document.cookie = 'ividData=' + JSON.stringify(addedproducdetails) + '; expires=' + expires + '; domain=' + clientDomain + '; path=/' + '; secure:' + true + ';'
    } else {
        var addedprod = JSON.parse(userD)
        var IncAddedprod = []
        addedprod.push(addedproducdetails[0])
        // var ividdataN = ividData + "-" + ;
        var clientDomain = window.location.host.replace("www", "");
        var d = new Date();
        d.setTime(d.getTime() + (365 * 24 * 60 * 60 * 1000));
        var expires = "expires=" + d.toUTCString();
        document.cookie = 'ividData=' + JSON.stringify(addedprod) + '; expires=' + expires + '; domain=' + clientDomain + '; path=/' + '; secure:' + true + ';'
    }
}

setTimeout(function() {
    if (INC_COL.config.MainPrdName != "" || INC_COL.config.MainPrdName != null) {
        if (document.querySelector('.inc_breadcrumb_prd') != null) {
            document.querySelector('.inc_breadcrumb_prd').innerText = INC_COL.config.MainPrdName;
        }
    }
}, 2000);
